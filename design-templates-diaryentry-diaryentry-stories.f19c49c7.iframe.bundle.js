(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[5767],{"./src/design/organisms/page-container/page-container.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>PageContainerComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var page_container_componentngResource=__webpack_require__("./src/design/organisms/page-container/page-container.component.scss?ngResource"),page_container_componentngResource_default=__webpack_require__.n(page_container_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),animations=__webpack_require__("./node_modules/@angular/animations/fesm2022/animations.mjs");const fadeIn=(0,animations.hZ)("fadeIn",[(0,animations.kY)(":enter",[(0,animations.iF)({opacity:0}),(0,animations.i0)("250ms ease-in",(0,animations.iF)({opacity:1}))]),(0,animations.kY)(":leave",[(0,animations.iF)({opacity:1}),(0,animations.i0)("250ms ease-out",(0,animations.iF)({opacity:0}))])]);(0,animations.hZ)("fadeOut",[(0,animations.kY)(":leave",[(0,animations.iF)({opacity:1}),(0,animations.i0)("250ms ease-out",(0,animations.iF)({opacity:0}))])]);let PageContainerComponent=class PageContainerComponent{};PageContainerComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-page-container",template:'<div class="page" [@fadeIn]>\n  <article class="page__foreground">\n    <ng-content></ng-content>\n  </article>\n</div>\n',standalone:!0,imports:[],animations:[fadeIn],styles:[page_container_componentngResource_default()]})],PageContainerComponent)},"./src/design/templates/diaryentry/diaryentry.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,NoPermission:()=>NoPermission,__namedExportsOrder:()=>__namedExportsOrder,default:()=>diaryentry_stories});var testing=__webpack_require__("./node_modules/@angular/router/fesm2022/testing.mjs"),dist=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),angular_dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),formly_constants=__webpack_require__("./src/app/_modules/formly_constants.ts"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var diaryentry_componentngResource=__webpack_require__("./src/design/templates/diaryentry/diaryentry.component.scss?ngResource"),diaryentry_componentngResource_default=__webpack_require__.n(diaryentry_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),routing_service=__webpack_require__("./src/app/_services/routing.service.ts"),button_component=__webpack_require__("./src/design/atoms/button/button.component.ts"),article_footer_component=__webpack_require__("./src/design/molecules/article-footer/article-footer.component.ts"),diaryentry_encounters_component=__webpack_require__("./src/design/organisms/diaryentry-encounters/diaryentry-encounters.component.ts"),page_container_component=__webpack_require__("./src/design/organisms/page-container/page-container.component.ts");let DiaryentryComponent=class DiaryentryComponent{constructor(routingService){this.routingService=routingService,this.diaryentry=core.input.required(),this.campaignCharacters=core.input.required(),this.campaignLocations=core.input.required(),this.encounterServerModel=core.input.required(),this.canUpdate=core.input.required(),this.canCreate=core.input.required(),this.canDelete=core.input.required(),this.diaryentryDelete=new core.EventEmitter,this.encounterConnectionDelete=new core.EventEmitter,this.encounterConnectionCreate=new core.EventEmitter,this.encounterDelete=new core.EventEmitter,this.encounterUpdate=new core.EventEmitter,this.encounterCreate=new core.EventEmitter,this.encounterCutInsert=new core.EventEmitter,this.encounterSwap=new core.EventEmitter,this.addUnfinishedEncounter=(0,core.output)(),this.campaignName=(0,core.computed)((()=>this.diaryentry().campaign_details.name)),this.state=(0,core.signal)("DISPLAY"),this.overviewUrl=(0,core.computed)((()=>this.routingService.getRoutePath("diaryentry-overview",{campaign:this.campaignName()}))),this.updateUrl=(0,core.computed)((()=>{const{session_number:sessionNumber,is_main_session_int:isMainSession}=this.diaryentry().session_details,authorName=this.diaryentry().author_details?.name;return this.routingService.getRoutePath("diaryentry-update",{sessionNumber,isMainSession,authorName,campaign:this.campaignName()})})),this.nextDiaryentryUrl=(0,core.computed)((()=>{const nextDiaryentryStub=this.diaryentry().adjacent_diaryentries.next_diaryentry;return this.createDiaryentryURL(nextDiaryentryStub)})),this.priorDiaryentryUrl=(0,core.computed)((()=>{const priorDiaryentryStub=this.diaryentry().adjacent_diaryentries.prior_diaryentry;return this.createDiaryentryURL(priorDiaryentryStub)}))}toggleState(){const isDisplayState="DISPLAY"===this.state();this.state.set(isDisplayState?"EDIT":"DISPLAY")}createDiaryentryURL(stub){if(null==stub)return;const campaignName=stub.session_details.campaign_details?.name,sessionNumber=stub.session_details.session_number,authorName=stub.author_details.name,isMainSession=stub.session_details.is_main_session_int;return this.routingService.getRoutePath("diaryentry",{sessionNumber,isMainSession,authorName,campaign:campaignName})}static{this.ctorParameters=()=>[{type:routing_service.O}]}static{this.propDecorators={diaryentry:[{type:core.Input,args:[{isSignal:!0,alias:"diaryentry",required:!0,transform:void 0}]}],campaignCharacters:[{type:core.Input,args:[{isSignal:!0,alias:"campaignCharacters",required:!0,transform:void 0}]}],campaignLocations:[{type:core.Input,args:[{isSignal:!0,alias:"campaignLocations",required:!0,transform:void 0}]}],encounterServerModel:[{type:core.Input,args:[{isSignal:!0,alias:"encounterServerModel",required:!0,transform:void 0}]}],canUpdate:[{type:core.Input,args:[{isSignal:!0,alias:"canUpdate",required:!0,transform:void 0}]}],canCreate:[{type:core.Input,args:[{isSignal:!0,alias:"canCreate",required:!0,transform:void 0}]}],canDelete:[{type:core.Input,args:[{isSignal:!0,alias:"canDelete",required:!0,transform:void 0}]}],diaryentryDelete:[{type:core.Output}],encounterConnectionDelete:[{type:core.Output}],encounterConnectionCreate:[{type:core.Output}],encounterDelete:[{type:core.Output}],encounterUpdate:[{type:core.Output}],encounterCreate:[{type:core.Output}],encounterCutInsert:[{type:core.Output}],encounterSwap:[{type:core.Output}],addUnfinishedEncounter:[{type:core.Output,args:["addUnfinishedEncounter"]}]}}};DiaryentryComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-diaryentry",template:'<app-page-container>\n  <article class="container diarentry">\n    @if (canUpdate()) {\n      <div class="diaryentry__edit-row edit-row">\n        <div class="edit-row__edit-container edit-container">\n          <a\n            class="edit-container__button"\n            [routerLink]="updateUrl()"\n            tabindex="-1"\n          >\n            <button btn [icon]="\'pencil\'" [kind]="\'SECONDARY\'"></button>\n          </a>\n          <button\n            btn\n            class="edit-container__button"\n            [kind]="\'SECONDARY\'"\n            [icon]="state() === \'DISPLAY\' ? \'pencil\' : \'times\'"\n            [text]="\n              state() === \'DISPLAY\' ? \'Edit Encounters\' : \'Read Diaryentry\'\n            "\n            (click)="toggleState()"\n          ></button>\n        </div>\n      </div>\n    }\n\n    \x3c!-- Heading --\x3e\n    <div class="row">\n      <h1 class="col-12 diaryentry__heading">\n        Diary Entry # {{ diaryentry().session_details?.session_number }} <br />\n        {{ diaryentry().title }}\n      </h1>\n      <h6 class="col-12 diaryentry__subheading">\n        Written by: {{ diaryentry().author_details?.name }} <br />\n        on {{ diaryentry().session_details?.session_date | date: "longDate" }}\n      </h6>\n    </div>\n\n    \x3c!-- Next/Prior Diaryentry Buttons --\x3e\n    <ng-container *ngTemplateOutlet="navButtons" />\n\n    \x3c!-- DiaryEntry Text In Encounters --\x3e\n    <app-diaryentry-encounters\n      [state]="state() === \'DISPLAY\' ? \'READ\' : \'EDIT\'"\n      (connectionDelete)="encounterConnectionDelete.emit($event)"\n      (connectionCreate)="encounterConnectionCreate.emit($event)"\n      (encounterDelete)="encounterDelete.emit($event)"\n      (encounterUpdate)="encounterUpdate.emit($event)"\n      (encounterCreate)="encounterCreate.emit($event)"\n      (encounterSwap)="encounterSwap.emit($event)"\n      (encounterCutInsert)="encounterCutInsert.emit($event)"\n      (addUnfinishedEncounter)="addUnfinishedEncounter.emit($event)"\n    ></app-diaryentry-encounters>\n\n    \x3c!-- Next/Prior Diaryentry Buttons --\x3e\n    <ng-container *ngTemplateOutlet="navButtons" />\n\n    \x3c!-- Footer (Move to other Article + Delete Article) --\x3e\n    <app-article-footer\n      [buttonLink]="overviewUrl()"\n      [buttonLabel]="\'Back to Diaryentries\'"\n      [showDelete]="canDelete()"\n      [deleteMessage]="\'Delete this Diaryentry?\'"\n      (delete)="diaryentryDelete.emit(diaryentry())"\n    ></app-article-footer>\n  </article>\n</app-page-container>\n\n<ng-template #navButtons>\n  \x3c!-- Next/Prior Diaryentry Buttons --\x3e\n  <div class="row diaryentry__nav-buttons nav-buttons">\n    \x3c!-- Next Diaryentry --\x3e\n    <div class="col-xl-2 col-lg-3 col-md-4 col-5 nav-buttons__button-container">\n      @if (diaryentry().adjacent_diaryentries.next_diaryentry) {\n        <a\n          class="nav-buttons__button nav-buttons__button--left"\n          [routerLink]="nextDiaryentryUrl()"\n        >\n          <button\n            btn\n            class="nav-buttons__inner-button"\n            [text]="\'Next\'"\n            [icon]="\'arrow-left\'"\n            [kind]="\'SECONDARY\'"\n          ></button>\n        </a>\n      }\n    </div>\n\n    \x3c!-- Prior Diaryentry --\x3e\n    <div class="col-xl-2 col-lg-3 col-md-4 col-5 nav-buttons__button-container">\n      @if (diaryentry().adjacent_diaryentries.prior_diaryentry) {\n        <a\n          class="nav-buttons__button nav-buttons__button--right"\n          [routerLink]="priorDiaryentryUrl()"\n        >\n          <button\n            btn\n            class="nav-buttons__inner-button"\n            [text]="\'Back\'"\n            [icon]="\'arrow-right\'"\n            [kind]="\'SECONDARY\'"\n          ></button>\n        </a>\n      }\n    </div>\n  </div>\n</ng-template>\n',standalone:!0,imports:[page_container_component.i,router.Wk,button_component.Q,common.NgTemplateOutlet,diaryentry_encounters_component.j,article_footer_component.D,common.DatePipe],styles:[diaryentry_componentngResource_default()]})],DiaryentryComponent);const dummyDiaryEntry={pk:456,title:"Session Recap - Orc Raid",author:789,author_details:{pk:789,name:"Jane Doe"},session:123,session_details:{pk:123,is_main_session:!0,session_number:5,session_date:"2022-05-01",campaign_details:{pk:1,name:"Campaign of Adventures"},diaryentries:[{author_name:"John Doe",name:"Session Recap - Goblin Ambush"}]},encounters:[{pk:1,description:"\n      <p>In this <strong>epic encounter</strong>, the adventurers find themselves facing a fearsome <em>red dragon</em> deep within the twisting caverns of the mountains. The air is thick with the stench of sulfur as the dragon's massive form looms before them, its scales glinting in the flickering light of the torches.</p>\n\n      <p>The dragon roars, its fiery breath scorching the stone walls and causing the ground to tremble beneath the adventurers' feet. But they stand firm, weapons at the ready, knowing that this is the moment they have been training for.</p>\n\n      <p>The battle is fierce, with the dragon lashing out with razor-sharp claws and blasting the adventurers with jets of searing flame. But they are determined to prevail, and with each blow they strike, they chip away at the dragon's armor and weaken its resolve.</p>\n\n      <p>Finally, with a mighty roar, the dragon falls, its lifeless body crashing to the ground in a thunderous heap. The adventurers are battered and bruised, but they emerge victorious, their spirits lifted by the knowledge that they have faced one of the greatest challenges of their lives and emerged triumphant.</p>\n    ",encounterConnections:[{pk:1,encounter:1,encounter_details:{name:"Dragon",name_full:"Red Dragon",pk:1},character:1,character_details:{name:"Adventurer",name_full:"Adventurer One",pk:1}},{pk:2,encounter:1,encounter_details:{name:"Dragon",name_full:"Red Dragon",pk:1},character:2,character_details:{name:"Adventurer",name_full:"Adventurer Two",pk:2}},{pk:1,encounter:4,encounter_details:{name:"Goblin Ambush",name_full:"Goblin Ambush",pk:4},character:4,character_details:{name:"Warrior",name_full:"Warrior Four",pk:4}},{pk:1,encounter:5,encounter_details:{name:"Treasure Hunt",name_full:"Treasure Hunt",pk:5},character:5,character_details:{name:"Wizard",name_full:"Wizard Five",pk:5}},{pk:1,encounter:6,encounter_details:{name:"Orc Battle",name_full:"Orc Battle",pk:6},character:6,character_details:{name:"Ranger",name_full:"Ranger Six",pk:6}},{pk:1,encounter:7,encounter_details:{name:"Bandit Raid",name_full:"Bandit Raid",pk:7},character:7,character_details:{name:"Paladin",name_full:"Paladin Seven",pk:7}}],location:1,location_details:{name:"Cave",pk:1,name_full:"Cave of the Red Dragon",parent_location_name:"Mountains"},title:"The Battle of the Red Dragon's Lair",diaryentry:1,diaryentry_details:{author_name:"Dungeon Master",is_main_session:1,session_number:1},order_index:1,name:"Encounter 1",creation_datetime:"2022-04-23T12:34:56.789Z",update_datetime:"2022-04-23T12:34:56.789Z",campaign:1,campaign_details:{id:1,name:"Campaign 1"},getAbsoluteRouterUrl:()=>"/encounters/1/"},{pk:2,description:"\n      <p>A group of adventurers are hired to retrieve a stolen artifact from a well-guarded tomb. The tomb is filled with traps and monsters, but the adventurers are determined to complete the job and earn their reward.</p>\n    ",encounterConnections:[{pk:1,encounter:2,encounter_details:{name:"Tomb",name_full:"The Tomb of the Lost Artifact",pk:2},character:1,character_details:{name:"Rogue",name_full:"Rogue One",pk:1}},{pk:2,encounter:2,encounter_details:{name:"Tomb",name_full:"The Tomb of the Lost Artifact",pk:2},character:2,character_details:{name:"Fighter",name_full:"Fighter Two",pk:2}},{pk:3,encounter:2,encounter_details:{name:"Tomb",name_full:"The Tomb of the Lost Artifact",pk:2},character:3,character_details:{name:"Cleric",name_full:"Cleric Three",pk:3}}],location:2,location_details:{name:"Tomb",pk:2,name_full:"The Tomb of the Lost Artifact",parent_location_name:"Desert"},title:"The Tomb of the Lost Artifact",diaryentry:2,diaryentry_details:{author_name:"Dungeon Master",is_main_session:1,session_number:2},order_index:2,name:"Encounter 2",creation_datetime:"2022-04-23T12:34:56.789Z",update_datetime:"2022-04-23T12:34:56.789Z",campaign:1,campaign_details:{id:1,name:"Campaign 1"},getAbsoluteRouterUrl:()=>"/encounters/2/"},{pk:2,description:"\n      <p>A peaceful meadow is disturbed by the sudden appearance of a swarm of angry bees. The buzzing grows louder as the bees form a whirlwind around the adventurers, stinging them fiercely. Despite the pain, the adventurers remain calm and work together to disperse the swarm.</p>\n    ",encounterConnections:[{pk:3,encounter:2,encounter_details:{name:"Bee Swarm",name_full:"Angry Bee Swarm",pk:2},character:3,character_details:{name:"Bard",name_full:"Bard Three",pk:3}},{pk:4,encounter:2,encounter_details:{name:"Bee Swarm",name_full:"Angry Bee Swarm",pk:2},character:4,character_details:{name:"Warrior",name_full:"Warrior Four",pk:4}}],location:2,location_details:{name:"Meadow",pk:2,name_full:"Meadow of the Angry Bees",parent_location_name:"Forest"},title:"The Bee Swarm Attack",diaryentry:2,diaryentry_details:{author_name:"Dungeon Master",is_main_session:0,session_number:2},order_index:2,name:"Encounter 2",creation_datetime:"2022-04-23T13:34:56.789Z",update_datetime:"2022-04-23T13:34:56.789Z",campaign:1,campaign_details:{id:1,name:"Campaign 1"},getAbsoluteRouterUrl:()=>"/encounters/2/"}],campaign_details:{pk:1,name:"Campaign of Adventures"},adjacent_diaryentries:{next_diaryentry:{author_details:{pk:789,name:"Jane Doe"},session_details:{pk:124,is_main_session:!0,session_number:6,session_date:"2022-05-08",campaign_details:{pk:1,name:"Campaign of Adventures"}}},prior_diaryentry:{author_details:{pk:789,name:"Jane Doe"},session_details:{pk:122,is_main_session:!0,session_number:4,session_date:"2022-04-24",campaign_details:{pk:1,name:"Campaign of Adventures"}}}},getAbsoluteRouterUrl:()=>"https://example.com/diaryentries/456"},diaryentry_stories={title:"DesignSystem/Templates/DiaryentryComponent",component:DiaryentryComponent,decorators:[(0,angular_dist.moduleMetadata)({imports:[testing.c,formly_constants.d_],declarations:[]})],args:{diaryentry:dummyDiaryEntry,campaignCharacters:[],encounterServerModel:void 0,canCreate:!0,canUpdate:!0,canDelete:!0}},Template=args=>({props:{...args,diaryentryDelete:(0,dist.XI)("diaryentryDelete"),encounterConnectionDelete:(0,dist.XI)("encounterConnectionDelete"),encounterConnectionCreate:(0,dist.XI)("encounterConnectionCreate"),encounterDelete:(0,dist.XI)("encounterDelete"),encounterUpdate:(0,dist.XI)("encounterUpdate"),encounterCreate:(0,dist.XI)("encounterCreate"),encounterCutInsert:(0,dist.XI)("encounterCutInsert"),encounterSwap:(0,dist.XI)("encounterSwap")}}),Default=Template.bind({});Default.args={};const NoPermission=Template.bind({});NoPermission.args={canDelete:!1,canUpdate:!1,canCreate:!1};const __namedExportsOrder=["Default","NoPermission"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args,\n    diaryentryDelete: action('diaryentryDelete'),\n    encounterConnectionDelete: action('encounterConnectionDelete'),\n    encounterConnectionCreate: action('encounterConnectionCreate'),\n    encounterDelete: action('encounterDelete'),\n    encounterUpdate: action('encounterUpdate'),\n    encounterCreate: action('encounterCreate'),\n    encounterCutInsert: action('encounterCutInsert'),\n    encounterSwap: action('encounterSwap')\n  }\n})",...Default.parameters?.docs?.source}}},NoPermission.parameters={...NoPermission.parameters,docs:{...NoPermission.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args,\n    diaryentryDelete: action('diaryentryDelete'),\n    encounterConnectionDelete: action('encounterConnectionDelete'),\n    encounterConnectionCreate: action('encounterConnectionCreate'),\n    encounterDelete: action('encounterDelete'),\n    encounterUpdate: action('encounterUpdate'),\n    encounterCreate: action('encounterCreate'),\n    encounterCutInsert: action('encounterCutInsert'),\n    encounterSwap: action('encounterSwap')\n  }\n})",...NoPermission.parameters?.docs?.source}}}},"./src/design/organisms/page-container/page-container.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".page {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n.page__background {\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: -2;\n  width: 100%;\n  height: 100mvh;\n}\n.page__foreground {\n  max-width: 60rem;\n  width: 100%;\n  background-color: var(--wiki-bg-transparent);\n  padding: var(--spacer-3) var(--spacer-3) var(--spacer-5) var(--spacer-3);\n  margin-bottom: var(--spacer-4);\n  color: white;\n}\n@media (min-width: 768px) {\n  .page__foreground {\n    border-radius: var(--bs-border-radius);\n  }\n}\n@media (min-width: 992px) {\n  .page__foreground {\n    padding: var(--spacer-4);\n  }\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/design/templates/diaryentry/diaryentry.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".diaryentry {\n  padding: 0;\n}\n.diaryentry__edit-row {\n  width: 100%;\n  margin-bottom: var(--spacer-3);\n}\n.diaryentry__heading {\n  text-align: center;\n}\n.diaryentry__subheading {\n  margin-bottom: var(--spacer-3);\n  text-align: center;\n}\n.diaryentry__images {\n  margin-bottom: var(--spacer-3);\n}\n.diaryentry__quote {\n  margin-bottom: var(--spacer-5);\n}\n.diaryentry__description {\n  margin-bottom: var(--spacer-5);\n}\n.diaryentry__items {\n  margin-bottom: var(--spacer-5);\n}\n.diaryentry__nav-buttons {\n  margin-bottom: var(--spacer-3);\n}\n\n.nav-buttons {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.nav-buttons__button-container {\n  display: flex;\n}\n.nav-buttons__button {\n  width: 100%;\n  display: flex;\n  text-decoration: none;\n}\n.nav-buttons__button--left {\n  justify-content: flex-start;\n}\n.nav-buttons__button--right {\n  justify-content: flex-end;\n}\n.nav-buttons__inner-button {\n  width: 100%;\n}\n\n.edit-row {\n  display: flex;\n  justify-content: flex-end;\n}\n.edit-row__edit-container {\n  width: fit-content;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n}\n\n.edit-container__button {\n  margin-top: var(--spacer-1);\n  margin-bottom: var(--spacer-1);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);
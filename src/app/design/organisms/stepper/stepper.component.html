<div
  class="stepper__body"
  [class.stepper__body--animate-slide-in]="animationState() === 'ENTER'"
  [class.stepper__body--animate-slide-out]="animationState() === 'EXIT'"
  [class.stepper__body--animate-forward]="animationDirection() === 'FORWARD'"
  [class.stepper__body--animate-backward]="animationDirection() === 'BACKWARD'"
  [id]="contentId"
  #stepContentContainer
  (animationend)="animationEnd$.next(toNextAnimationState(animationState()))"
>
  <ng-container [ngTemplateOutlet]="selected ? selected.content : null" />
</div>

<footer class="stepper__footer">
  <button
    btn
    [kind]="'NONE'"
    [icon]="'arrow-left'"
    [disabled]="selectedIndex === 0"
    aria-label="Show prior step"
    [attr.aria-controls]="contentId"
    class="stepper__nav-button"
    cdkStepperPrevious
    #priorButton
    (window:keydown.ArrowUp)="selectPriorStep()"
    (window:keydown.ArrowLeft)="selectPriorStep()"
    (click)="selectPriorStep()"
  ></button>
  @for (step of steps; track step) {
    <span
      class="stepper__marker"
      [class.stepper__marker--active]="selectedIndex === $index"
    >
      ●
    </span>
  }
  @let lastStepIndex = steps.length - 1;
  <button
    btn
    [kind]="'NONE'"
    [icon]="'arrow-right'"
    [disabled]="selectedIndex === lastStepIndex"
    aria-label="Show next step"
    [attr.aria-controls]="contentId"
    class="stepper__nav-button"
    cdkStepperNext
    #nextButton
    (window:keydown.ArrowDown)="selectNextStep()"
    (window:keydown.ArrowRight)="selectNextStep()"
    (click)="selectNextStep()"
  ></button>
</footer>

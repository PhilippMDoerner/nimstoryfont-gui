"use strict";(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[9399],{"./src/app/design/molecules/compare-form/compare-form.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _angular_common__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@angular/common/fesm2020/common.mjs"),_angular_forms__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@angular/forms/fesm2020/forms.mjs"),_angular_platform_browser__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@angular/platform-browser/fesm2020/platform-browser.mjs"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@ng-bootstrap/ng-bootstrap/fesm2020/ng-bootstrap.mjs"),_ngx_formly_bootstrap__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@ngx-formly/bootstrap/fesm2020/ngx-formly-bootstrap.mjs"),_ngx_formly_core__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@ngx-formly/core/fesm2020/ngx-formly-core.mjs"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),_storybook_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),_tinymce_tinymce_angular__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@tinymce/tinymce-angular/fesm2020/tinymce-tinymce-angular.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/app/_services/formly/validators.ts"),_atoms__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/tinymce/tinymce.js"),__webpack_require__("./src/app/design/atoms/index.ts")),_organisms__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/app/design/organisms/index.ts"),_form_form_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/app/design/molecules/form/form.component.ts"),_formly_file_field_formly_file_field_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/app/design/molecules/formly-file-field/formly-file-field.component.ts"),_compare_form_component__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/app/design/molecules/compare-form/compare-form.component.ts");const dummyForm=[{key:"text",type:"text-editor",props:{label:"SomeText"}},{key:"file",type:"file",props:{label:"SomeFile"}},{key:"username",type:"select-disable",props:{label:"User",labelProp:"username",valueProp:"username",options:(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)([{username:"john_doe",password:"password123",email:"john_doe@example.com",is_active:!0},{username:"jane_doe",password:"jane_password",email:"jane_doe@example.com",is_active:!0,groups:[1,2]},{username:"admin",password:"admin_password",email:"admin@example.com",is_active:!0,is_staff:!0,is_superuser:!0},{username:"bob_smith",password:"bob_password",email:"bob_smith@example.com",is_active:!1},{username:"sara_smith",password:"sara_password",email:"sara_smith@example.com",is_active:!0,api_permissions:["read","write"]},{username:"jim_brown",password:"jim_password",email:"jim_brown@example.com",is_active:!0,group_details:[{name:"Group A",pk:1},{name:"Group B",pk:2}]},{username:"lisa_green",password:"lisa_password",email:"lisa_green@example.com",is_active:!0,pk:123},{username:"jessica_jones",password:"jessica_password",email:"jessica_jones@example.com",is_active:!1,groups:[2,3]},{username:"peter_parker",password:"spidey_password",email:"peter_parker@example.com",is_active:!0},{username:"mary_jane",password:"mary_password",email:"mary_jane@example.com",is_active:!0,is_staff:!0},{username:"clark_kent",password:"superman_password",email:"clark_kent@example.com",is_active:!0,is_superuser:!0},{username:"bruce_wayne",password:"batman_password",email:"bruce_wayne@example.com",is_active:!1,group_details:[{name:"Justice League",pk:10}]},{username:"diana_prince",password:"wonder_woman_password",email:"diana_prince@example.com",is_active:!0,api_permissions:["read"]},{username:"thor_odinson",password:"hammer_password",email:"thor_odinson@example.com",is_active:!0,groups:[5]},{username:"steve_rogers",password:"cap_password",email:"steve_rogers@example.com",is_active:!1},{username:"tony_stark",password:"ironman_password",email:"tony_stark@example.com",is_active:!0},{username:"natasha_romanoff",password:"black_widow_password",email:"natasha_romanoff@example.com",is_active:!0,groups:[4]},{username:"vision",password:"mindstone_password",email:"vision@example.com",is_active:!0},{username:"wanda_maximoff",password:"scarlet_witch_password",email:"wanda_maximoff@example.com",is_active:!0,group_details:[{name:"Avengers",pk:11}]},{username:"sam_wilson",password:"falcon_password",email:"sam_wilson@example.com",is_active:!1},{username:"bucky_barnes",password:"winter_soldier_password",email:"bucky_barnes@example.com",is_active:!0},{username:"stephen_strange",password:"dr_strange_password",email:"stephen_strange@example.com",is_active:!0},{username:"pietro_maximoff",password:"quicksilver_password",email:"pietro_maximoff@example.com",is_active:!1},{username:"groot",email:"groot@example.com",is_active:!0},{username:"rocket",password:"rocket_password",email:"rocket@example.com",is_active:!0},{username:"drax",password:"drax_password",email:"drax@example.com",is_active:!0,groups:[5]},{username:"gamora",password:"gamora_password",email:"gamora@example.com",is_active:!1},{username:"nebula",password:"nebula_password",email:"nebula@example.com",is_active:!0},{username:"mantis",email:"mantis@example.com",is_active:!0},{username:"okoye",password:"okoye_password",email:"okoye@example.com",is_active:!0,group_details:[{name:"Dora Milaje",pk:12}]},{username:"shuri",email:"shuri@example.com",is_active:!1},{username:"nakia",password:"nakia_password",email:"nakia@example.com",is_active:!0},{username:"ramonda",email:"ramonda@example.com",is_active:!0},{username:"mbaku",password:"mbaku_password",email:"mbaku@example.com",is_active:!0,groups:[4]},{username:"erik_killmonger",password:"killmonger_password",email:"erik_killmonger@example.com",is_active:!1},{username:"hank_pym",password:"antman_password",email:"hank_pym@example.com",is_active:!0,group_details:[{name:"Ant-Man and the Wasp",pk:13}]}]),disabledExpression:selectOption=>isInGroup(selectOption,"group a"),tooltipMessage:"Members typically represent the individual player characters + the GM(s)",warningMessage:"The user you selected is already member of this campaign"}},{key:"date",type:"datepicker",props:{label:"SomeDate"}}],isInGroup=(selectOption,groupName)=>{const groupsOfUser=selectOption.group_details;if(!(null!=groupsOfUser))return!1;return groupsOfUser.some((group=>group.name.toLowerCase()===groupName))},__WEBPACK_DEFAULT_EXPORT__={title:"DesignSystem/Molecules/CompareFormComponent",component:_compare_form_component__WEBPACK_IMPORTED_MODULE_8__.L,decorators:[(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_1__.moduleMetadata)({declarations:[_form_form_component__WEBPACK_IMPORTED_MODULE_6__.U,_formly_file_field_formly_file_field_component__WEBPACK_IMPORTED_MODULE_7__.n,_organisms__WEBPACK_IMPORTED_MODULE_5__.nC,_organisms__WEBPACK_IMPORTED_MODULE_5__.mh,_organisms__WEBPACK_IMPORTED_MODULE_5__.N],imports:[_atoms__WEBPACK_IMPORTED_MODULE_4__.cg,_angular_platform_browser__WEBPACK_IMPORTED_MODULE_10__.BrowserModule,_angular_common__WEBPACK_IMPORTED_MODULE_11__.CommonModule,_angular_forms__WEBPACK_IMPORTED_MODULE_12__.UX,_angular_forms__WEBPACK_IMPORTED_MODULE_12__.u5,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_13__.IJ,_tinymce_tinymce_angular__WEBPACK_IMPORTED_MODULE_14__.Z_,_ngx_formly_core__WEBPACK_IMPORTED_MODULE_15__.X0.forRoot({types:[{name:"file",component:_formly_file_field_formly_file_field_component__WEBPACK_IMPORTED_MODULE_7__.n,wrappers:["form-field"]},{name:"text-editor",component:_organisms__WEBPACK_IMPORTED_MODULE_5__.nC},{name:"select-disable",component:_organisms__WEBPACK_IMPORTED_MODULE_5__.mh},{name:"datepicker",component:_organisms__WEBPACK_IMPORTED_MODULE_5__.N}],validationMessages:[src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.UP,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.Bw,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.ol,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.Be,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.ud,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.l$,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.Ds,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.Bo,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.eS],validators:[src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.YM,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.np,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.sm,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.K7,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.U3,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.x5,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.cc,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__._7,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.Kg]}),_ngx_formly_bootstrap__WEBPACK_IMPORTED_MODULE_16__.z]})],args:{enctype:"application/x-www-form-urlencoded",fields:dummyForm,modelFromServer:{text:"Some prefill text",date:"2023-04-14",username:"admin",file:"C:\\fakepath\\some\\file.jpg"},modelFromUser:{text:"Other prefill text",date:"2023-04-03",username:"groot",file:"C:\\fakepath\\other\\file.jpg"},displayVertically:!1}},Default=(args=>({props:{...args,formlySubmit:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.aD)("formlySubmit"),formlyCancel:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.aD)("formlyCancel")}})).bind({});Default.args={}},"./src/app/_services/formly/validators.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Be:()=>requiredIconMessage,Bo:()=>fieldsDontMatchMessage,Bw:()=>requiredMessage,Ds:()=>hasSpecialCharactersMessage,K7:()=>requiredIconValidator,Kg:()=>sessionAuthorUniqueValidator,U3:()=>iconValidator,UP:()=>invalidTimeMessage,YM:()=>timeValidator,_7:()=>fieldMatchValidator,cc:()=>specialCharacterValidator,eS:()=>sessionAlreadyHasAuthor,l$:()=>notIntegerMessage,np:()=>requiredValidator,ol:()=>dateMessage,sm:()=>dateValidator,ud:()=>faPrefixMessage,x5:()=>integerValidator});var _home_runner_work_nimstoryfont_gui_nimstoryfont_gui_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");const invalidTimeMessage={name:"time",message:"Time must have 'hh:mm:ss' pattern"},requiredMessage={name:"required",message:"This field is required!"},dateMessage={name:"date",message:"This date does not follow the pattern: 'YYYY-MM-DD'. Sorry to be such a Nazi about it. The computer is forcing me."},requiredIconMessage={name:"requiredIcon",message:"This field requires a fontawesome icon as input. Here is a list of them: https://fontawesome.com/v4.7.0/icons/"},faPrefixMessage={name:"faPrefix",message:"Icons are stored without the 'fa-' from font-awesome prefix"},notIntegerMessage={name:"notInteger",message:"Your input is not an integer. This field requires an integer number. No amount of revolution can overcome this."},hasSpecialCharactersMessage={name:"hasSpecialCharacters",message:'Your input includes one of the following invalid special characters: [ ] ( ) ? | \\ " % ~ # < > :. If you need to rebel, please dont against this.'},fieldsDontMatchMessage={name:"fieldMatch",message:"Password Not Matching"},sessionAlreadyHasAuthor={name:"isInvalidSessionAuthorPair",message:"\n    The author you selected already has a diaryentry in the session you selected. You \n    can't have 2 diaryentries from the same author in the same session. Consider writing \n    your diaryentry as an encounter instead into the diaryentry at the spot you just considered."};const timeValidator={name:"time",validation:function timeValidation(control){const isValidTime=/\d\d.[0-5]\d.[0-5]\d/.test(control.value);return isValidTime?null:{time:!isValidTime}}};function requiredValidation(control){return!!control.value||0===control.value?null:{required:!0}}const requiredValidator={name:"required",validation:requiredValidation},requiredIconValidator={name:"requiredIcon",validation:requiredValidation};const dateValidator={name:"date",validation:function dateValidation(control){return/[1-2]\d{3}-(0\d|1[0-2])-[0-3]\d/.test(control.value)?null:{date:!0}}};const iconValidator={name:"faPrefix",validation:function iconValidation(control){const hasFaPrefix=/fa-/.test(control.value);return hasFaPrefix?null:{faPrefix:hasFaPrefix}}};const integerValidator={name:"notInteger",validation:function isIntegerValidation(control){const isInteger="number"==typeof control.value&&Number.isInteger(control.value);return isInteger?null:{notInteger:!isInteger}}};const specialCharacterValidator={name:"hasSpecialCharacters",validation:function hasNoSpecialCharactersValidation(control){if("string"==typeof control.value){const specialCharacters=["[","]","(",")","|","\\",'"',"%","~","#","<",">","?","/",":"];for(const specialCharacter of specialCharacters)if(control.value.includes(specialCharacter))return{hasSpecialCharacters:!0}}return null}};const fieldMatchValidator={name:"fieldMatch",validation:function passwordMatchValidation(control){const{password,passwordConfirm}=control.value;return passwordConfirm&&password?passwordConfirm===password?{passwordMatch:!0}:null:{passwordMatch:!0}}};function _isSessionAuthorPairUniqueValidator(){return(_isSessionAuthorPairUniqueValidator=(0,_home_runner_work_nimstoryfont_gui_nimstoryfont_gui_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)((function*(control){const{session:selectedSessionId,author:selectedAuthorId}=control.value,selectFieldOptionsObs=control.controls.session._fields[0].templateOptions.options,selectedOption=(yield selectFieldOptionsObs.toPromise()).find((option=>option.pk===selectedSessionId));if(null==selectedOption)throw"WeirdError. You selected a session, its id got into the model and somehow that field is no longer among the options (?)";const selectedAuthorAlreadyHasDiaryentryOnSession=selectedOption.author_ids.includes(selectedAuthorId),isInitialValue=control.pristine;return selectedAuthorAlreadyHasDiaryentryOnSession&&!isInitialValue?{passwordMatch:{message:"That account already has a diaryentry written for that session. Accounts can only have one Diaryentry per session"}}:{passwordMatch:null}}))).apply(this,arguments)}const sessionAuthorUniqueValidator={name:"sessionAuthorPairUnique",validation:function isSessionAuthorPairUniqueValidator(_x){return _isSessionAuthorPairUniqueValidator.apply(this,arguments)}}},"./node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aD:()=>chunk_KKE3V3AL.aD});var chunk_KKE3V3AL=__webpack_require__("./node_modules/@storybook/addon-actions/dist/chunk-KKE3V3AL.mjs");__webpack_require__("./node_modules/@storybook/addon-actions/dist/chunk-VWCVBQ22.mjs")}}]);
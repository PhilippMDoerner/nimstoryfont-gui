(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[1917],{"./src/app/_services/formly/formly-service.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>FormlyService});var tslib__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),src_design_organisms_formly_select_disable_formly_select_disable_field_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/design/organisms/formly-select-disable/formly-select-disable-field.component.ts"),src_utils_array__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/utils/array.ts"),src_utils_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/string.ts");let FormlyService=class FormlyService{buildOverviewSelectConfig(config){const options$=config.required??!0?config.options$:this.addEmptyOption(config.options$,config),sortedOptions$=this.sortOptions(options$,config),validators=this.getValidators(config);return{key:config.key,type:"select",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),labelProp:config.labelProp,valueProp:config.valueProp??"pk",options:sortedOptions$,required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildDisableSelectConfig(config){const options$=config.required??!0?config.options$:this.addEmptyOption(config.options$,config),sortedOptions$=this.sortOptions(options$,config),validators=this.getValidators(config);return{key:config.key,type:"select-disable",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),labelProp:config.labelProp,valueProp:config.valueProp??"pk",options:sortedOptions$,required:config.required??!0,warningMessage:config.warningMessage,additionalProperties:{disabledExpression:config.disabledExpression,tooltipMessage:config.tooltipMessage??"WHAT",showWrapperLabel:config.showWrapperLabel??!0}},validators:{validation:validators}}}buildStaticSelectConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"select",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),options:config.options,required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildStaticStringSelectConfig(partialConfig){let options=partialConfig.options.map((str=>({label:str,value:str})));const config={...partialConfig,options};return this.buildStaticSelectConfig(config)}buildInputConfig(config){const validators=this.getValidators(config);switch(config.inputKind){case"NUMBER":validators.push("notInteger");break;case"NAME":validators.push("hasSpecialCharacters");break;case"NUMBER_FRACTION":validators.push("notNumber")}let innerInputType;if("NUMBER"===config.inputKind)innerInputType="number";else innerInputType="string";return{key:config.key,type:"input",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,parsers:config.parsers,props:{maxLength:config.maxLength,minLength:config.minLength,label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),type:innerInputType,required:config.required??!0,disabled:!!config.disabled,placeholder:config.placeholder??void 0},validators:{validation:validators}}}buildSinglePasswordConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"input",className:config.className,fieldGroupClassName:config.fieldGroupClassName,templateOptions:{label:config.label??"Password",type:"password",required:!0,placeholder:"Your password",disabled:config.disabled},validators:{validation:validators}}}buildConfirmedPasswordConfig(config){const validators=config.validators??[];validators.push("required");return{validators:{validation:[{name:"fieldMatch",options:{errorPath:"passwordConfirm"}}]},fieldGroup:[{key:"password",type:"input",className:config.className,templateOptions:{label:config.label??"Password",type:"password",required:!0,placeholder:"Password, at least 7 characters",disabled:config.disabled},validators:{validation:validators}},{key:"passwordConfirm",type:"input",className:config.className,templateOptions:{label:config.label?"Confirm "+config.label:"Password Confirmation",type:"password",required:!0,placeholder:"Please re-enter your password",disabled:config.disabled}}]}}buildCheckboxConfig(config){return{key:config.key,type:"checkbox",className:config.className,wrappers:config.wrappers,defaultValue:config.defaultValue,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled}}}buildDatepickerConfig(config){const validators=this.getValidators(config);return validators.push("date"),{key:config.key,type:"datepicker",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildFileFieldConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"file",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{buttonType:config.fileButtonType??"SECONDARY",fileFieldKind:config.fileFieldKind??"IMAGE",label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:!!config.disabled},validators:{validation:validators}}}buildEditorConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"text-editor",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildAutocompleteConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"autocomplete",className:config.className,wrappers:[...config.wrappers??[],"form-field"],props:{label:config.label??(0,src_utils_string__WEBPACK_IMPORTED_MODULE_1__.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled,additionalProperties:{optionLabelProp:config.optionLabelProp,optionValueProp:config.optionValueProp,optionKeyProp:config.optionKeyProp,loadOptions:config.loadOptions,initialValue$:config.initialValue$}},validators:{validation:validators}}}toUpdateForm(fields){return fields.filter((field=>!("file"===field.type)))}getValidators(config){const validators=config.validators??[];return config.required&&validators.push("required"),validators}addEmptyOption(list,config){return Array.isArray(list)?(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.of)([this.createEmptyOption(config),...list]):list.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.T)((values=>[this.createEmptyOption(config),...values])))}createEmptyOption(config){const emptyOption={};emptyOption[config.labelProp]=src_design_organisms_formly_select_disable_formly_select_disable_field_component__WEBPACK_IMPORTED_MODULE_0__.D.EMPTY_OPTION_LABEL;return emptyOption[config.valueProp??config.key]=src_design_organisms_formly_select_disable_formly_select_disable_field_component__WEBPACK_IMPORTED_MODULE_0__.D.EMPTY_OPTION_VALUE,emptyOption}sortOptions(list$,config){const{sortProp,sortDirection}=config;return sortProp?list$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.T)((list=>(0,src_utils_array__WEBPACK_IMPORTED_MODULE_4__.Z)(list,sortProp,sortDirection??"asc")))):list$}};FormlyService=(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.Injectable)({providedIn:"root"})],FormlyService)},"./src/design/animations/slideDown.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{V4:()=>slideOutFromBottom,sb:()=>slideUpFromBottom,st:()=>slideRight});var _angular_animations__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/animations/fesm2022/animations.mjs");const inactiveStyle=(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.iF)({opacity:.2,transform:"translateY(50%)"}),activeStyle=(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.iF)({opacity:1,transform:"translateY(0%)"}),slideUpFromBottom=((0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.hZ)("slideFromBottom",[(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.kY)(":enter",[inactiveStyle,(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.i0)("500ms ease-out",activeStyle)]),(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.kY)(":leave",[activeStyle,(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.i0)("500ms ease-in",inactiveStyle)])]),(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.hZ)("slideUpFromBottom",[(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.kY)(":enter",[inactiveStyle,(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.i0)("500ms ease-out",activeStyle)])])),slideOutFromBottom=(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.hZ)("slideOutFromBottom",[(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.kY)(":leave",[activeStyle,(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.i0)("500ms ease-in",inactiveStyle)])]),inactiveSlideRightStyle=(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.iF)({transform:"translateX(100%)"}),activeSlideRightStyle=(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.iF)({transform:"translateX(0%)"}),slideRight=(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.hZ)("slideRight",[(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.kY)(":enter",[inactiveSlideRightStyle,(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.i0)("250ms ease-in-out",activeSlideRightStyle)]),(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.kY)(":leave",[activeSlideRightStyle,(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.i0)("250ms ease-in-out",inactiveSlideRightStyle)])])},"./src/design/atoms/arrow-button/arrow-button.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>ArrowButtonComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var arrow_button_componentngResource=__webpack_require__("./src/design/atoms/arrow-button/arrow-button.component.scss?ngResource"),arrow_button_componentngResource_default=__webpack_require__.n(arrow_button_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),button_component=__webpack_require__("./src/design/atoms/button/button.component.ts"),icon_component=__webpack_require__("./src/design/atoms/icon/icon.component.ts");let ArrowButtonComponent=class ArrowButtonComponent{constructor(){this.icon=core.input.required(),this.kind=(0,core.input)("SECONDARY"),this.outline=(0,core.input)(!1),this.disabled=(0,core.input)(!1),this.iconName=(0,core.computed)((()=>`arrow-${this.icon()}-long`))}static{this.propDecorators={icon:[{type:core.Input,args:[{isSignal:!0,alias:"icon",required:!0,transform:void 0}]}],kind:[{type:core.Input,args:[{isSignal:!0,alias:"kind",required:!1,transform:void 0}]}],outline:[{type:core.Input,args:[{isSignal:!0,alias:"outline",required:!1,transform:void 0}]}],disabled:[{type:core.Input,args:[{isSignal:!0,alias:"disabled",required:!1,transform:void 0}]}]}}};ArrowButtonComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-arrow-button",template:'<button btn [kind]="kind()" [icon]="iconName()"></button>\n',standalone:!0,imports:[icon_component.R,button_component.Q],changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[arrow_button_componentngResource_default()]})],ArrowButtonComponent)},"./src/design/atoms/card/card.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>CardComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var card_componentngResource=__webpack_require__("./src/design/atoms/card/card.component.scss?ngResource"),card_componentngResource_default=__webpack_require__.n(card_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let CardComponent=class CardComponent{};CardComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-card",template:'<div class="card">\n  <ng-content></ng-content>\n</div>',changeDetection:core.ChangeDetectionStrategy.OnPush,standalone:!0,imports:[],styles:[card_componentngResource_default()]})],CardComponent)},"./src/design/atoms/html-text/html-text.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>HtmlTextComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var html_text_componentngResource=__webpack_require__("./src/design/atoms/html-text/html-text.component.scss?ngResource"),html_text_componentngResource_default=__webpack_require__.n(html_text_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let HtmlTextComponent=class HtmlTextComponent{constructor(){this.text=core.input.required()}static{this.propDecorators={text:[{type:core.Input,args:[{isSignal:!0,alias:"text",required:!0,transform:void 0}]}]}}};HtmlTextComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-html-text",template:'<div [innerHTML]="text()"></div>\n',standalone:!0,changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[html_text_componentngResource_default()]})],HtmlTextComponent)},"./src/design/organisms/diaryentry-encounters/diaryentry-encounters.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{j:()=>DiaryentryEncountersComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var diaryentry_encounters_componentngResource=__webpack_require__("./src/design/organisms/diaryentry-encounters/diaryentry-encounters.component.scss?ngResource"),diaryentry_encounters_componentngResource_default=__webpack_require__.n(diaryentry_encounters_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");const ORDER_INDEX_INCREMENT=10;function hasShiftedOrderIndex(encounter){return encounter.order_index%ORDER_INDEX_INCREMENT>0}function getUnshiftedOrderIndex(encounter){return Math.floor(encounter.order_index/ORDER_INDEX_INCREMENT)*ORDER_INDEX_INCREMENT}function nextOrderIndex(encounter){return getUnshiftedOrderIndex(encounter)+ORDER_INDEX_INCREMENT}var rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),ngrx_signals=__webpack_require__("./node_modules/@ngrx/signals/fesm2022/ngrx-signals.mjs"),shareReplay=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js"),take=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/take.js"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),clipboard=__webpack_require__("./src/utils/clipboard.ts");function httpErrorToast(err){if(!("number"===err.status?.constructor?.name.toLowerCase()))throw err;const buttons=500===err.status?[{label:"Copy to Clipboard",icon:"clipboard",onClick:()=>(0,clipboard.l)(err.error)}]:[];return{type:"DANGER",body:{text:`\n        <strong> Please copy the error and send it to the developer: </strong>  <br>\n        ${error=err,JSON.stringify(error.error)}\n      `,buttons},header:{text:getErrorHeading(err)}};var error}function getErrorHeading(error){switch(error.status){case 0:case 504:return"This can't be done without an internet connection";case 200:return"The target URL for the requested action does not seem to exist";case 500:return"The server exploded somehow!";default:return"An error occurred"}}var http=__webpack_require__("./node_modules/@angular/common/fesm2022/http.mjs"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),base_service=__webpack_require__("./src/app/_services/base.service.ts"),routing_service=__webpack_require__("./src/app/_services/routing.service.ts");let CharacterService=class CharacterService extends base_service.d{constructor(routingService,http){super(http,"character"),this.routingService=routingService}getPlayerCharacters(campaign){const url=`${this.baseUrl}/${campaign}/playercharacters/`;return this.http.get(url).pipe((0,map.T)((entries=>entries.map((entry=>this.parseOverviewEntity(entry))))))}getNonPlayerCharacters(campaign){const url=`${this.baseUrl}/${campaign}/nonplayercharacters/`;return this.http.get(url).pipe((0,map.T)((entries=>entries.map((entry=>this.parseOverviewEntity(entry))))))}parseEntity(data){return{...data,getAbsoluteRouterUrl:this.generateUrlCallback(data)}}parseOverviewEntity(data){return{...data,getAbsoluteRouterUrl:this.generateUrlCallback(data)}}generateUrlCallback(data){const campaignName=data.campaign_details.name,characterName=data.name;return()=>this.routingService.getRoutePath("character",{name:characterName,campaign:campaignName})}static{this.ctorParameters=()=>[{type:routing_service.O},{type:http.Qq}]}};CharacterService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],CharacterService);let DiaryentryService=class DiaryentryService extends base_service.d{constructor(routingService,http){super(http,"diaryentry"),this.routingService=routingService}readByParam(campaign,params){const authorName=params.name,url=`${this.baseUrl}/${campaign}/${params.sessionNumber}/${params.isMainSession}/${authorName}/`;return this.http.get(url).pipe((0,map.T)((diaryEntry=>this.parseDiaryEntry(diaryEntry))))}parseDiaryEntry(entry){return{...entry,author:entry?.author_details?.pk,session:entry?.session_details?.pk}}parseEntity(data){return{...data,author:data?.author_details?.pk,session:data?.session_details?.pk,getAbsoluteRouterUrl:this.generateUrlCallback(data)}}parseOverviewEntity(data){return{...data,getAbsoluteRouterUrl:this.generateUrlCallback(data)}}generateUrlCallback(data){const campaignName=data.campaign_details.name,sessionNumber=data.session_details.session_number,isMainSession=data.session_details.is_main_session_int,authorName=data.author_details.name;return()=>this.routingService.getRoutePath("diaryentry",{sessionNumber,isMainSession,authorName,campaign:campaignName})}static{this.ctorParameters=()=>[{type:routing_service.O},{type:http.Qq}]}};DiaryentryService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],DiaryentryService);let EncounterConnectionService=class EncounterConnectionService extends base_service.d{constructor(http){super(http,"encounterconnection")}create(data){return super.create({...data,character:`${data.character}`})}parseEntity(data){return data}parseOverviewEntity(data){throw"CharacterPlayerClassConnection does not have an overview endpoint"}static{this.ctorParameters=()=>[{type:http.Qq}]}};EncounterConnectionService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],EncounterConnectionService);let EncounterService=class EncounterService extends base_service.d{constructor(routingService,http){super(http,"encounter"),this.routingService=routingService}getDiaryEntryEncounters(session_pk,authorName){const url=`${this.baseUrl}/session/${session_pk}/${authorName}`;return this.http.get(url).pipe((0,map.T)((entries=>entries.map((entry=>this.parseEntity(entry))))))}createForDiaryentry(encounter){const url=`${this.baseUrl}/`;return this.http.post(url,encounter).pipe((0,map.T)((entries=>entries.map((entry=>this.parseEntity(entry))))))}swapEncounterOrder(campaign,encounter1_pk,encounter2_pk){const url=`${this.baseUrl}/${campaign}/orderswap/`,requestBody={encounter1:encounter1_pk,encounter2:encounter2_pk};return this.http.patch(url,requestBody).pipe((0,map.T)((entries=>entries.map((entry=>this.parseEntity(entry))))))}cutInsertEncounter(campaign,encounter,newOrderIndex){const url=`${this.baseUrl}/${campaign}/cutinsert/`,requestBody={encounter:encounter.pk,old_order_index:encounter.order_index,new_order_index:newOrderIndex};return this.http.patch(url,requestBody).pipe((0,map.T)((entries=>entries.map((entry=>this.parseEntity(entry))))))}parseEntity(data){return{...data,pk:data.id??data.pk,getAbsoluteRouterUrl:this.generateUrlCallback(data)}}parseOverviewEntity(data){return{...data,getAbsoluteRouterUrl:this.generateUrlCallback(data)}}generateUrlCallback(data){const campaignName=data.campaign_details?.name,sessionNumber=data.diaryentry_details?.session_number,isMainSession=data.diaryentry_details?.is_main_session,authorName=data.diaryentry_details?.author_name,encounterTitle=data.title;return campaignName&&sessionNumber&&isMainSession&&authorName&&encounterTitle?()=>this.routingService.getRoutePath("diaryentry-encounter",{sessionNumber,isMainSession,authorName,campaign:campaignName,encounterTitle}):()=>""}static{this.ctorParameters=()=>[{type:routing_service.O},{type:http.Qq}]}};EncounterService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],EncounterService);let LocationService=class LocationService extends base_service.d{constructor(routingService,http){super(http,"location"),this.routingService=routingService}readByParam(campaign,params){const locationName=params.name,url=`${this.baseUrl}/${campaign}/${params.parentLocationName}/${locationName}/`;return this.http.get(url).pipe((0,map.T)((data=>this.parseEntity(data))))}parseEntity(data){return{...data,getAbsoluteRouterUrl:this.generateUrlCallback(data),getAbsoluteRouterUrlForParentLocation:this.generateParentLocationUrlCallback(data)}}parseOverviewEntity(data){return{...data,getAbsoluteRouterUrl:this.generateUrlCallback(data)}}generateUrlCallback(data){const campaignName=data.campaign_details.name,locationName=data.name,parentLocationName=data.parent_location_details.name??"NONE";return()=>this.routingService.getRoutePath("location",{name:locationName,parent_name:parentLocationName,campaign:campaignName})}generateParentLocationUrlCallback(data){if(!(null!=data.parent_location_details))return null;const campaignName=data.campaign_details.name,parentLocationName=data.parent_location_details.name,grandParentLocationName=data.parent_location_details.parent_location??"NONE";return()=>this.routingService.getRoutePath("location",{name:parentLocationName,parent_name:grandParentLocationName,campaign:campaignName})}static{this.ctorParameters=()=>[{type:routing_service.O},{type:http.Qq}]}};LocationService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],LocationService);var global_store=__webpack_require__("./src/app/global.store.ts"),toast_overlay_component=__webpack_require__("./src/design/organisms/toast-overlay/toast-overlay.component.ts"),array=__webpack_require__("./src/utils/array.ts"),logging=__webpack_require__("./src/utils/logging.ts"),rxjs_operators=__webpack_require__("./src/utils/rxjs-operators.ts"),ngrx_operators=__webpack_require__("./node_modules/@ngrx/operators/fesm2022/ngrx-operators.mjs"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),noop=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/noop.js"),isObservable=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/isObservable.js");function rxMethod(generator,config){config?.injector||(0,core.assertInInjectionContext)(rxMethod);const sourceInjector=config?.injector??(0,core.inject)(core.Injector),source$=new Subject.B,sourceSub=generator(source$).subscribe();sourceInjector.get(core.DestroyRef).onDestroy((()=>sourceSub.unsubscribe()));const rxMethodFn=(input,config)=>{if(function isStatic(value){return!(0,core.isSignal)(value)&&!(0,isObservable.A)(value)}(input))return source$.next(input),{unsubscribe:noop.l};const instanceInjector=config?.injector??function getCallerInjector(){try{return(0,core.inject)(core.Injector)}catch{return null}}()??sourceInjector;if((0,core.isSignal)(input)){const watcher=(0,core.effect)((()=>{const value=input();(0,core.untracked)((()=>source$.next(value)))}),{injector:instanceInjector}),instanceSub={unsubscribe:()=>watcher.destroy()};return sourceSub.add(instanceSub),instanceSub}const instanceSub=input.subscribe((value=>source$.next(value)));return sourceSub.add(instanceSub),instanceInjector!==sourceInjector&&instanceInjector.get(core.DestroyRef).onDestroy((()=>instanceSub.unsubscribe())),instanceSub};return rxMethodFn.unsubscribe=sourceSub.unsubscribe.bind(sourceSub),rxMethodFn}var pipe=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/pipe.js"),tap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/tap.js"),string=__webpack_require__("./src/utils/string.ts");function getKeys(name){return{name,dataField:(0,string.YF)(name),errorField:`${(0,string.YF)(name)}Error`,queryStateField:`${(0,string.YF)(name)}QueryState`,loadMethod:`load${(0,string.ZH)(name)}`}}const initialState={diaryEntryDeleteState:"init",encounterServerModel:void 0,_encountersInUpdateStateIds:new Set,_encountersBeingCreated:[],isUpdatingGlobally:!1},DiaryentryPageStore=(0,ngrx_signals.Eu)({providedIn:"root"},(0,ngrx_signals.Q2)(initialState),function withQueries(queriesFactory){return store=>{const queries=queriesFactory({...store.stateSignals,...store.computedSignals,...store.methods}),storeWithState=function withQueriesState(queries){return(0,ngrx_signals.Mj)((0,ngrx_signals.Q2)((()=>Object.keys(queries).map((queryName=>getKeys(queryName))).map((keys=>({[keys.dataField]:void 0,[keys.errorField]:void 0,[keys.queryStateField]:"init"}))).reduce(((acc,RequestState)=>({...acc,...RequestState})),{}))))}(queries)(store);return function withQueryMethods(queries){return(0,ngrx_signals.Mj)((0,ngrx_signals.RI)((store=>Object.keys(queries).map((queryName=>getKeys(queryName))).map((keys=>({[keys.loadMethod]:rxMethod((0,pipe.F)((0,tap.M)((()=>(0,ngrx_signals.M8)(store,{[keys.queryStateField]:"loading",[keys.errorField]:void 0}))),(0,switchMap.n)((params=>queries[keys.name](params))),(0,ngrx_operators.Hn)({next:val=>(0,ngrx_signals.M8)(store,{[keys.dataField]:val,[keys.queryStateField]:"success"}),error:err=>{(0,ngrx_signals.M8)(store,{[keys.errorField]:err,[keys.queryStateField]:"error"})}})))}))).reduce(((acc,queryLoadFunction)=>({...acc,...queryLoadFunction})),{}))))}(queries)(storeWithState)}}((()=>{const diaryentryService=(0,core.inject)(DiaryentryService),characterService=(0,core.inject)(CharacterService),locationService=(0,core.inject)(LocationService),globalStore=(0,core.inject)(global_store.v),campaignName$=(0,rxjs_interop.br)(globalStore.campaignName).pipe((0,rxjs_operators.u5)(),(0,shareReplay.t)(1));return{diaryentry:params=>campaignName$.pipe((0,take.s)(1),(0,switchMap.n)((campaignName=>diaryentryService.readByParam(campaignName,params)))),campaignCharacters:()=>campaignName$.pipe((0,take.s)(1),(0,switchMap.n)((campaignName=>characterService.getNonPlayerCharacters(campaignName)))),campaignLocations:()=>campaignName$.pipe((0,take.s)(1),(0,switchMap.n)((campaignName=>locationService.campaignList(campaignName))))}})),(0,ngrx_signals.QO)((store=>({hasWritePermission:(0,core.inject)(global_store.v).hasRoleOrBetter("member"),diaryEntryEncounters:(0,core.computed)((()=>{const allEncounters=[...store.diaryentry()?.encounters??[],...store._encountersBeingCreated()];return(0,array.Z)(allEncounters,"order_index").map(((encounter,index)=>({encounter,isUpdating:store._encountersInUpdateStateIds().has(index)})))})),isUpdatingAnyEncounters:(0,core.computed)((()=>store._encountersInUpdateStateIds().size>0)),realEncounters:(0,core.computed)((()=>store.diaryentry()?.encounters??[]))}))),(0,ngrx_signals.RI)((store=>{const toastService=(0,core.inject)(toast_overlay_component.f),diaryentryService=(0,core.inject)(DiaryentryService),encounterConnectionService=(0,core.inject)(EncounterConnectionService),encounterService=(0,core.inject)(EncounterService),globalStore=(0,core.inject)(global_store.v),campaignName$=(0,rxjs_interop.br)(globalStore.campaignName).pipe((0,rxjs_operators.u5)(),(0,shareReplay.t)(1)),updateEncounterList=newEncounterList=>{const newDiaryEntry={...store.diaryentry(),encounters:newEncounterList};(0,ngrx_signals.M8)(store,{diaryentry:newDiaryEntry})},markAsBeingUpdated=encounterPk=>{const updatedIds=new Set(store._encountersInUpdateStateIds());updatedIds.add(encounterPk),(0,ngrx_signals.M8)(store,{_encountersInUpdateStateIds:updatedIds})},unmarkAsBeingUpdated=encounterPk=>{const updatedIds=new Set(store._encountersInUpdateStateIds());updatedIds.delete(encounterPk),(0,ngrx_signals.M8)(store,{_encountersInUpdateStateIds:updatedIds})};return{reset:()=>(0,ngrx_signals.M8)(store,{diaryentry:void 0,diaryentryError:void 0,diaryEntryDeleteState:"init",encounterServerModel:void 0,diaryentryQueryState:"init"}),addEmptyEncounterForCreation:encounter=>{(0,ngrx_signals.M8)(store,{_encountersBeingCreated:[...store._encountersBeingCreated(),encounter]})},removeEmptyEncounterForCreation:encounter=>{(0,ngrx_signals.M8)(store,{_encountersBeingCreated:store._encountersBeingCreated().filter((enc=>enc.order_index!==encounter.order_index))})},addEncounter:encounter=>{encounterService.createForDiaryentry(encounter).pipe((0,take.s)(1)).subscribe({next:newEncounterList=>{updateEncounterList(newEncounterList),(0,ngrx_signals.M8)(store,{_encountersBeingCreated:store._encountersBeingCreated().filter((enc=>enc.order_index!==encounter.order_index))})},error:err=>toastService.addToast(httpErrorToast(err))})},removeEncounter:encounter=>{markAsBeingUpdated(encounter.pk),encounterService.delete(encounter.pk).pipe((0,take.s)(1)).subscribe({next:()=>{unmarkAsBeingUpdated(encounter.pk);const newEncounterList=store.diaryentry()?.encounters?.filter((listEnc=>listEnc.pk!==encounter.pk))??[];updateEncounterList(newEncounterList)},error:err=>toastService.addToast(httpErrorToast(err))})},updateEncounter:encounter=>{markAsBeingUpdated(encounter.pk),encounterService.update(encounter.pk,encounter).pipe((0,take.s)(1)).subscribe({next:newEncounter=>{unmarkAsBeingUpdated(encounter.pk);const diaryentry=store.diaryentry(),newEncounterList=(0,array.U1)(diaryentry.encounters??[],newEncounter,"pk");updateEncounterList(newEncounterList)},error:err=>toastService.addToast(httpErrorToast(err))})},swapEncounters:(encounter1Pk,encounter2Pk)=>{markAsBeingUpdated(encounter1Pk),markAsBeingUpdated(encounter2Pk),(0,ngrx_signals.M8)(store,{isUpdatingGlobally:!0}),campaignName$.pipe((0,take.s)(1),(0,switchMap.n)((campaignName=>encounterService.swapEncounterOrder(campaignName,encounter1Pk,encounter2Pk)))).subscribe({next:([updatedEnc1,updatedEnc2])=>{unmarkAsBeingUpdated(encounter1Pk),unmarkAsBeingUpdated(encounter2Pk);const newEncounterList1=(0,array.U1)(store.realEncounters(),updatedEnc1,"pk"),newEncounterList2=(0,array.U1)(newEncounterList1,updatedEnc2,"pk");updateEncounterList(newEncounterList2),(0,ngrx_signals.M8)(store,{isUpdatingGlobally:!1})},error:err=>toastService.addToast(httpErrorToast(err))})},cutInsertEncounter:(encounter,newOrderIndex)=>{markAsBeingUpdated(encounter.pk),(0,ngrx_signals.M8)(store,{isUpdatingGlobally:!0}),campaignName$.pipe((0,take.s)(1),(0,switchMap.n)((campaignName=>encounterService.cutInsertEncounter(campaignName,encounter,newOrderIndex)))).subscribe({next:newEncounterList=>{unmarkAsBeingUpdated(encounter.pk),updateEncounterList(newEncounterList),(0,ngrx_signals.M8)(store,{isUpdatingGlobally:!1})},error:err=>toastService.addToast(httpErrorToast(err))})},addEncounterConnection:connection=>encounterConnectionService.create(connection).pipe((0,take.s)(1)).subscribe({next:newConnection=>{const diaryentry=store.diaryentry(),encounter=diaryentry.encounters.find((enc=>enc.pk===newConnection.encounter)),newEncounter={...encounter,encounterConnections:[...encounter.encounterConnections??[],newConnection]},newEncounterList=(0,array.U1)(diaryentry.encounters??[],newEncounter,"pk");updateEncounterList(newEncounterList)},error:err=>toastService.addToast(httpErrorToast(err))}),removeEncounterConnection:connection=>{encounterConnectionService.delete(connection.pk).pipe((0,take.s)(1)).subscribe((()=>{const diaryentry=store.diaryentry(),encounter=diaryentry.encounters.find((enc=>enc.pk===connection.encounter)),newEncounter={...encounter,encounterConnections:encounter.encounterConnections?.filter((con=>con.pk!==connection.pk))},newEncounterList=(0,array.U1)(diaryentry.encounters??[],newEncounter,"pk");updateEncounterList(newEncounterList)}))},deleteDiaryEntry:()=>{(0,ngrx_signals.M8)(store,{diaryEntryDeleteState:"loading"}),diaryentryService.delete(store.diaryentry()?.pk).pipe((0,take.s)(1)).subscribe({next:()=>(0,ngrx_signals.M8)(store,{diaryentry:void 0,diaryentryError:void 0,diaryEntryDeleteState:"success"}),error:err=>toastService.addToast(httpErrorToast(err))})}}})),(0,ngrx_signals.TK)((store=>({onInit:()=>{(0,logging.R)("DiaryEntryPageStore",store)}}))));var router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),slideDown=__webpack_require__("./src/design/animations/slideDown.ts"),arrow_button_component=__webpack_require__("./src/design/atoms/arrow-button/arrow-button.component.ts"),button_component=__webpack_require__("./src/design/atoms/button/button.component.ts"),card_component=__webpack_require__("./src/design/atoms/card/card.component.ts"),html_text_component=__webpack_require__("./src/design/atoms/html-text/html-text.component.ts"),spinner_component=__webpack_require__("./src/design/atoms/spinner/spinner.component.ts"),encounter_component=__webpack_require__("./src/design/organisms/encounter/encounter.component.ts");let DiaryentryEncountersComponent=class DiaryentryEncountersComponent{constructor(){this.store=(0,core.inject)(DiaryentryPageStore),this.route=(0,core.inject)(router.nX),this.diaryEntryPk=(0,core.computed)((()=>this.store.diaryentry()?.pk)),this.campaignCharacters=this.store.campaignCharacters,this.campaignLocations=this.store.campaignLocations,this.encounterServerModel=this.store.encounterServerModel,this.canUpdate=this.store.hasWritePermission,this.canDelete=this.store.hasWritePermission,this.canCreate=this.store.hasWritePermission,this.state=(0,core.input)("READ"),this.encounterElements=(0,core.viewChildren)("encounter"),this.connectionDelete=new core.EventEmitter,this.connectionCreate=new core.EventEmitter,this.encounterDelete=new core.EventEmitter,this.encounterUpdate=new core.EventEmitter,this.encounterCreate=new core.EventEmitter,this.encounterCutInsert=new core.EventEmitter,this.encounterSwap=new core.EventEmitter,this.addUnfinishedEncounter=(0,core.output)(),this.encountersToAdd=(0,core.signal)([]),this.isUpdatingGlobally=this.store.isUpdatingGlobally,this.isUpdatingAnything=this.store.isUpdatingAnyEncounters,this.cutEncounterIndex=(0,core.signal)(void 0),this.diaryEntryEncounters=this.store.diaryEntryEncounters;const encounterTitle=this.route.snapshot.params.encounterTitle;encounterTitle&&this.scrollToEncounter(encounterTitle)}addEmptyEncounterAtIndex(listIndex){const newOrderIndex=this.getOrderIndexForNewEncounter(listIndex),newEncounter={diaryentry:this.diaryEntryPk(),title:"New Encounter",order_index:newOrderIndex,description:""};this.store.addEmptyEncounterForCreation(newEncounter)}onInsertExcisedEncounter(insertionIndex){const cutEncounterIndex=this.cutEncounterIndex();if(null==cutEncounterIndex)return;if([cutEncounterIndex,cutEncounterIndex-1].includes(insertionIndex))return;let newOrderIndex;if(insertionIndex>this.diaryEntryEncounters().length){newOrderIndex=nextOrderIndex(this.diaryEntryEncounters()[this.diaryEntryEncounters().length-1].encounter)}else{newOrderIndex=this.diaryEntryEncounters()[insertionIndex].encounter.order_index}const encounterToInsert=this.diaryEntryEncounters()[cutEncounterIndex].encounter;this.store.cutInsertEncounter(encounterToInsert,newOrderIndex)}onExcisionClick(encounterIndex){const isAlreadyCuttingEncounter=null!=this.cutEncounterIndex(),isCuttingThisEncounter=this.cutEncounterIndex()===encounterIndex;isAlreadyCuttingEncounter&&isCuttingThisEncounter?this.cutEncounterIndex.set(void 0):isAlreadyCuttingEncounter||this.cutEncounterIndex.set(encounterIndex)}onEncounterOrderIncrease(encounterIndex){if(encounterIndex===this.diaryEntryEncounters().length-1)return;const encounter=this.diaryEntryEncounters()[encounterIndex].encounter,nextEncounter=this.nextRealEncounter(encounterIndex+1);nextEncounter&&this.store.swapEncounters(encounter.pk,nextEncounter.pk)}onEncounterOrderDecrease(encounterIndex){if(0===encounterIndex)return;const encounter=this.diaryEntryEncounters()[encounterIndex].encounter,priorEncounter=this.priorRealEncounter(encounterIndex-1);priorEncounter&&this.store.swapEncounters(encounter.pk,priorEncounter.pk)}onEncounterCreateCancel(encounterIndex){const createEncounterToRemove=this.diaryEntryEncounters()[encounterIndex].encounter;this.store.removeEmptyEncounterForCreation(createEncounterToRemove)}onEncounterDelete(encounterIndex){const encounterToDelete=this.diaryEntryEncounters()[encounterIndex].encounter;this.store.removeEncounter(encounterToDelete)}onEncounterCreate(encounter){const newEncounter={...encounter,order_index:nextOrderIndex(encounter)};this.encounterCreate.emit(newEncounter),this.store.removeEmptyEncounterForCreation(encounter)}scrollToEncounter(encounterTitle){(0,rxjs_interop.br)(this.encounterElements).pipe((0,rxjs_interop.pQ)(),(0,map.T)((elements=>elements.find((el=>el.nativeElement.id===encounterTitle)))),(0,rxjs_operators.u5)(),(0,take.s)(1)).subscribe((encounterElement=>encounterElement.nativeElement.scrollIntoView({behavior:"instant"})))}getOrderIndexForNewEncounter(insertionIndex){const isNewFirstEncounter=insertionIndex<0,isEmptyDiaryEntry=0===this.store.realEncounters().length,isNewFirstEncounterInFullDiaryentry=isNewFirstEncounter&&!isEmptyDiaryEntry,isLastEncounterInFullDiaryentry=insertionIndex>=this.store.realEncounters().length&&!isEmptyDiaryEntry;if(isEmptyDiaryEntry)return 0;if(isNewFirstEncounterInFullDiaryentry){return function priorOrderIndex(encounter){return getUnshiftedOrderIndex(encounter)-ORDER_INDEX_INCREMENT}(this.store.realEncounters()[0])}if(isLastEncounterInFullDiaryentry){return nextOrderIndex(this.store.realEncounters()[this.store.realEncounters().length-1])}return function getShiftedOrderIndex(encounter){return hasShiftedOrderIndex(encounter)?encounter.order_index:encounter.order_index+1}(this.diaryEntryEncounters()[insertionIndex].encounter)}isRealEncounter(encounter){return"pk"in encounter}nextRealEncounter(encounterIndex){const realEncountersAfterIndex=this.diaryEntryEncounters().slice(encounterIndex).filter((encounter=>this.isRealEncounter(encounter.encounter)));return realEncountersAfterIndex[0]?.encounter}priorRealEncounter(encounterIndex){const realEncountersBeforeIndex=this.diaryEntryEncounters().slice(0,encounterIndex+1).reverse().filter((encounter=>this.isRealEncounter(encounter.encounter)));return realEncountersBeforeIndex[0]?.encounter}static{this.ctorParameters=()=>[]}static{this.propDecorators={state:[{type:core.Input,args:[{isSignal:!0,alias:"state",required:!1,transform:void 0}]}],encounterElements:[{type:core.ViewChildren,args:["encounter",{isSignal:!0}]}],connectionDelete:[{type:core.Output}],connectionCreate:[{type:core.Output}],encounterDelete:[{type:core.Output}],encounterUpdate:[{type:core.Output}],encounterCreate:[{type:core.Output}],encounterCutInsert:[{type:core.Output}],encounterSwap:[{type:core.Output}],addUnfinishedEncounter:[{type:core.Output,args:["addUnfinishedEncounter"]}]}}};DiaryentryEncountersComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-diaryentry-encounters",template:'<div class="container list" [class.list--loading]="isUpdatingGlobally()">\n  @if (!isUpdatingGlobally()) {\n    \x3c!-- Insert new first Encounter --\x3e\n    @if (state() === "EDIT") {\n      <div class="row">\n        <div class="list__buttons buttons">\n          @if (canCreate()) {\n            <button\n              btn\n              class="col-12 col-md-4 buttons__button buttons__button--left"\n              title="Add Encounter to Diaryentry"\n              [kind]="\'PRIMARY\'"\n              [size]="\'LARGE\'"\n              [icon]="\'plus\'"\n              [text]="\'Add First Encounter\'"\n              [disabled]="isUpdatingAnything()"\n              (click)="addEmptyEncounterAtIndex(-1)"\n            ></button>\n          }\n          @if (canUpdate()) {\n            <button\n              btn\n              class="col-6 col-md-4 buttons__button buttons__button--right"\n              title="Insert Cut Encounter"\n              [size]="\'LARGE\'"\n              [icon]="\'file-import\'"\n              [text]="\'Insert Cut Encounter\'"\n              [kind]="\'SECONDARY\'"\n              [disabled]="\n                isUpdatingAnything() ||\n                cutEncounterIndex() == null ||\n                cutEncounterIndex() === 0\n              "\n              (click)="onInsertExcisedEncounter(-1 + 1)"\n            ></button>\n          }\n        </div>\n      </div>\n    }\n\n    \x3c!-- Diaryentry - Encounters --\x3e\n    <div class="row">\n      @for (entryEncounter of diaryEntryEncounters(); track entryEncounter) {\n        \x3c!-- Encounter --\x3e\n        <div\n          class="repeated-unit"\n          [id]="entryEncounter.encounter.title"\n          #encounter\n        >\n          @switch (state()) {\n            @case ("READ") {\n              <ng-container\n                *ngTemplateOutlet="\n                  displayEncounter;\n                  context: { $implicit: entryEncounter }\n                "\n              />\n            }\n            @case ("EDIT") {\n              <ng-container\n                *ngTemplateOutlet="\n                  editEncounter;\n                  context: {\n                    $implicit: { entry: entryEncounter, index: $index },\n                  }\n                "\n              />\n            }\n          }\n\n          \x3c!-- Insert new Encounter --\x3e\n          @if (state() === "EDIT" && (canCreate() || canUpdate())) {\n            <div class="list__buttons buttons">\n              @if (canCreate()) {\n                <button\n                  btn\n                  class="col-12 col-md-4 buttons__button buttons__button--left"\n                  title="Add Encounter to DiaryEntry"\n                  [kind]="\'PRIMARY\'"\n                  [size]="\'LARGE\'"\n                  [icon]="\'plus\'"\n                  [text]="\'Add Encounter\'"\n                  [disabled]="isUpdatingAnything()"\n                  (click)="addEmptyEncounterAtIndex($index)"\n                ></button>\n              }\n              @if (canUpdate()) {\n                <button\n                  btn\n                  class="col-6 col-md-4 buttons__button buttons__button--right"\n                  title="Insert Cut Encounter"\n                  [size]="\'LARGE\'"\n                  [icon]="\'file-import\'"\n                  [text]="\'Insert Cut Encounter\'"\n                  [kind]="\'SECONDARY\'"\n                  [disabled]="\n                    isUpdatingAnything() ||\n                    cutEncounterIndex() == null ||\n                    cutEncounterIndex()! - 1 === $index ||\n                    cutEncounterIndex() === $index\n                  "\n                  (click)="onInsertExcisedEncounter($index + 1)"\n                ></button>\n              }\n            </div>\n          }\n        </div>\n      }\n    </div>\n  } @else {\n    <ng-container *ngTemplateOutlet="loading" />\n  }\n</div>\n\n<ng-template #displayEncounter let-entryEncounter>\n  <h4>\n    {{ entryEncounter.encounter?.title }}\n  </h4>\n  <app-html-text [text]="entryEncounter.encounter.description"></app-html-text>\n</ng-template>\n\n<ng-template #editEncounter let-context>\n  <app-card class="encounter-card">\n    @if (!context.entry.isUpdating) {\n      <app-encounter\n        class="encounter-card__encounter"\n        [encounter]="context.entry.encounter"\n        [characters]="campaignCharacters() ?? []"\n        [locations]="campaignLocations() ?? []"\n        [serverModel]="encounterServerModel()"\n        [canUpdate]="canUpdate()"\n        [canDelete]="canDelete()"\n        [canCreate]="canCreate()"\n        [initialState]="\n          context.entry.encounter.pk == null ? \'CREATE\' : \'DISPLAY\'\n        "\n        (connectionDelete)="connectionDelete.emit($event)"\n        (connectionCreate)="connectionCreate.emit($event)"\n        (encounterDelete)="onEncounterDelete(context.index)"\n        (encounterUpdate)="encounterUpdate.emit($event)"\n        (encounterCreate)="onEncounterCreate($event)"\n        (encounterCreateCancel)="onEncounterCreateCancel(context.index)"\n      ></app-encounter>\n      @if (canUpdate() && context.entry.encounter.pk != null) {\n        <div class="encounter-card__side-buttons side-buttons side-buttons">\n          <button\n            btn\n            class="side-buttons__button side-buttons__button--edit"\n            [disabled]="\n              cutEncounterIndex() != null &&\n              context.index !== cutEncounterIndex()\n            "\n            [kind]="\n              cutEncounterIndex() != null &&\n              context.index === cutEncounterIndex()\n                ? \'PRIMARY\'\n                : \'DARK\'\n            "\n            [icon]="\n              cutEncounterIndex() != null &&\n              context.index === cutEncounterIndex()\n                ? \'times\'\n                : \'cut\'\n            "\n            [disabled]="isUpdatingAnything()"\n            (click)="onExcisionClick(context.index)"\n          ></button>\n          <ng-container\n            *ngTemplateOutlet="orderArrows; context: { $implicit: context }"\n          />\n        </div>\n      }\n    } @else {\n      <ng-container *ngTemplateOutlet="loading" />\n    }\n  </app-card>\n</ng-template>\n\n\x3c!-- Loading Spinner --\x3e\n<ng-template #loading><app-spinner class="spinner"></app-spinner></ng-template>\n\n<ng-template #orderArrows let-context>\n  <app-arrow-button\n    class="side-buttons__button side-buttons__button--arrow"\n    [kind]="\'DARK\'"\n    [icon]="\'up\'"\n    [disabled]="isUpdatingAnything()"\n    (click)="onEncounterOrderDecrease(context.index)"\n  ></app-arrow-button>\n  <app-arrow-button\n    class="side-buttons__button side-buttons__button--arrow"\n    [kind]="\'DARK\'"\n    [icon]="\'down\'"\n    [disabled]="isUpdatingAnything()"\n    (click)="onEncounterOrderIncrease(context.index)"\n  ></app-arrow-button>\n</ng-template>\n',standalone:!0,imports:[button_component.Q,card_component.i,html_text_component.m,encounter_component.L,arrow_button_component.R,spinner_component.t,common.NgTemplateOutlet],animations:[slideDown.sb],styles:[diaryentry_encounters_componentngResource_default()]})],DiaryentryEncountersComponent)},"./src/design/organisms/encounter/encounter.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>EncounterComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var encounter_componentngResource=__webpack_require__("./src/design/organisms/encounter/encounter.component.scss?ngResource"),encounter_componentngResource_default=__webpack_require__.n(encounter_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),formly_service_service=__webpack_require__("./src/app/_services/formly/formly-service.service.ts"),routing_service=__webpack_require__("./src/app/_services/routing.service.ts"),html_text_component=__webpack_require__("./src/design/atoms/html-text/html-text.component.ts"),separator_component=__webpack_require__("./src/design/atoms/separator/separator.component.ts"),molecules=__webpack_require__("./src/design/molecules/index.ts"),array=__webpack_require__("./src/utils/array.ts"),rxjs_operators=__webpack_require__("./src/utils/rxjs-operators.ts");let EncounterComponent=class EncounterComponent{constructor(routingService,formlyService){this.routingService=routingService,this.formlyService=formlyService,this.characters=core.input.required(),this.locations=core.input.required(),this.encounter=(0,core.input)(),this.serverModel=(0,core.input)(),this.canUpdate=(0,core.input)(!1),this.canCreate=(0,core.input)(!1),this.canDelete=(0,core.input)(!1),this.initialState=(0,core.input)("DISPLAY"),this.connectionDelete=new core.EventEmitter,this.connectionCreate=new core.EventEmitter,this.encounterDelete=new core.EventEmitter,this.encounterUpdate=new core.EventEmitter,this.encounterCreate=new core.EventEmitter,this.encounterCreateCancel=new core.EventEmitter,this.userModel=(0,core.signal)({}),this.state=(0,core.signal)("DISPLAY"),this.badgeEntries=(0,core.computed)((()=>{const encounterConnections=this.encounter()?.encounterConnections??[];return this.parseConnection(encounterConnections)})),this.campaignName=(0,core.computed)((()=>this.encounter()?.campaign_details?.name)),this.locations$=(0,rxjs_interop.br)(this.locations).pipe((0,rxjs_operators.u5)()),this.formlyFields=(0,core.computed)((()=>[this.formlyService.buildInputConfig({key:"title",inputKind:"STRING"}),this.formlyService.buildOverviewSelectConfig({key:"location",label:"Encounter Location",sortProp:"name_full",campaign:this.campaignName(),options$:this.locations$.pipe((0,map.T)((locs=>(0,array.Z)(locs,"name_full")))),labelProp:"name_full",required:!1}),this.formlyService.buildEditorConfig({key:"description",required:!0})]))}ngOnInit(){const model="CREATE"===this.initialState()&&this.canCreate()?{}:void 0;this.changeState(this.initialState(),model)}changeState(newState,newModel){this.state.set(newState),this.userModel.set({...newModel})}onEncounterCreate(encounter){this.encounterCreate.emit({...this.encounter(),...encounter}),this.changeState("DISPLAY",encounter)}onEncounterDelete(){this.encounterDelete.emit(this.encounter()),this.changeState("DISPLAY",void 0)}onEncounterUpdate(encounter){this.encounterUpdate.emit(encounter),this.changeState("DISPLAY",void 0)}onEncounterCreateCancel(){this.encounterCreateCancel.emit(),this.changeState("DISPLAY",void 0)}onConnectionDelete(connection){this.canDelete()&&this.connectionDelete.emit(connection)}onConnectionCreate(character){const newConnection={campaign:this.encounter()?.campaign_details?.id,encounter:this.encounter()?.pk,character:character.pk};this.connectionCreate.emit(newConnection)}onToggle(toggled){if("CREATE"===this.state())return void this.encounterCreateCancel.emit();const nextState="DISPLAY"===this.state()?"UPDATE":"DISPLAY",nextModel=toggled?{...this.encounter()}:void 0;this.changeState(nextState,nextModel)}parseConnection(connections){return connections.map((con=>{const characterName=con.character_details?.name;return{text:characterName,badgeValue:con,link:this.routingService.getRoutePath("character",{name:characterName,campaign:this.campaignName()})}}))}static{this.ctorParameters=()=>[{type:routing_service.O},{type:formly_service_service.$}]}static{this.propDecorators={characters:[{type:core.Input,args:[{isSignal:!0,alias:"characters",required:!0,transform:void 0}]}],locations:[{type:core.Input,args:[{isSignal:!0,alias:"locations",required:!0,transform:void 0}]}],encounter:[{type:core.Input,args:[{isSignal:!0,alias:"encounter",required:!1,transform:void 0}]}],serverModel:[{type:core.Input,args:[{isSignal:!0,alias:"serverModel",required:!1,transform:void 0}]}],canUpdate:[{type:core.Input,args:[{isSignal:!0,alias:"canUpdate",required:!1,transform:void 0}]}],canCreate:[{type:core.Input,args:[{isSignal:!0,alias:"canCreate",required:!1,transform:void 0}]}],canDelete:[{type:core.Input,args:[{isSignal:!0,alias:"canDelete",required:!1,transform:void 0}]}],initialState:[{type:core.Input,args:[{isSignal:!0,alias:"initialState",required:!1,transform:void 0}]}],connectionDelete:[{type:core.Output}],connectionCreate:[{type:core.Output}],encounterDelete:[{type:core.Output}],encounterUpdate:[{type:core.Output}],encounterCreate:[{type:core.Output}],encounterCreateCancel:[{type:core.Output}]}}};EncounterComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-encounter",template:'@if (encounter() || state() === "CREATE") {\n  <h4 class="card__heading">\n    @switch (state()) {\n      @case ("DISPLAY") {\n        <ng-container [ngTemplateOutlet]="displayHeading" />\n      }\n      @case ("UPDATE") {\n        <ng-container [ngTemplateOutlet]="updateHeading" />\n      }\n      @case ("OUTDATEDUPDATE") {\n        <ng-container [ngTemplateOutlet]="updateHeading" />\n      }\n      @case ("CREATE") {\n        <ng-container [ngTemplateOutlet]="createHeading" />\n      }\n    }\n\n    @if (canUpdate()) {\n      <app-edit-toggle\n        class="card__edit-button"\n        [buttonKind]="\'DARK\'"\n        [toggled]="state() !== \'DISPLAY\'"\n        (toggle)="onToggle($event)"\n      ></app-edit-toggle>\n    }\n  </h4>\n\n  @switch (state()) {\n    @case ("DISPLAY") {\n      <ng-container [ngTemplateOutlet]="displayBody" />\n    }\n    @case ("UPDATE") {\n      <ng-container [ngTemplateOutlet]="updateBody" />\n    }\n    @case ("OUTDATEDUPDATE") {\n      <ng-container [ngTemplateOutlet]="updateBody" />\n    }\n    @case ("CREATE") {\n      <ng-container [ngTemplateOutlet]="createBody" />\n    }\n  }\n}\n\n<ng-template #displayHeading>\n  {{ encounter()?.title }}\n</ng-template>\n\n<ng-template #displayBody>\n  \x3c!-- Encounter --\x3e\n  @let encounterVal = encounter();\n  @if (encounterVal) {\n    <div class="card__text">\n      <app-html-text [text]="encounterVal.description"></app-html-text>\n    </div>\n  }\n\n  <app-separator></app-separator>\n\n  \x3c!-- Encounter Connections --\x3e\n  <div class="card__connections">\n    <app-badge-list\n      [entries]="badgeEntries()"\n      [createOptions]="{\n        kind: \'SELECT\',\n        config: {\n          options: characters(),\n          valueProp: \'pk\',\n          labelProp: \'name\',\n        },\n      }"\n      [canCreate]="canCreate()"\n      [canDelete]="canDelete()"\n      [cancelButtonType]="\'DARK\'"\n      (entryCreate)="onConnectionCreate($event)"\n      (entryDelete)="onConnectionDelete($event)"\n    ></app-badge-list>\n  </div>\n\n  \x3c!-- Encounter Footer/Delete Toggle --\x3e\n  @if (canDelete()) {\n    <app-confirmation-toggle-button\n      class="card__delete-confirmer"\n      [confirmationQuestion]="\'Delete this encounter?\'"\n      [icon]="\'trash\'"\n      (confirm)="onEncounterDelete()"\n    ></app-confirmation-toggle-button>\n  }\n</ng-template>\n\n<ng-template #updateHeading> Update "{{ encounter()?.title }}" </ng-template>\n\n\x3c!-- Form to Update Encounters --\x3e\n<ng-template #updateBody>\n  @if (canUpdate() && state() === "UPDATE") {\n    <app-form\n      [model]="userModel()"\n      [fields]="formlyFields()"\n      [cancelButtonType]="\'DARK\'"\n      (formlySubmit)="onEncounterUpdate(userModel())"\n      (formlyCancel)="changeState(\'DISPLAY\', undefined)"\n    ></app-form>\n  } @else if (canUpdate() && state() === "OUTDATEDUPDATE") {\n    <app-compare-form\n      [fields]="formlyFields()"\n      [modelFromUser]="userModel()"\n      [modelFromServer]="serverModel()"\n      [displayVertically]="true"\n      (formlySubmit)="onEncounterUpdate($event)"\n      (formlyCancel)="changeState(\'DISPLAY\', undefined)"\n    ></app-compare-form>\n  }\n</ng-template>\n\n<ng-template #createHeading> Create new Encounter </ng-template>\n\n\x3c!-- Form to Update Encounters --\x3e\n<ng-template #createBody>\n  @if (canCreate() && state() === "CREATE") {\n    <app-form\n      [model]="userModel()"\n      [fields]="formlyFields()"\n      [cancelButtonType]="\'DARK\'"\n      (formlySubmit)="onEncounterCreate($event)"\n      (formlyCancel)="onEncounterCreateCancel()"\n    ></app-form>\n  }\n</ng-template>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,standalone:!0,imports:[common.NgTemplateOutlet,molecules.aU,html_text_component.m,separator_component.F,molecules.pn,molecules.Ts,molecules.s2,molecules.zx],styles:[encounter_componentngResource_default()]})],EncounterComponent)},"./src/design/organisms/toast-overlay/toast-overlay.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>ToastOverlayComponent,f:()=>ToastService});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var toast_overlay_componentngResource=__webpack_require__("./src/design/organisms/toast-overlay/toast-overlay.component.scss?ngResource"),toast_overlay_componentngResource_default=__webpack_require__.n(toast_overlay_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),ng_bootstrap=__webpack_require__("./node_modules/@ng-bootstrap/ng-bootstrap/fesm2022/ng-bootstrap.mjs"),slideDown=__webpack_require__("./src/design/animations/slideDown.ts"),button_component=__webpack_require__("./src/design/atoms/button/button.component.ts"),icon_component=__webpack_require__("./src/design/atoms/icon/icon.component.ts"),logging=__webpack_require__("./src/utils/logging.ts");let ToastService=class ToastService{constructor(){this.toasts=(0,core.signal)([]),this.currentToast=(0,core.computed)((()=>this.toasts()[0]))}addToast(newToast){(0,logging.R)(this.addToast.name,newToast);const toasts=this.toasts();newToast.important?this.toasts.set([newToast,...toasts]):this.toasts.set([...toasts,newToast])}dismissToast(){const[_,...newToastList]=this.toasts();this.toasts.set(newToastList)}};ToastService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],ToastService);let ToastOverlayComponent=class ToastOverlayComponent{constructor(){this.toastService=(0,core.inject)(ToastService),this.currentToast=this.toastService.currentToast,this.icon=(0,core.computed)((()=>{const currentToast=this.currentToast();if(currentToast)return this.toHeaderIcon(currentToast.type,currentToast.header?.icon)}))}dismissCurrentToast(){const currentToast=this.currentToast();if(!currentToast)return;const onHide=currentToast.onHide;onHide&&onHide(),this.toastService.dismissToast()}toHeaderIcon(toastType,icon){if(null!=icon)return icon;switch(toastType){case"DANGER":return"triangle-exclamation";case"WARNING":return"circle-exclamation";case"INFO":return"info-circle";case"SUCCESS":return"check";default:return"info"}}};ToastOverlayComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-toast-overlay",standalone:!0,imports:[ng_bootstrap.VR,button_component.Q,icon_component.R,common.NgTemplateOutlet],animations:[slideDown.st],template:'@let toast = currentToast();\n@let onToastClick = toast?.onToastClick;\n@if (toast && onToastClick) {\n  <button\n    btn\n    class="button-container"\n    [kind]="\'NONE\'"\n    (click)="onToastClick(dismissCurrentToast.bind(this))"\n  >\n    <ng-container *ngTemplateOutlet="toastOverlay" />\n  </button>\n} @else if (toast) {\n  <ng-container *ngTemplateOutlet="toastOverlay" />\n}\n\n<ng-template #toastOverlay>\n  @if (toast) {\n    @if (toast.header) {\n      <ngb-toast\n        class="toast toast--{{ toast.type.toLocaleLowerCase() }}"\n        data-bs-theme="dark"\n        [autohide]="!!toast.dismissMs && toast.dismissMs > 0"\n        [delay]="toast.dismissMs ? toast.dismissMs : 0"\n        [ariaLive]="toast.important ? \'alert\' : \'polite\'"\n        [animation]="true"\n        (hidden)="dismissCurrentToast()"\n        (shown)="toast.onShow ? toast.onShow() : undefined"\n      >\n        <ng-template ngbToastHeader>\n          <span class="toast-header__text">\n            @let headerIcon = icon();\n            @if (headerIcon) {\n              <app-icon\n                class="toast-header__icon"\n                [icon]="headerIcon"\n              ></app-icon>\n            }\n            <span\n              class="toast-header__text-container"\n              [innerHTML]="toast.header.text"\n            ></span>\n          </span>\n        </ng-template>\n\n        <ng-container *ngTemplateOutlet="body" />\n      </ngb-toast>\n    } @else {\n      <ngb-toast\n        class="toast toast--{{ toast.type.toLocaleLowerCase() }}"\n        data-bs-theme="dark"\n        [autohide]="!!toast.dismissMs && toast.dismissMs > 0"\n        [delay]="toast.dismissMs ? toast.dismissMs : 0"\n        [ariaLive]="toast.important ? \'alert\' : \'polite\'"\n        [animation]="true"\n        (hidden)="dismissCurrentToast()"\n        (shown)="toast.onShow ? toast.onShow() : undefined"\n      >\n        <ng-container *ngTemplateOutlet="body" />\n      </ngb-toast>\n    }\n  }\n</ng-template>\n\n<ng-template #body>\n  <div class="toast__body body">\n    <span class="body__text">\n      @let bodyIcon = toast?.body?.icon;\n      @if (bodyIcon) {\n        <app-icon class="body__icon" [icon]="bodyIcon" />\n      }\n\n      @if (toast?.body?.text) {\n        <div class="body__text-container" [innerHTML]="toast?.body?.text"></div>\n      }\n    </span>\n\n    <div class="body__button-container">\n      @let firstButton = toast?.body?.buttons?.[0];\n      @if (firstButton) {\n        <button\n          btn\n          class="body__button"\n          [text]="firstButton.label"\n          [icon]="firstButton.icon"\n          [size]="\'SMALL\'"\n          [kind]="\'PRIMARY\'"\n          (click)="firstButton.onClick(dismissCurrentToast.bind(this))"\n        ></button>\n      }\n      @let secondButton = toast?.body?.buttons?.[1];\n      @if (secondButton) {\n        <button\n          btn\n          class="body__button"\n          [text]="secondButton.label"\n          [icon]="secondButton.icon"\n          [size]="\'SMALL\'"\n          [kind]="\'SECONDARY\'"\n          (click)="secondButton.onClick(dismissCurrentToast.bind(this))"\n        ></button>\n      }\n    </div>\n  </div>\n</ng-template>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[toast_overlay_componentngResource_default()]})],ToastOverlayComponent)},"./src/utils/array.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U1:()=>replaceItem,Z:()=>sortByProp});const replaceItem=(list,item,key)=>{const newList=[...list],itemIndex=newList.findIndex((listItem=>listItem[key]===item[key]));if(-1===itemIndex)throw"Failed to find item in list";return newList[itemIndex]=item,newList},sortByProp=(list,prop,sortDirection="asc")=>{const newList=[...list];return newList.sort(((a,b)=>{const sortValue=a[prop]>b[prop]?1:-1;return"desc"===sortDirection?-1*sortValue:sortValue})),newList}},"./src/utils/clipboard.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function copyToClipboard(text){const windowSelection=window.getSelection(),documentSelection=window.getSelection();var userSelectedTextRange=void 0;(function userHasElementsSelected(){const selection=document.getSelection();if(null==selection)return!1;return selection?.rangeCount>0})()&&(userSelectedTextRange=documentSelection.getRangeAt(0),windowSelection.removeRange(userSelectedTextRange));const textContainerElement=function createTextContainerElement(text){const textContainerElement=document.createElement("div");textContainerElement.innerHTML=text;const strippedText=textContainerElement.textContent;return textContainerElement.innerHTML=strippedText.replaceAll(">","<br>> ").slice(4),textContainerElement.style.position="absolute",textContainerElement.style.left="-9999px",textContainerElement}(text);document.body.appendChild(textContainerElement);const copyRange=function selectElement(element){const selectedRange=document.createRange();return selectedRange.selectNode(element),window.getSelection()?.addRange(selectedRange),selectedRange}(textContainerElement);!function copyCurrentSelection(){try{document.execCommand("copy")}catch(err){window.alert("Your Browser Doesn't support this! Error : "+err)}}(),windowSelection.removeRange(copyRange),document.body.removeChild(textContainerElement),userSelectedTextRange&&windowSelection.addRange(userSelectedTextRange)}__webpack_require__.d(__webpack_exports__,{l:()=>copyToClipboard})},"./node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{XI:()=>action});var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/internal/preview-api"),external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_=__webpack_require__("storybook/internal/preview-errors"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),ADDON_ID="storybook/actions",EVENT_ID=`${ADDON_ID}/action-event`,config={depth:10,clearOnStoryChange:!0,limit:50},findProto=(obj,callback)=>{let proto=Object.getPrototypeOf(obj);return!proto||callback(proto)?proto:findProto(proto,callback)},serializeArg=a=>{if("object"==typeof(e=a)&&e&&findProto(e,(proto=>/^Synthetic(?:Base)?Event$/.test(proto.constructor.name)))&&"function"==typeof e.persist){let e=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));e.persist();let viewDescriptor=Object.getOwnPropertyDescriptor(e,"view"),view=viewDescriptor?.value;return"object"==typeof view&&"Window"===view?.constructor.name&&Object.defineProperty(e,"view",{...viewDescriptor,value:Object.create(view.constructor.prototype)}),e}var e;return a},generateId=()=>"object"==typeof crypto&&"function"==typeof crypto.getRandomValues?(0,v4.A)():Date.now().toString(36)+Math.random().toString(36).substring(2);function action(name,options={}){let actionOptions={...config,...options},handler=function(...args){if(options.implicit){let storyRenderer=("__STORYBOOK_PREVIEW__"in external_STORYBOOK_MODULE_GLOBAL_.global?external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find((render=>"playing"===render.phase||"rendering"===render.phase));if(storyRenderer){let deprecated=!window?.FEATURES?.disallowImplicitActionsInRenderV8,error=new external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_.ImplicitActionsDuringRendering({phase:storyRenderer.phase,name,deprecated});if(!deprecated)throw error;console.warn(error)}}let channel=external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel(),id=generateId(),serializedArgs=args.map(serializeArg),normalizedArgs=args.length>1?serializedArgs:serializedArgs[0],actionDisplayToEmit={id,count:0,data:{name,args:normalizedArgs},options:{...actionOptions,maxDepth:5+(actionOptions.depth||3),allowFunction:actionOptions.allowFunction||!1}};channel.emit(EVENT_ID,actionDisplayToEmit)};return handler.isAction=!0,handler.implicit=options.implicit,handler}},"./src/design/atoms/arrow-button/arrow-button.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2rem;\n  padding: var(--spacer-3) var(--spacer-2);\n}\n.btn-disabled {\n  cursor: not-allowed;\n}\n.btn-icon {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/design/atoms/card/card.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".accordion {\n  --bs-accordion-active-bg: var(--bs-gray-900) !important;\n}\n\nbutton.btn.btn-link:hover {\n  text-decoration: none !important;\n}\n\nbutton.btn.btn-link:focus {\n  text-decoration: none !important;\n  box-shadow: none !important;\n}\n\n.card button.btn.btn-link {\n  width: 100%;\n  text-align: left;\n}\n\n.form-control {\n  height: 2.75rem;\n  font-size: 1.2rem;\n}\n\ninput.form-control {\n  background-color: transparent !important;\n  color: white !important;\n  border: solid white 1px !important;\n}\n\ninput.form-control:focus {\n  box-shadow: 3px blue;\n  color: white;\n}\n\nselect.form-select {\n  color: white !important;\n  background-color: #4c4c4c !important;\n}\n\nselect:focus {\n  background-color: #4c4c4c;\n  box-shadow: 3px blue;\n  color: white;\n}\n\noption {\n  background-color: #1b1f22;\n  color: white;\n  font-size: 18px;\n}\n\n.custom-control.custom-checkbox {\n  transform: scale(1.2);\n  transform-origin: 0;\n}\n\n.visually-hidden {\n  display: none;\n}\n\n.tooltip-inner {\n  --bs-tooltip-bg: var(--bs-info-bg-subtle);\n  --bs-tooltip-color: var(--bs-emphasis-color);\n}\n\n:host {\n  --card-bg-color: #393e41 !important;\n  --card-flex-direction: column;\n  --card-padding: var(--spacer-4);\n}\n\n.card {\n  background-color: var(--card-bg-color);\n  margin-top: var(--spacer-3);\n  margin-bottom: var(--spacer-3);\n  padding: var(--card-padding);\n  flex-direction: var(--card-flex-direction);\n  width: 100%;\n  height: 100%;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/design/atoms/html-text/html-text.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/design/organisms/diaryentry-encounters/diaryentry-encounters.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".list {\n  padding-left: var(--spacer-0);\n  padding-right: var(--spacer-0);\n}\n.list--loading {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.list__buttons {\n  padding: 0;\n  margin-bottom: var(--spacer-2);\n}\n\n.buttons {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.buttons__button {\n  display: flex;\n}\n.buttons__button--right {\n  display: none;\n}\n@media (min-width: 768px) {\n  .buttons__button--right {\n    display: flex;\n  }\n}\n\n.repeated-unit {\n  padding: 0;\n  scroll-margin-top: var(--spacer-5);\n}\n@media (min-width: 768px) {\n  .repeated-unit {\n    padding: unset;\n  }\n}\n\n.encounter-card {\n  display: flex;\n  justify-content: center;\n  --card-flex-direction: column;\n  --card-padding: var(--spacer-3);\n}\n@media (min-width: 768px) {\n  .encounter-card {\n    --card-flex-direction: row;\n  }\n}\n.encounter-card__encounter {\n  flex: 1;\n}\n.encounter-card__side-buttons {\n  height: 100%;\n}\n\n.side-buttons {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  margin-left: var(--spacer-1);\n}\n@media (min-width: 768px) {\n  .side-buttons {\n    flex-direction: column;\n    justify-content: unset;\n  }\n}\n.side-buttons__button--edit {\n  display: none;\n  margin-bottom: var(--spacer-4);\n}\n@media (min-width: 768px) {\n  .side-buttons__button--edit {\n    display: unset;\n  }\n}\n.side-buttons__button--arrow {\n  padding: var(--spacer-1) var(--spacer-0);\n}\n\n.spinner {\n  width: 100px;\n  height: 100px;\n  --thickness: 60px;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/design/organisms/encounter/encounter.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".card {\n  margin-top: var(--spacer-3);\n  margin-bottom: var(--spacer-3);\n  padding: var(--spacer-4);\n}\n.card__heading {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.card__text {\n  margin-bottom: var(--spacer-1);\n}\n.card__connections {\n  margin-bottom: var(--spacer-3);\n}\n.card__delete-confirmer {\n  padding-left: var(--spacer-0);\n  padding-right: var(--spacer-0);\n  display: flex;\n  justify-content: flex-end;\n  width: 100%;\n  --confirmation-bg-color: var(--bs-dark);\n}\n.card__edit-button {\n  align-self: flex-start;\n}\n\n.connections {\n  display: inline-flex;\n}\n.connections__label {\n  margin-right: var(--spacer-4);\n}\n.connections__list {\n  display: inline-flex;\n  align-items: flex-start;\n  flex-wrap: wrap;\n}\n.connections__connection, .connections__create-form {\n  margin: var(--spacer-0) var(--spacer-2) var(--spacer-2) var(--spacer-1);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/design/organisms/toast-overlay/toast-overlay.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  position: absolute;\n}\n\n.toast:focus, .toast:focus-within, .toast:hover, .toast:focus-visible {\n  outline: var(--focus-outline);\n}\n\n.toast {\n  position: fixed;\n  bottom: 10%;\n  width: 93%;\n  right: 3.5%;\n  --bs-light-rgb: var(--bs-white);\n  --bs-toast-header-color: var(--bs-white);\n  --bs-toast-color: var(--bs-white);\n  --toast-padding-x: var(--bs-toast-padding-x);\n  --toast-padding-y: calc(var(--bs-toast-padding-y) / 2);\n  --bs-toast-border-width: 3px;\n}\n.toast--primary {\n  --bs-border-color-translucent: var(--bs-primary);\n}\n.toast--secondary {\n  --bs-border-color-translucent: var(--bs-secondary);\n}\n.toast--success {\n  --bs-border-color-translucent: var(--bs-success);\n}\n.toast--danger {\n  --bs-border-color-translucent: var(--bs-danger);\n}\n.toast--warning {\n  --bs-border-color-translucent: var(--bs-warning);\n}\n.toast--info {\n  --bs-border-color-translucent: var(--bs-info);\n}\n.toast--light {\n  --bs-border-color-translucent: var(--bs-light);\n}\n.toast--dark {\n  --bs-border-color-translucent: var(--bs-dark);\n}\n@media (min-width: 576px) {\n  .toast {\n    width: fit-content;\n    max-width: 50%;\n    bottom: 5%;\n  }\n}\n\n.toast-header__text {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: var(--spacer-2);\n  flex: 1;\n  font-weight: bold;\n}\n\n.body {\n  display: flex;\n  flex-direction: column;\n}\n.body__text {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: var(--spacer-2);\n  text-align: start;\n}\n.body__text-container {\n  max-height: calc(var(--bs-body-font-size) * 8);\n  max-width: 100%;\n  overflow: auto;\n}\n.body__button {\n  width: fit-content;\n}\n.body__button-container {\n  display: flex;\n  flex-direction: row;\n  gap: var(--spacer-3);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);
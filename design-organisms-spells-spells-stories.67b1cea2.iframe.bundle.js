(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[6113],{"./src/app/_services/article/player-class.service.mock.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>dummyClasses});const dummyClasses=[{name:"Artificer",pk:1,update_datetime:"2021-04-20T14:31:24.033655Z"},{name:"Barbarian",pk:2,update_datetime:"2021-04-20T14:31:27.810089Z"},{name:"Bard",pk:3,update_datetime:"2021-04-20T14:31:36.408312Z"},{name:"Cleric",pk:4,update_datetime:"2021-04-20T14:31:39.485140Z"},{name:"Druid",pk:5,update_datetime:"2021-04-20T14:31:50.431678Z"},{name:"Fighter",pk:6,update_datetime:"2021-04-20T14:31:53.562771Z"},{name:"Monk",pk:7,update_datetime:"2021-04-20T14:31:56.226259Z"},{name:"Paladin",pk:8,update_datetime:"2021-04-20T14:31:58.897597Z"},{name:"Ranger",pk:9,update_datetime:"2021-04-20T14:32:06.986455Z"},{name:"Rogue",pk:10,update_datetime:"2021-04-20T14:32:09.472989Z"},{name:"Sorcerer",pk:11,update_datetime:"2021-04-20T14:32:11.740394Z"},{name:"Warlock",pk:12,update_datetime:"2021-04-20T14:32:13.937586Z"},{name:"Wizard",pk:13,update_datetime:"2021-04-20T14:32:16.277146Z"}]},"./src/design/animations/slideDown.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{V4:()=>slideOutFromBottom,sb:()=>slideUpFromBottom,st:()=>slideRight});var _angular_animations__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/animations/fesm2022/animations.mjs");const inactiveStyle=(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.iF)({opacity:.2,transform:"translateY(50%)"}),activeStyle=(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.iF)({opacity:1,transform:"translateY(0%)"}),slideUpFromBottom=((0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.hZ)("slideFromBottom",[(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.kY)(":enter",[inactiveStyle,(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.i0)("500ms ease-out",activeStyle)]),(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.kY)(":leave",[activeStyle,(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.i0)("500ms ease-in",inactiveStyle)])]),(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.hZ)("slideUpFromBottom",[(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.kY)(":enter",[inactiveStyle,(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.i0)("500ms ease-out",activeStyle)])])),slideOutFromBottom=(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.hZ)("slideOutFromBottom",[(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.kY)(":leave",[activeStyle,(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.i0)("500ms ease-in",inactiveStyle)])]),inactiveSlideRightStyle=(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.iF)({transform:"translateX(100%)"}),activeSlideRightStyle=(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.iF)({transform:"translateX(0%)"}),slideRight=(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.hZ)("slideRight",[(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.kY)(":enter",[inactiveSlideRightStyle,(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.i0)("250ms ease-in-out",activeSlideRightStyle)]),(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.kY)(":leave",[activeSlideRightStyle,(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.i0)("250ms ease-in-out",inactiveSlideRightStyle)])])},"./src/design/organisms/spells/spells.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,NoPermissions:()=>NoPermissions,NoSpells:()=>NoSpells,__namedExportsOrder:()=>__namedExportsOrder,default:()=>spells_stories});var animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),testing=__webpack_require__("./node_modules/@angular/router/fesm2022/testing.mjs"),dist=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),angular_dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),formly_constants=__webpack_require__("./src/app/_modules/formly_constants.ts"),player_class_service_mock=__webpack_require__("./src/app/_services/article/player-class.service.mock.ts"),tslib_es6=(__webpack_require__("./node_modules/tinymce/tinymce.js"),__webpack_require__("./node_modules/tslib/tslib.es6.mjs"));var spells_componentngResource=__webpack_require__("./src/design/organisms/spells/spells.component.scss?ngResource"),spells_componentngResource_default=__webpack_require__.n(spells_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),slideDown=__webpack_require__("./src/design/animations/slideDown.ts"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),take=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/take.js"),badge_component=__webpack_require__("./src/design/atoms/badge/badge.component.ts"),button_component=__webpack_require__("./src/design/atoms/button/button.component.ts"),spinner_component=__webpack_require__("./src/design/atoms/spinner/spinner.component.ts"),molecules=__webpack_require__("./src/design/molecules/index.ts"),rxjs_operators=__webpack_require__("./src/utils/rxjs-operators.ts"),spell_component=__webpack_require__("./src/design/organisms/spell/spell.component.ts");let SpellsComponent=class SpellsComponent{constructor(){this.DEFAULT_TITLE="New Article Item",this.campaignId=core.input.required(),this.spells=core.input.required(),this.playerClasses=core.input.required(),this.canUpdate=core.input.required(),this.canDelete=core.input.required(),this.canCreate=core.input.required(),this.serverModel=core.input.required(),this.spellDelete=new core.EventEmitter,this.spellUpdate=new core.EventEmitter,this.spellCreate=new core.EventEmitter,this.connectionDelete=new core.EventEmitter,this.connectionCreate=new core.EventEmitter,this.spellClassClick=new core.EventEmitter,this.spellElements=(0,core.viewChildren)("spell"),this.isCreatingSpell=(0,core.signal)(!1),this.createSpellData=(0,core.computed)((()=>({name:this.DEFAULT_TITLE,campaign:this.campaignId()}))),this.spellCards=(0,core.computed)((()=>this.spells().map((spell=>({spell,isOpen:!1,classes:this.parsePlayerClasses(spell.player_class_connections)})))));const spellNameParam=(0,core.inject)(router.nX).snapshot.params.name;spellNameParam&&this.scrollToSpell(spellNameParam)}onSpellDelete(spellToDelete,deleteIndex){this.spellDelete.emit(spellToDelete)}cancelSpellCreation(){this.isCreatingSpell.set(!1)}addSpell(){this.isCreatingSpell.set(!0)}onSpellClassClick(event,connection){event.preventDefault(),this.spellClassClick.emit(connection.player_class_details)}onSpellCreate(spell){this.spellCreate.emit(spell),this.isCreatingSpell.set(!1)}parsePlayerClasses(classes){return classes.map((entry=>({text:entry.player_class_details?.name,badgeValue:void 0})))}scrollToSpell(spellName){(0,rxjs_interop.br)(this.spellElements).pipe((0,rxjs_interop.pQ)(),(0,map.T)((elements=>elements.find((el=>el.nativeElement.id===spellName)))),(0,rxjs_operators.u5)(),(0,take.s)(1)).subscribe((spellElement=>{(spellElement.nativeElement=spellElement.nativeElement).scrollIntoView({behavior:"instant"})}))}static{this.ctorParameters=()=>[]}static{this.propDecorators={campaignId:[{type:core.Input,args:[{isSignal:!0,alias:"campaignId",required:!0,transform:void 0}]}],spells:[{type:core.Input,args:[{isSignal:!0,alias:"spells",required:!0,transform:void 0}]}],playerClasses:[{type:core.Input,args:[{isSignal:!0,alias:"playerClasses",required:!0,transform:void 0}]}],canUpdate:[{type:core.Input,args:[{isSignal:!0,alias:"canUpdate",required:!0,transform:void 0}]}],canDelete:[{type:core.Input,args:[{isSignal:!0,alias:"canDelete",required:!0,transform:void 0}]}],canCreate:[{type:core.Input,args:[{isSignal:!0,alias:"canCreate",required:!0,transform:void 0}]}],serverModel:[{type:core.Input,args:[{isSignal:!0,alias:"serverModel",required:!0,transform:void 0}]}],spellDelete:[{type:core.Output}],spellUpdate:[{type:core.Output}],spellCreate:[{type:core.Output}],connectionDelete:[{type:core.Output}],connectionCreate:[{type:core.Output}],spellClassClick:[{type:core.Output}],spellElements:[{type:core.ViewChildren,args:["spell",{isSignal:!0}]}]}}};SpellsComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-spells",template:'<div class="container list">\n  @if (canCreate()) {\n    <div class="list__button">\n      <button\n        btn\n        class="list__button--button"\n        [kind]="\'PRIMARY\'"\n        [text]="\'Add Spell\'"\n        [icon]="\'plus\'"\n        (click)="addSpell()"\n      ></button>\n    </div>\n  }\n\n  <div class="row">\n    @if (isCreatingSpell()) {\n      <div class="list__spell-card spell-card" [@slideUpFromBottom]>\n        <app-collapsible-panel [isOpen]="true">\n          <div heading class="spell-card__heading">\n            <span>\n              {{ createSpellData().name ?? "" }}\n            </span>\n          </div>\n          <app-spell\n            body\n            class="spell-card__spell"\n            [spell]="createSpellData()"\n            [serverModel]="undefined"\n            [playerClasses]="playerClasses()"\n            [canUpdate]="false"\n            [canDelete]="false"\n            [canCreate]="canCreate()"\n            [cancelButtonType]="\'DARK\'"\n            (spellCreate)="onSpellCreate($event)"\n            (spellCreateCancel)="cancelSpellCreation()"\n          ></app-spell>\n        </app-collapsible-panel>\n      </div>\n    }\n    @for (card of spellCards(); track card.spell.pk) {\n      <div\n        class="list__spell-card spell-card"\n        [@slideOutFromBottom]\n        [id]="card.spell.name"\n        #spell\n      >\n        <app-collapsible-panel [isOpen]="card.isOpen">\n          <div heading class="spell-card__heading">\n            <span class="spell-card__heading-text">\n              {{ card.spell.name ?? "" }}\n            </span>\n\n            <span class="spell-card__classes">\n              @for (\n                connection of card.spell.player_class_connections;\n                track connection.pk\n              ) {\n                <button\n                  class="spell-card__class"\n                  (click)="onSpellClassClick($event, connection)"\n                >\n                  <app-badge\n                    [text]="connection.player_class_details?.name ?? \'\'"\n                    [kind]="\'DARK\'"\n                  ></app-badge>\n                </button>\n              }\n            </span>\n          </div>\n          <app-spell\n            body\n            class="spell-card__spell"\n            [spell]="card.spell"\n            [serverModel]="serverModel()"\n            [playerClasses]="playerClasses()"\n            [canUpdate]="canUpdate()"\n            [canDelete]="canDelete()"\n            [canCreate]="canCreate()"\n            [cancelButtonType]="\'DARK\'"\n            (spellDelete)="onSpellDelete($event, $index)"\n            (spellUpdate)="spellUpdate.emit($event)"\n            (spellCreateCancel)="cancelSpellCreation()"\n            (connectionDelete)="connectionDelete.emit($event)"\n            (connectionCreate)="connectionCreate.emit($event)"\n          ></app-spell>\n        </app-collapsible-panel>\n      </div>\n    }\n  </div>\n</div>\n\n\x3c!-- Loading Spinner --\x3e\n<ng-template #loading><app-spinner></app-spinner></ng-template>\n',animations:[slideDown.sb,slideDown.V4],standalone:!0,imports:[button_component.Q,molecules.e9,spell_component.o,badge_component.n,spinner_component.t],changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[spells_componentngResource_default()]})],SpellsComponent);const spells_stories={title:"DesignSystem/Organisms/SpellsComponent",component:SpellsComponent,decorators:[(0,angular_dist.moduleMetadata)({imports:[animations.BrowserAnimationsModule,testing.c,formly_constants.d_]})],args:{spells:Array(10).fill({getAbsoluteRouterUrl:()=>"/spells/1",spell_level:3,casting_time:"1 Action",range:"Self",components:"VSM*",duration:"Instantaneous",concentration:!0,ritual:!1,school:"Necromancy",saving_throw:"CON",damage:"8d6",description:"You draw forth the soul of a creature you have slain...",player_class_connections:[{player_class:1,spell:1,player_class_details:{pk:1,name:"Wizard"}},{player_class:2,spell:1,player_class_details:{pk:2,name:"Sorcerer"}}],pk:123,name:"Soul Cage",creation_datetime:"2022-04-25T12:00:00.000Z",update_datetime:"2022-04-25T14:30:00.000Z",campaign:1,campaign_details:{id:1,name:"Tales from the Sword Coast"}}),playerClasses:player_class_service_mock.T,canCreate:!0,canUpdate:!0,canDelete:!0,serverModel:void 0}},Template=args=>({props:{...args,spellDelete:(0,dist.XI)("spellDelete"),spellUpdate:(0,dist.XI)("spellUpdate"),spellCreate:(0,dist.XI)("spellCreate"),connectionDelete:(0,dist.XI)("connectionDelete"),connectionCreate:(0,dist.XI)("connectionCreate"),spellClassClick:(0,dist.XI)("spellClassClick")}}),Default=Template.bind({});Default.args={};const NoPermissions=Template.bind({});NoPermissions.args={canUpdate:!1,canCreate:!1,canDelete:!1};const NoSpells=Template.bind({});NoSpells.args={spells:[]};const __namedExportsOrder=["Default","NoPermissions","NoSpells"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args,\n    spellDelete: action('spellDelete'),\n    spellUpdate: action('spellUpdate'),\n    spellCreate: action('spellCreate'),\n    connectionDelete: action('connectionDelete'),\n    connectionCreate: action('connectionCreate'),\n    spellClassClick: action('spellClassClick')\n  }\n})",...Default.parameters?.docs?.source}}},NoPermissions.parameters={...NoPermissions.parameters,docs:{...NoPermissions.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args,\n    spellDelete: action('spellDelete'),\n    spellUpdate: action('spellUpdate'),\n    spellCreate: action('spellCreate'),\n    connectionDelete: action('connectionDelete'),\n    connectionCreate: action('connectionCreate'),\n    spellClassClick: action('spellClassClick')\n  }\n})",...NoPermissions.parameters?.docs?.source}}},NoSpells.parameters={...NoSpells.parameters,docs:{...NoSpells.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args,\n    spellDelete: action('spellDelete'),\n    spellUpdate: action('spellUpdate'),\n    spellCreate: action('spellCreate'),\n    connectionDelete: action('connectionDelete'),\n    connectionCreate: action('connectionCreate'),\n    spellClassClick: action('spellClassClick')\n  }\n})",...NoSpells.parameters?.docs?.source}}}},"./src/design/organisms/spells/spells.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".list__button {\n  margin-bottom: var(--spacer-3);\n}\n.list__button--button {\n  width: fit-content;\n}\n\n.spell-card {\n  margin-bottom: var(--spacer-3);\n}\n.spell-card__heading {\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n}\n.spell-card__heading-text {\n  flex: 1;\n  text-align: start;\n}\n.spell-card__classes {\n  max-width: 50%;\n  display: flex;\n  flex-direction: row;\n  justify-content: end;\n  flex-wrap: wrap;\n  gap: var(--spacer-1);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);
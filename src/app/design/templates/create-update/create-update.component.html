<app-page-container>
  <article class="container create-update">
    <h1 class="create-update__heading heading">
      
      <span class="heading__text">
        {{ heading }}
      </span>  
      <!-- Heading -->
      <div class="heading__edit-cancel">
        <app-button
          (click)="onCancel()"
          [icon]="'times'"
          [type]="'SECONDARY'"
        ></app-button>
      </div>
    </h1>
  
    <!-- Form -->
    <ng-container [ngSwitch]="state">
      <ng-container 
        *ngSwitchCase="'CREATE'"
        [ngTemplateOutlet]="createUpdateForm"
      ></ng-container>
      <ng-container 
        *ngSwitchCase="'UPDATE'"
        [ngTemplateOutlet]="createUpdateForm"
      ></ng-container>
      <ng-container 
        *ngSwitchCase="'OUTDATED_UPDATE'"
        [ngTemplateOutlet]="outdatedUpdateForm"
      ></ng-container>
    </ng-container>
    
  </article>
</app-page-container>

<ng-template #createUpdateForm>
  <app-form
    [model]="userModel" 
    [fields]="formlyFields" 
    (formlySubmit)="onSubmit($event)" 
    (formlyCancel)="onCancel()"
  ></app-form>
</ng-template>

<ng-template #outdatedUpdateForm>
  <app-compare-form
    [fields]="formlyFields"
    [modelFromUser]="userModel"
    [modelFromServer]="serverModel"
    (formlySubmit)="onSubmit($event)"
    (formlyCancel)="onCancel()"
  ></app-compare-form>
</ng-template>
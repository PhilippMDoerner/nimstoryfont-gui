(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[9149],{"./src/app/_services/routing.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>RoutingService});var RoutingService_1,tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),src_utils_logging__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/logging.ts"),src_utils_object__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/object.ts");let RoutingService=class RoutingService{static{RoutingService_1=this}constructor(router){this.router=router,this.NONE_STRING="None",this.routeNodes=this.getRouteTree(),(0,src_utils_logging__WEBPACK_IMPORTED_MODULE_0__.R)(`${RoutingService_1.name}-routeNodes`,this.routeNodes)}routeToPath(routeName,params){(0,src_utils_logging__WEBPACK_IMPORTED_MODULE_0__.R)(RoutingService_1.name,`Routing to ${routeName}`);const routePath=this.getRoutePath(routeName,params),cleanedObjectUrl=this.replaceSpecialUnicodeCharacters(routePath);this.router.navigateByUrl(cleanedObjectUrl)}getRoutePath(routeName,params={}){let variableRoutePath=this.getVariableRoutePathByName(routeName);if(this.hasPathVariables(variableRoutePath)){const variableNames=this.getPathVariableNames(variableRoutePath);for(let variableName of variableNames){const propertyKey=(0,src_utils_object__WEBPACK_IMPORTED_MODULE_1__.Ui)(params,variableName);if(null!=propertyKey)null===params[propertyKey]&&(params[propertyKey]=this.NONE_STRING),variableRoutePath=variableRoutePath.replace(`:${variableName}`,params[propertyKey]);else{const e=new Error(`Tried to create path for route '${routeName}' but lacked parameter '${variableName}' `);console.error(e,"Provided Params: ",params)}}}return`/${variableRoutePath}`}routeToErrorPage(error){if("number"!=typeof error&&!error.hasOwnProperty("status"))throw"Incorrect error input. The input does not contain an error status or an object with the error status. Can not route to error page without error status.";"number"!=typeof error&&error.hasOwnProperty("status")&&(error=error.status);const errorStatusParam=`${error}`;this.routeToPath("error",{errorStatus:errorStatusParam})}routeNameMatches(route,routeName){return route.snapshot.data.name===routeName}replaceSpecialUnicodeCharacters(routePath){return routePath.replace("(","%28").replace(")","%29").replace("?","?").replace("â€ ","%E2%80%A0")}getVariableRoutePathByName(routeName){return this.getVariableRouteByName(routeName).fullPath}getVariableRouteByName(routeName){const route=this.routeNodes[routeName];if(null==route)throw`There is no route with the name ${routeName}. Please contact the Developer to use either a different route name or create a route for this name.`;return route}hasPathVariables(routePath){return routePath.includes("/:")}hasRoutePath(routeName){return null!=this.routeNodes[routeName]}getEndRoutes(route,parentPath=""){let path="";parentPath&&route.path?path=`${parentPath}/${route.path}`:parentPath?path=parentPath:route.path&&(path=route.path);return null==route.children?[{route,fullPath:path}]:route.children.map((route=>this.getEndRoutes(route,path))).flat()}getPathVariableNames(routePath){const pathVariables=routePath.split("/").filter((segment=>segment.startsWith(":")));return pathVariables.map((segment=>segment.slice(1)))}getRouteTree(){return this.router.config.map((route=>this.getEndRoutes(route))).flat().reduce(((acc,route)=>{const routeName=route.route?.data?.name;return null!=routeName&&(acc[routeName]=route),acc}),{})}static{this.ctorParameters=()=>[{type:_angular_router__WEBPACK_IMPORTED_MODULE_2__.Ix}]}};RoutingService=RoutingService_1=(0,tslib__WEBPACK_IMPORTED_MODULE_3__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.Injectable)({providedIn:"root"})],RoutingService)},"./src/utils/object.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ui:()=>getCorrectKey,p:()=>getNestedProperty});var _string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/string.ts");function getCorrectKey(obj,key){if(key in obj)return key;const snakeCaseKey=(0,_string__WEBPACK_IMPORTED_MODULE_0__.C8)(key);if(snakeCaseKey in obj)return snakeCaseKey;const camelCaseKey=(0,_string__WEBPACK_IMPORTED_MODULE_0__.sF)(key);return camelCaseKey in obj?camelCaseKey:void 0}function getNestedProperty(item,keyPath){const keys=keyPath.split(".");let currentValue=item;for(let key of keys){if(!(key in currentValue)){throw new Error(`Cannot find nested property '${keyPath}' in '${JSON.stringify(item)}'`)}currentValue=currentValue[key]}return currentValue}},"./src/design/organisms/sessionaudio-card/sessionaudio-card.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>sessionaudio_card_stories});var testing=__webpack_require__("./node_modules/@angular/router/fesm2022/testing.mjs"),dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),formly_constants=__webpack_require__("./src/app/_modules/formly_constants.ts"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var sessionaudio_card_componentngResource=__webpack_require__("./src/design/organisms/sessionaudio-card/sessionaudio-card.component.scss?ngResource"),sessionaudio_card_componentngResource_default=__webpack_require__.n(sessionaudio_card_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),routing_service=__webpack_require__("./src/app/_services/routing.service.ts"),button_component=__webpack_require__("./src/design/atoms/button/button.component.ts");let SessionaudioCardComponent=class SessionaudioCardComponent{constructor(routingService){this.routingService=routingService,this.serverUrl=core.input.required(),this.sessionAudio=core.input.required(),this.sessionAudioUrl=(0,core.computed)((()=>{const campaignName=this.sessionAudio().campaign_details?.name,isMainSession=this.sessionAudio().session_details?.is_main_session_int,sessionNumber=this.sessionAudio().session_details?.session_number;return this.routingService.getRoutePath("sessionaudio",{campaign:campaignName,isMainSession,sessionNumber})}))}static{this.ctorParameters=()=>[{type:routing_service.O}]}static{this.propDecorators={serverUrl:[{type:core.Input,args:[{isSignal:!0,alias:"serverUrl",required:!0,transform:void 0}]}],sessionAudio:[{type:core.Input,args:[{isSignal:!0,alias:"sessionAudio",required:!0,transform:void 0}]}]}}};SessionaudioCardComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-sessionaudio-card",template:'<div class="card">\n  \x3c!-- Card Title --\x3e\n  <div class="card-header">\n    <h4 class="card-title">{{ sessionAudio().name }}</h4>\n  </div>\n\n  \x3c!-- Card Body --\x3e\n  <div class="card-body">\n    <a [routerLink]="sessionAudioUrl()" class="card-link">\n      <button\n        btn\n        [icon]="\'desktop\'"\n        [text]="\'Stream\'"\n        [kind]="\'PRIMARY\'"\n      ></button>\n    </a>\n\n    <a\n      [href]="serverUrl() + \'/\' + sessionAudio().download_url"\n      target="_blank"\n      class="card-link"\n    >\n      <button\n        btn\n        [icon]="\'download\'"\n        [text]="\'Download\'"\n        [kind]="\'DARK\'"\n      ></button>\n    </a>\n  </div>\n</div>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,standalone:!0,imports:[button_component.Q,router.Wk],styles:[sessionaudio_card_componentngResource_default()]})],SessionaudioCardComponent);const sessionaudio_card_stories={title:"DesignSystem/Organisms/SessionaudioCardComponent",component:SessionaudioCardComponent,decorators:[(0,dist.moduleMetadata)({imports:[testing.c,formly_constants.d_]})],args:{serverUrl:"https://www.aldrune.com",sessionAudio:{getAbsoluteRouterUrl:()=>"/sessionaudio/456",article_type:"audio",name:"Audio of Main Session 83",pk:1001,name_full:"The Adventure Begins - Session 1",description:"The first session of our epic D&D campaign",update_datetime:"2022-01-01T10:00:00Z",session_details:{pk:1,session_number:1,is_main_session:!0,is_main_session_int:1},audio_url:"dnd-session-1-audio.mp3",download_url:"dnd-session-1-audio-download.mp3",campaign_details:{id:100,name:"The Chronicles of Adventure"}}}},Default=(args=>({props:{...args}})).bind({});Default.args={};const __namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args\n  }\n})",...Default.parameters?.docs?.source}}}},"./src/design/organisms/sessionaudio-card/sessionaudio-card.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".card-title {\n  text-align: center;\n  margin-bottom: var(--spacer-0);\n}\n.card-body {\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n.card-link {\n  text-align: center;\n  margin-bottom: var(--spacer-2);\n  margin-left: var(--spacer-0) !important;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);
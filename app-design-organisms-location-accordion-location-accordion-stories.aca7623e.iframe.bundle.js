"use strict";(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[1255],{"./src/app/design/organisms/location-accordion/location-accordion.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,NoLocations:()=>NoLocations,NoPermissions:()=>NoPermissions,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _angular_forms__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@angular/forms/fesm2020/forms.mjs"),_angular_router_testing__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@angular/router/fesm2020/testing.mjs"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@ng-bootstrap/ng-bootstrap/fesm2020/ng-bootstrap.mjs"),_ngx_formly_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@ngx-formly/core/fesm2020/ngx-formly-core.mjs"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),_storybook_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),_tinymce_tinymce_angular__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@tinymce/tinymce-angular/fesm2020/tinymce-tinymce-angular.mjs"),src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/app/_services/formly/validators.ts"),src_app_design_molecules__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/app/design/molecules/index.ts"),_design_atoms__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/app/design/atoms/index.ts"),_design_organisms__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/app/design/organisms/index.ts"),_location_location_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/app/design/organisms/location/location.component.ts");const dummyLocations=[{name:"The Dark Forest",name_full:"The Dark Forest",description:"<p>The Dark Forest is a dense, sprawling forest shrouded in perpetual mist and darkness. It is said that those who enter the forest are never seen again, their screams echoing through the trees for eternity.</p><p>Legends speak of ancient curses and malevolent spirits haunting the forest, and travelers are warned to stay away. However, some brave or foolish souls venture into the forest in search of rare herbs and magical artifacts, risking life and limb to uncover its secrets.</p><p>Rumors also abound of a hidden village deep within the forest, where a secretive society of druids and witches practice forbidden magic and worship dark deities.</p>",parent_location:1,images:[],parent_location_details:{pk:1,name:"The Kingdom of Eldrid",parent_location:"",name_full:"The Kingdom of Eldrid"},parent_location_list:["The Kingdom of Eldrid","The Northern Territories"],characters:[{name:"Elena",pk:123,name_full:"Elena, the Witch of the Dark Forest"},{name:"Thorne",pk:456,name_full:"Thorne, the Shadow Assassin"}],sublocations:[{creation_datetime:"2022-03-15T10:22:34.567Z",update_datetime:"2022-05-01T14:12:45.678Z",name:"The Witch's Hut",pk:789,characters:[{name:"Morgana",pk:234,name_full:"Morgana, the Dark Witch"}],name_full:"The Witch's Hut in the Dark Forest",description:"\n          <p>\n            The Witch's Hut is a small, dilapidated cabin hidden deep in the heart of the Dark Forest. \n            It is said to be the dwelling place of Elena, the Witch of the Dark Forest, who brews powerful potions and performs arcane rituals within its walls.\n          </p>\n          \n          <p>\n            The hut is surrounded by twisted trees and eerie toadstools, and the air is thick with the scent of herbs and incense. \n            Visitors are warned to approach with caution, as Elena is known to be both unpredictable and dangerous.\n          </p>\n        ",parent_location:2,getAbsoluteRouterUrl:()=>"/locations/the-kingdom-of-eldrid"}],marker_details:[{map:"The Kingdom of Eldrid",map_icon:"https://example.com/dark-forest-icon.png"}],getAbsoluteRouterUrl:()=>"/locations/the-kingdom-of-eldrid",getAbsoluteRouterUrlForParentLocation:()=>"/locations/the-kingdom-of-eldrid"},{name:"Dragon's Lair",name_full:"Dragon's Lair",description:"<p>The Dragon's Lair is a massive cavern deep within a mountain range, filled with glittering treasures and the bones of unlucky adventurers. The lair is home to a powerful dragon, feared throughout the land for its fiery breath and razor-sharp claws.</p><p>Legends say that the dragon guards a magical artifact of immense power, capable of granting wishes or unleashing destruction upon the world. Many brave heroes have attempted to slay the dragon and claim the artifact, but none have returned alive.</p><p>The lair itself is a maze of twisting tunnels and treacherous traps, with pools of lava and poisonous gas waiting to ensnare the unwary. Only the bravest and most skilled adventurers stand a chance of surviving the dragon's deadly lair.</p>",parent_location:2,images:[],parent_location_details:{pk:2,name:"The Kingdom of Aloria",parent_location:"",name_full:"The Kingdom of Aloria"},parent_location_list:["The Kingdom of Aloria","The Mountains of Doom"],characters:[{name:"Gareth",pk:345,name_full:"Gareth, the Dragonslayer"},{name:"Kaida",pk:678,name_full:"Kaida, the Fire Mage"}],sublocations:[{creation_datetime:"2022-06-10T09:15:23.456Z",update_datetime:"2022-06-10T09:15:23.456Z",name:"The Dragon's Hoard",pk:890,characters:[{name:"Smaug",pk:123,name_full:"Smaug, the Dragon"}],name_full:"The Dragon's Hoard in the Dragon's Lair",description:"<p>The Dragon's Hoard is a vast chamber filled with gold, jewels, and magical artifacts, all stolen from hapless adventurers and nearby kingdoms. The hoard is guarded by Smaug, the fearsome dragon, who sleeps atop a massive pile of treasure.</p><p>Many have attempted to steal from the hoard, but none have succeeded. The hoard is protected by magical wards and traps, and Smaug is always watching, ready to unleash his fiery wrath upon any intruders.</p>",parent_location:6,getAbsoluteRouterUrl:()=>"/locations/the-kingdom-of-eldrid"}],marker_details:[{map:"The Kingdom of Aloria",map_icon:"https://example.com/dragons-lair-icon.png"}],getAbsoluteRouterUrl:()=>"/locations/the-kingdom-of-eldrid",getAbsoluteRouterUrlForParentLocation:()=>"/locations/the-kingdom-of-aloria"},{name:"The Black Tower",name_full:"The Black Tower",description:"<p>The Black Tower looms high above the surrounding forest, casting a long shadow over the land. It is said to be the home of an ancient sorcerer, who uses dark magic to control the minds of his enemies.</p><p>Many brave warriors have tried to storm the tower and defeat the sorcerer, but few have returned. The tower is guarded by powerful spells and fierce creatures, making it an almost impenetrable fortress.</p><p>Despite its ominous reputation, some say that the sorcerer is not evil, but merely misunderstood. Others claim that he possesses untold wealth and knowledge, making the risk of attempting to enter the tower worth the reward.</p>",parent_location:4,images:[],parent_location_details:{pk:4,name:"The Kingdom of Norgard",parent_location:"",name_full:"The Kingdom of Norgard"},parent_location_list:["The Kingdom of Norgard"],characters:[{name:"Aria",pk:345,name_full:"Aria, the Enchantress"},{name:"Garrick",pk:678,name_full:"Garrick, the Dark Knight"}],sublocations:[{creation_datetime:"2023-01-01T09:00:00.000Z",update_datetime:"2023-01-01T09:00:00.000Z",name:"The Sorcerer's Study",pk:890,characters:[{name:"Zoltar",pk:123,name_full:"Zoltar, the Sorcerer"}],name_full:"The Sorcerer's Study in the Black Tower",description:"A dark and musty room filled with dusty tomes and strange artifacts.",parent_location:6,getAbsoluteRouterUrl:()=>"/locations/the-kingdom-of-eldrid"}],marker_details:[{map:"The Kingdom of Norgard",map_icon:"https://example.com/black-tower-icon.png"}],getAbsoluteRouterUrl:()=>"/locations/the-kingdom-of-eldrid",getAbsoluteRouterUrlForParentLocation:()=>"/locations/the-kingdom-of-norgard"}],__WEBPACK_DEFAULT_EXPORT__={title:"DesignSystem/Organisms/LocationAccordionComponent",component:__webpack_require__("./src/app/design/organisms/location-accordion/location-accordion.component.ts").W,decorators:[(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_1__.moduleMetadata)({imports:[_design_atoms__WEBPACK_IMPORTED_MODULE_4__.cg,src_app_design_molecules__WEBPACK_IMPORTED_MODULE_3__._V,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_8__.IJ,_tinymce_tinymce_angular__WEBPACK_IMPORTED_MODULE_9__.Z_,_angular_router_testing__WEBPACK_IMPORTED_MODULE_10__.Z_,_angular_forms__WEBPACK_IMPORTED_MODULE_11__.u5,_angular_forms__WEBPACK_IMPORTED_MODULE_11__.UX,_ngx_formly_core__WEBPACK_IMPORTED_MODULE_12__.X0.forRoot({types:[{name:"text-editor",component:_design_organisms__WEBPACK_IMPORTED_MODULE_5__.nC}],validationMessages:[src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.Bw,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.l$],validators:[src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.np,src_app_services_formly_validators__WEBPACK_IMPORTED_MODULE_2__.x5]})],declarations:[_design_organisms__WEBPACK_IMPORTED_MODULE_5__.nC,_location_location_component__WEBPACK_IMPORTED_MODULE_6__.n]})],args:{locations:dummyLocations,canCreate:!0}},Template=args=>({props:{...args,connectionDelete:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.aD)("connectionDelete"),connectionCreate:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.aD)("connectionCreate"),encounterDelete:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.aD)("encounterDelete"),encounterUpdate:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.aD)("encounterUpdate")}}),Default=Template.bind({});Default.args={};const NoPermissions=Template.bind({});NoPermissions.args={canCreate:!1};const NoLocations=Template.bind({});NoLocations.args={locations:[]}},"./src/app/_services/formly/validators.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Be:()=>requiredIconMessage,Bo:()=>fieldsDontMatchMessage,Bw:()=>requiredMessage,Ds:()=>hasSpecialCharactersMessage,K7:()=>requiredIconValidator,Kg:()=>sessionAuthorUniqueValidator,U3:()=>iconValidator,UP:()=>invalidTimeMessage,YM:()=>timeValidator,_7:()=>fieldMatchValidator,cc:()=>specialCharacterValidator,eS:()=>sessionAlreadyHasAuthor,l$:()=>notIntegerMessage,np:()=>requiredValidator,ol:()=>dateMessage,sm:()=>dateValidator,ud:()=>faPrefixMessage,x5:()=>integerValidator});var _home_runner_work_nimstoryfont_gui_nimstoryfont_gui_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");const invalidTimeMessage={name:"time",message:"Time must have 'hh:mm:ss' pattern"},requiredMessage={name:"required",message:"This field is required!"},dateMessage={name:"date",message:"This date does not follow the pattern: 'YYYY-MM-DD'. Sorry to be such a Nazi about it. The computer is forcing me."},requiredIconMessage={name:"requiredIcon",message:"This field requires a fontawesome icon as input. Here is a list of them: https://fontawesome.com/v4.7.0/icons/"},faPrefixMessage={name:"faPrefix",message:"Icons are stored without the 'fa-' from font-awesome prefix"},notIntegerMessage={name:"notInteger",message:"Your input is not an integer. This field requires an integer number. No amount of revolution can overcome this."},hasSpecialCharactersMessage={name:"hasSpecialCharacters",message:'Your input includes one of the following invalid special characters: [ ] ( ) ? | \\ " % ~ # < > :. If you need to rebel, please dont against this.'},fieldsDontMatchMessage={name:"fieldMatch",message:"Password Not Matching"},sessionAlreadyHasAuthor={name:"isInvalidSessionAuthorPair",message:"\n    The author you selected already has a diaryentry in the session you selected. You \n    can't have 2 diaryentries from the same author in the same session. Consider writing \n    your diaryentry as an encounter instead into the diaryentry at the spot you just considered."};const timeValidator={name:"time",validation:function timeValidation(control){const isValidTime=/\d\d.[0-5]\d.[0-5]\d/.test(control.value);return isValidTime?null:{time:!isValidTime}}};function requiredValidation(control){return!!control.value||0===control.value?null:{required:!0}}const requiredValidator={name:"required",validation:requiredValidation},requiredIconValidator={name:"requiredIcon",validation:requiredValidation};const dateValidator={name:"date",validation:function dateValidation(control){return/[1-2]\d{3}-(0\d|1[0-2])-[0-3]\d/.test(control.value)?null:{date:!0}}};const iconValidator={name:"faPrefix",validation:function iconValidation(control){const hasFaPrefix=/fa-/.test(control.value);return hasFaPrefix?null:{faPrefix:hasFaPrefix}}};const integerValidator={name:"notInteger",validation:function isIntegerValidation(control){const isInteger="number"==typeof control.value&&Number.isInteger(control.value);return isInteger?null:{notInteger:!isInteger}}};const specialCharacterValidator={name:"hasSpecialCharacters",validation:function hasNoSpecialCharactersValidation(control){if("string"==typeof control.value){const specialCharacters=["[","]","(",")","|","\\",'"',"%","~","#","<",">","?","/",":"];for(const specialCharacter of specialCharacters)if(control.value.includes(specialCharacter))return{hasSpecialCharacters:!0}}return null}};const fieldMatchValidator={name:"fieldMatch",validation:function passwordMatchValidation(control){const{password,passwordConfirm}=control.value;return passwordConfirm&&password?passwordConfirm===password?{passwordMatch:!0}:null:{passwordMatch:!0}}};function _isSessionAuthorPairUniqueValidator(){return(_isSessionAuthorPairUniqueValidator=(0,_home_runner_work_nimstoryfont_gui_nimstoryfont_gui_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.Z)((function*(control){const{session:selectedSessionId,author:selectedAuthorId}=control.value,selectFieldOptionsObs=control.controls.session._fields[0].templateOptions.options,selectedOption=(yield selectFieldOptionsObs.toPromise()).find((option=>option.pk===selectedSessionId));if(null==selectedOption)throw"WeirdError. You selected a session, its id got into the model and somehow that field is no longer among the options (?)";const selectedAuthorAlreadyHasDiaryentryOnSession=selectedOption.author_ids.includes(selectedAuthorId),isInitialValue=control.pristine;return selectedAuthorAlreadyHasDiaryentryOnSession&&!isInitialValue?{passwordMatch:{message:"That account already has a diaryentry written for that session. Accounts can only have one Diaryentry per session"}}:{passwordMatch:null}}))).apply(this,arguments)}const sessionAuthorUniqueValidator={name:"sessionAuthorPairUnique",validation:function isSessionAuthorPairUniqueValidator(_x){return _isSessionAuthorPairUniqueValidator.apply(this,arguments)}}},"./node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aD:()=>chunk_KKE3V3AL.aD});var chunk_KKE3V3AL=__webpack_require__("./node_modules/@storybook/addon-actions/dist/chunk-KKE3V3AL.mjs");__webpack_require__("./node_modules/@storybook/addon-actions/dist/chunk-VWCVBQ22.mjs")}}]);
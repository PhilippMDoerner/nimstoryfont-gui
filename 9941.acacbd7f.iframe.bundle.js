"use strict";(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[9941],{"./node_modules/@tinymce/tinymce-angular/fesm2020/tinymce-tinymce-angular.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z_:()=>EditorModule,f8:()=>TINYMCE_SCRIPT_SRC});var core=__webpack_require__("./node_modules/@angular/core/fesm2020/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2020/common.mjs"),fesm2020_forms=__webpack_require__("./node_modules/@angular/forms/fesm2020/forms.mjs"),fromEvent=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js"),defer=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/defer.js"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),takeUntil=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),take=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/take.js"),mapTo=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/mapTo.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js"),dateTimestampProvider=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/scheduler/dateTimestampProvider.js"),ReplaySubject=function(_super){function ReplaySubject(_bufferSize,_windowTime,_timestampProvider){void 0===_bufferSize&&(_bufferSize=1/0),void 0===_windowTime&&(_windowTime=1/0),void 0===_timestampProvider&&(_timestampProvider=dateTimestampProvider.l);var _this=_super.call(this)||this;return _this._bufferSize=_bufferSize,_this._windowTime=_windowTime,_this._timestampProvider=_timestampProvider,_this._buffer=[],_this._infiniteTimeWindow=!0,_this._infiniteTimeWindow=_windowTime===1/0,_this._bufferSize=Math.max(1,_bufferSize),_this._windowTime=Math.max(1,_windowTime),_this}return(0,tslib_es6.ZT)(ReplaySubject,_super),ReplaySubject.prototype.next=function(value){var _a=this,isStopped=_a.isStopped,_buffer=_a._buffer,_infiniteTimeWindow=_a._infiniteTimeWindow,_timestampProvider=_a._timestampProvider,_windowTime=_a._windowTime;isStopped||(_buffer.push(value),!_infiniteTimeWindow&&_buffer.push(_timestampProvider.now()+_windowTime)),this._trimBuffer(),_super.prototype.next.call(this,value)},ReplaySubject.prototype._subscribe=function(subscriber){this._throwIfClosed(),this._trimBuffer();for(var subscription=this._innerSubscribe(subscriber),_infiniteTimeWindow=this._infiniteTimeWindow,copy=this._buffer.slice(),i=0;i<copy.length&&!subscriber.closed;i+=_infiniteTimeWindow?1:2)subscriber.next(copy[i]);return this._checkFinalizedStatuses(subscriber),subscription},ReplaySubject.prototype._trimBuffer=function(){var _bufferSize=this._bufferSize,_timestampProvider=this._timestampProvider,_buffer=this._buffer,_infiniteTimeWindow=this._infiniteTimeWindow,adjustedBufferSize=(_infiniteTimeWindow?1:2)*_bufferSize;if(_bufferSize<1/0&&adjustedBufferSize<_buffer.length&&_buffer.splice(0,_buffer.length-adjustedBufferSize),!_infiniteTimeWindow){for(var now=_timestampProvider.now(),last=0,i=1;i<_buffer.length&&_buffer[i]<=now;i+=2)last=i;last&&_buffer.splice(0,last+1)}},ReplaySubject}(Subject.x),share=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/share.js");function EditorComponent_ng_template_0_Template(rf,ctx){}const getTinymce=()=>{const w="undefined"!=typeof window?window:void 0;return w&&w.tinymce?w.tinymce:null};class Events{constructor(){this.onBeforePaste=new core.EventEmitter,this.onBlur=new core.EventEmitter,this.onClick=new core.EventEmitter,this.onContextMenu=new core.EventEmitter,this.onCopy=new core.EventEmitter,this.onCut=new core.EventEmitter,this.onDblclick=new core.EventEmitter,this.onDrag=new core.EventEmitter,this.onDragDrop=new core.EventEmitter,this.onDragEnd=new core.EventEmitter,this.onDragGesture=new core.EventEmitter,this.onDragOver=new core.EventEmitter,this.onDrop=new core.EventEmitter,this.onFocus=new core.EventEmitter,this.onFocusIn=new core.EventEmitter,this.onFocusOut=new core.EventEmitter,this.onKeyDown=new core.EventEmitter,this.onKeyPress=new core.EventEmitter,this.onKeyUp=new core.EventEmitter,this.onMouseDown=new core.EventEmitter,this.onMouseEnter=new core.EventEmitter,this.onMouseLeave=new core.EventEmitter,this.onMouseMove=new core.EventEmitter,this.onMouseOut=new core.EventEmitter,this.onMouseOver=new core.EventEmitter,this.onMouseUp=new core.EventEmitter,this.onPaste=new core.EventEmitter,this.onSelectionChange=new core.EventEmitter,this.onActivate=new core.EventEmitter,this.onAddUndo=new core.EventEmitter,this.onBeforeAddUndo=new core.EventEmitter,this.onBeforeExecCommand=new core.EventEmitter,this.onBeforeGetContent=new core.EventEmitter,this.onBeforeRenderUI=new core.EventEmitter,this.onBeforeSetContent=new core.EventEmitter,this.onChange=new core.EventEmitter,this.onClearUndos=new core.EventEmitter,this.onDeactivate=new core.EventEmitter,this.onDirty=new core.EventEmitter,this.onExecCommand=new core.EventEmitter,this.onGetContent=new core.EventEmitter,this.onHide=new core.EventEmitter,this.onInit=new core.EventEmitter,this.onInitNgModel=new core.EventEmitter,this.onLoadContent=new core.EventEmitter,this.onNodeChange=new core.EventEmitter,this.onPostProcess=new core.EventEmitter,this.onPostRender=new core.EventEmitter,this.onPreInit=new core.EventEmitter,this.onPreProcess=new core.EventEmitter,this.onProgressState=new core.EventEmitter,this.onRedo=new core.EventEmitter,this.onRemove=new core.EventEmitter,this.onReset=new core.EventEmitter,this.onResizeEditor=new core.EventEmitter,this.onSaveContent=new core.EventEmitter,this.onSetAttrib=new core.EventEmitter,this.onObjectResizeStart=new core.EventEmitter,this.onObjectResized=new core.EventEmitter,this.onObjectSelected=new core.EventEmitter,this.onSetContent=new core.EventEmitter,this.onShow=new core.EventEmitter,this.onSubmit=new core.EventEmitter,this.onUndo=new core.EventEmitter,this.onVisualAid=new core.EventEmitter}}Events.ɵfac=function Events_Factory(t){return new(t||Events)},Events.ɵdir=core["ɵɵdefineDirective"]({type:Events,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](Events,[{type:core.Directive}],null,{onBeforePaste:[{type:core.Output}],onBlur:[{type:core.Output}],onClick:[{type:core.Output}],onContextMenu:[{type:core.Output}],onCopy:[{type:core.Output}],onCut:[{type:core.Output}],onDblclick:[{type:core.Output}],onDrag:[{type:core.Output}],onDragDrop:[{type:core.Output}],onDragEnd:[{type:core.Output}],onDragGesture:[{type:core.Output}],onDragOver:[{type:core.Output}],onDrop:[{type:core.Output}],onFocus:[{type:core.Output}],onFocusIn:[{type:core.Output}],onFocusOut:[{type:core.Output}],onKeyDown:[{type:core.Output}],onKeyPress:[{type:core.Output}],onKeyUp:[{type:core.Output}],onMouseDown:[{type:core.Output}],onMouseEnter:[{type:core.Output}],onMouseLeave:[{type:core.Output}],onMouseMove:[{type:core.Output}],onMouseOut:[{type:core.Output}],onMouseOver:[{type:core.Output}],onMouseUp:[{type:core.Output}],onPaste:[{type:core.Output}],onSelectionChange:[{type:core.Output}],onActivate:[{type:core.Output}],onAddUndo:[{type:core.Output}],onBeforeAddUndo:[{type:core.Output}],onBeforeExecCommand:[{type:core.Output}],onBeforeGetContent:[{type:core.Output}],onBeforeRenderUI:[{type:core.Output}],onBeforeSetContent:[{type:core.Output}],onChange:[{type:core.Output}],onClearUndos:[{type:core.Output}],onDeactivate:[{type:core.Output}],onDirty:[{type:core.Output}],onExecCommand:[{type:core.Output}],onGetContent:[{type:core.Output}],onHide:[{type:core.Output}],onInit:[{type:core.Output}],onInitNgModel:[{type:core.Output}],onLoadContent:[{type:core.Output}],onNodeChange:[{type:core.Output}],onPostProcess:[{type:core.Output}],onPostRender:[{type:core.Output}],onPreInit:[{type:core.Output}],onPreProcess:[{type:core.Output}],onProgressState:[{type:core.Output}],onRedo:[{type:core.Output}],onRemove:[{type:core.Output}],onReset:[{type:core.Output}],onResizeEditor:[{type:core.Output}],onSaveContent:[{type:core.Output}],onSetAttrib:[{type:core.Output}],onObjectResizeStart:[{type:core.Output}],onObjectResized:[{type:core.Output}],onObjectSelected:[{type:core.Output}],onSetContent:[{type:core.Output}],onShow:[{type:core.Output}],onSubmit:[{type:core.Output}],onUndo:[{type:core.Output}],onVisualAid:[{type:core.Output}]});const validEvents=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],listenTinyMCEEvent=(editor,eventName,destroy$)=>(0,fromEvent.R)(editor,eventName).pipe((0,takeUntil.R)(destroy$)),getValidEvents=ctx=>{const ignoredEvents=parseStringProperty(ctx.ignoreEvents,[]);return parseStringProperty(ctx.allowedEvents,validEvents).filter((event=>validEvents.includes(event)&&!ignoredEvents.includes(event)))},parseStringProperty=(property,defaultValue)=>"string"==typeof property?property.split(",").map((value=>value.trim())):Array.isArray(property)?property:defaultValue;let unique=0;const isTextarea=element=>void 0!==element&&"textarea"===element.tagName.toLowerCase(),normalizePluginArray=plugins=>void 0===plugins||""===plugins?[]:Array.isArray(plugins)?plugins:plugins.split(" "),noop=()=>{},isNullOrUndefined=value=>null==value,ScriptLoader=(()=>{let state={script$:null};return{load:(doc,url)=>state.script$||(state.script$=(0,defer.P)((()=>{const scriptTag=doc.createElement("script");return scriptTag.referrerPolicy="origin",scriptTag.type="application/javascript",scriptTag.src=url,doc.head.appendChild(scriptTag),(0,fromEvent.R)(scriptTag,"load").pipe((0,take.q)(1),(0,mapTo.h)(void 0))})).pipe(function shareReplay(configOrBufferSize,windowTime,scheduler){var _a,_b,_c,bufferSize,refCount=!1;return configOrBufferSize&&"object"==typeof configOrBufferSize?(_a=configOrBufferSize.bufferSize,bufferSize=void 0===_a?1/0:_a,_b=configOrBufferSize.windowTime,windowTime=void 0===_b?1/0:_b,refCount=void 0!==(_c=configOrBufferSize.refCount)&&_c,scheduler=configOrBufferSize.scheduler):bufferSize=null!=configOrBufferSize?configOrBufferSize:1/0,(0,share.B)({connector:function(){return new ReplaySubject(bufferSize,windowTime,scheduler)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:refCount})}({bufferSize:1,refCount:!0}))),reinitialize:()=>{state={script$:null}}}})(),TINYMCE_SCRIPT_SRC=new core.InjectionToken("TINYMCE_SCRIPT_SRC"),EDITOR_COMPONENT_VALUE_ACCESSOR={provide:fesm2020_forms.JU,useExisting:(0,core.forwardRef)((()=>EditorComponent)),multi:!0};class EditorComponent extends Events{constructor(elementRef,ngZone,platformId,tinymceScriptSrc){super(),this.platformId=platformId,this.tinymceScriptSrc=tinymceScriptSrc,this.cloudChannel="6",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=noop,this.destroy$=new Subject.x,this.initialise=()=>{const finalInit={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,plugins:(initPlugins=this.init&&this.init.plugins,inputPlugins=this.plugins,normalizePluginArray(initPlugins).concat(normalizePluginArray(inputPlugins))),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:editor=>{this._editor=editor,listenTinyMCEEvent(editor,"init",this.destroy$).subscribe((()=>{this.initEditor(editor)})),((ctx,editor,destroy$)=>{getValidEvents(ctx).forEach((eventName=>{const eventEmitter=ctx[eventName];listenTinyMCEEvent(editor,eventName.substring(2),destroy$).subscribe((event=>{eventEmitter.observers.length>0&&ctx.ngZone.run((()=>eventEmitter.emit({event,editor})))}))}))})(this,editor,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(editor)}};var initPlugins,inputPlugins;isTextarea(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular((()=>{getTinymce().init(finalInit)}))},this._elementRef=elementRef,this.ngZone=ngZone}set disabled(val){this._disabled=val,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(val?"readonly":"design"):this._editor.setMode(val?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(value){this._editor&&this._editor.initialized?this._editor.setContent(isNullOrUndefined(value)?"":value):this.initialValue=null===value?void 0:value}registerOnChange(fn){this.onChangeCallback=fn}registerOnTouched(fn){this.onTouchedCallback=fn}setDisabledState(isDisabled){this.disabled=isDisabled}ngAfterViewInit(){(0,common.isPlatformBrowser)(this.platformId)&&(this.id=this.id||(prefix=>{const time=(new Date).getTime(),random=Math.floor(1e9*Math.random());return unique++,prefix+"_"+random+unique+String(time)})("tiny-angular"),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==getTinymce()?this.initialise():this._element&&this._element.ownerDocument&&ScriptLoader.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,takeUntil.R)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==getTinymce()&&getTinymce().remove(this._editor)}createElement(){const tagName="string"==typeof this.tagName?this.tagName:"div";this._element=document.createElement(this.inline?tagName:"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,isTextarea(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}getScriptSrc(){return isNullOrUndefined(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(editor){listenTinyMCEEvent(editor,"blur",this.destroy$).subscribe((()=>{this.ngZone.run((()=>this.onTouchedCallback()))})),listenTinyMCEEvent(editor,this.modelEvents,this.destroy$).subscribe((()=>{this.ngZone.run((()=>this.emitOnChange(editor)))})),"string"==typeof this.initialValue&&this.ngZone.run((()=>{editor.setContent(this.initialValue),editor.getContent()!==this.initialValue&&this.emitOnChange(editor),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(editor)}))}emitOnChange(editor){this.onChangeCallback&&this.onChangeCallback(editor.getContent({format:this.outputFormat}))}}EditorComponent.ɵfac=function EditorComponent_Factory(t){return new(t||EditorComponent)(core["ɵɵdirectiveInject"](core.ElementRef),core["ɵɵdirectiveInject"](core.NgZone),core["ɵɵdirectiveInject"](core.PLATFORM_ID),core["ɵɵdirectiveInject"](TINYMCE_SCRIPT_SRC,8))},EditorComponent.ɵcmp=core["ɵɵdefineComponent"]({type:EditorComponent,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[core["ɵɵProvidersFeature"]([EDITOR_COMPONENT_VALUE_ACCESSOR]),core["ɵɵInheritDefinitionFeature"],core["ɵɵStandaloneFeature"]],decls:1,vars:0,template:function EditorComponent_Template(rf,ctx){1&rf&&core["ɵɵtemplate"](0,EditorComponent_ng_template_0_Template,0,0,"ng-template")},dependencies:[common.CommonModule,fesm2020_forms.u5],styles:["[_nghost-%COMP%]{display:block}"]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](EditorComponent,[{type:core.Component,args:[{selector:"editor",template:"<ng-template></ng-template>",providers:[EDITOR_COMPONENT_VALUE_ACCESSOR],standalone:!0,imports:[common.CommonModule,fesm2020_forms.u5],styles:[":host{display:block}\n"]}]}],(function(){return[{type:core.ElementRef},{type:core.NgZone},{type:Object,decorators:[{type:core.Inject,args:[core.PLATFORM_ID]}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[TINYMCE_SCRIPT_SRC]}]}]}),{cloudChannel:[{type:core.Input}],apiKey:[{type:core.Input}],init:[{type:core.Input}],id:[{type:core.Input}],initialValue:[{type:core.Input}],outputFormat:[{type:core.Input}],inline:[{type:core.Input}],tagName:[{type:core.Input}],plugins:[{type:core.Input}],toolbar:[{type:core.Input}],modelEvents:[{type:core.Input}],allowedEvents:[{type:core.Input}],ignoreEvents:[{type:core.Input}],disabled:[{type:core.Input}]});class EditorModule{}EditorModule.ɵfac=function EditorModule_Factory(t){return new(t||EditorModule)},EditorModule.ɵmod=core["ɵɵdefineNgModule"]({type:EditorModule,imports:[EditorComponent],exports:[EditorComponent]}),EditorModule.ɵinj=core["ɵɵdefineInjector"]({imports:[EditorComponent]}),("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](EditorModule,[{type:core.NgModule,args:[{imports:[EditorComponent],exports:[EditorComponent]}]}],null,null)}}]);
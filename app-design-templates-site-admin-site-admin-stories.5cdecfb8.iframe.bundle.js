(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[1681],{"./src/app/_services/article/group.service.mock.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>dummyGroups});const dummyGroups=[{url:"https://example.com/group1",name:"Group 1",permissions:["read","write"],id:1},{url:"https://example.com/group2",name:"Group 2",permissions:["read","delete"],id:2},{url:"https://example.com/group3",name:"Group 3",permissions:["write","execute"],id:3},{url:"https://example.com/admin",name:"Admin",permissions:["read","write","delete","execute"],id:4},{url:"https://example.com/guest",name:"Guest",permissions:["read"],id:5},{url:"https://example.com/member",name:"Member",permissions:["read","write"],id:6}]},"./src/app/_services/article/user.mock.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>dummyUsers});const dummyUsers=[{username:"isofruit",pk:3,email:"philippmdoerner@web.de",is_staff:!0,is_superuser:!0,is_active:!0,groups:[3,4],group_details:[{name:"Aldrune_campaign_group",pk:3},{name:"Aldrune_campaign_admin_group",pk:4}]},{username:"Rhiannon",pk:6,email:"dianaday@gmx.net",is_staff:!1,is_superuser:!1,is_active:!0,groups:[3],group_details:[{name:"Aldrune_campaign_group",pk:3}]},{username:"SamDay",pk:7,email:void 0,is_staff:!0,is_superuser:!1,is_active:!0,groups:[],group_details:[]},{username:"Murtagh",pk:8,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[3,6],group_details:[{name:"Aldrune_campaign_group",pk:3},{name:"Jōzai Corporation_guest_campaign_group",pk:6}]},{username:"Ailis",pk:9,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[5],group_details:[{name:"Aldrune_guest_campaign_group",pk:5}]},{username:"Caitriona",pk:10,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[3,7,8],group_details:[{name:"Aldrune_campaign_group",pk:3},{name:"Jōzai Corporation_campaign_group",pk:7},{name:"Jōzai Corporation_campaign_admin_group",pk:8}]},{username:"Fen",pk:11,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[3],group_details:[{name:"Aldrune_campaign_group",pk:3}]},{username:"Bathilde",pk:12,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[3,7],group_details:[{name:"Aldrune_campaign_group",pk:3},{name:"Jōzai Corporation_campaign_group",pk:7}]},{username:"Guest",pk:14,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[5],group_details:[{name:"Aldrune_guest_campaign_group",pk:5}]},{username:"Relentless",pk:15,email:"philipp3000doerner@web.de",is_staff:!0,is_superuser:!1,is_active:!0,groups:[3],group_details:[{name:"Aldrune_campaign_group",pk:3}]},{username:"Guest2",pk:16,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[5],group_details:[{name:"Aldrune_guest_campaign_group",pk:5}]},{username:"Mipp1",pk:17,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[5],group_details:[{name:"Aldrune_guest_campaign_group",pk:5}]},{username:"Spleeti",pk:18,email:"Laura.spleet@posteo.de",is_staff:!1,is_superuser:!1,is_active:!0,groups:[5],group_details:[{name:"Aldrune_guest_campaign_group",pk:5}]},{username:"Christian",pk:19,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[5],group_details:[{name:"Aldrune_guest_campaign_group",pk:5}]},{username:"Norbert",pk:20,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[5],group_details:[{name:"Aldrune_guest_campaign_group",pk:5}]},{username:"Papa",pk:21,email:"Dr.KlemensDoerner@gmx.de",is_staff:!1,is_superuser:!1,is_active:!0,groups:[5],group_details:[{name:"Aldrune_guest_campaign_group",pk:5}]},{username:"Tecatin",pk:22,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[7],group_details:[{name:"Jōzai Corporation_campaign_group",pk:7}]},{username:"Roach",pk:23,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[5,7],group_details:[{name:"Aldrune_guest_campaign_group",pk:5},{name:"Jōzai Corporation_campaign_group",pk:7}]},{username:"Mav",pk:25,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[5],group_details:[{name:"Aldrune_guest_campaign_group",pk:5}]},{username:"Sam",pk:28,email:void 0,is_staff:!1,is_superuser:!1,is_active:!0,groups:[4],group_details:[{name:"Aldrune_campaign_admin_group",pk:4}]}]},"./src/app/_services/formly/formly-service.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>FormlyService});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),formly_select_disable_field_component=__webpack_require__("./src/app/design/organisms/formly-select-disable/formly-select-disable-field.component.ts");var string=__webpack_require__("./src/utils/string.ts");let FormlyService=class FormlyService{buildOverviewSelectConfig(config){const options$=config.required??!0?config.options$:this.addEmptyOption(config.options$,config),sortedOptions$=this.sortOptions(options$,config),validators=this.getValidators(config);return{key:config.key,type:"select",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,string.ZH)(`${config.key}`),labelProp:config.labelProp,valueProp:config.valueProp??"pk",options:sortedOptions$,required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildDisableSelectConfig(config){const options$=config.required??!0?config.options$:this.addEmptyOption(config.options$,config),sortedOptions$=this.sortOptions(options$,config),validators=this.getValidators(config);return{key:config.key,type:"select-disable",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,props:{label:config.label??(0,string.ZH)(`${config.key}`),labelProp:config.labelProp,valueProp:config.valueProp??"pk",options:sortedOptions$,required:config.required??!0,warningMessage:config.warningMessage,additionalProperties:{disabledExpression:config.disabledExpression,tooltipMessage:config.tooltipMessage??"",showWrapperLabel:config.showWrapperLabel??!0}},validators:{validation:validators}}}buildStaticSelectConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"select",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,props:{label:config.label??(0,string.ZH)(`${config.key}`),options:config.options,required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildStaticStringSelectConfig(partialConfig){let options=partialConfig.options.map((str=>({label:str,value:str})));const config={...partialConfig,options};return this.buildStaticSelectConfig(config)}buildInputConfig(config){const validators=this.getValidators(config);switch(config.inputKind){case"NUMBER":validators.push("notInteger");break;case"NAME":validators.push("hasSpecialCharacters");break;case"NUMBER_FRACTION":validators.push("notNumber")}let innerInputType;switch(config.inputKind){case"NUMBER":innerInputType="number";break;case"COLOR":innerInputType="color";break;default:innerInputType="string"}return{key:config.key,type:"input",className:config.className,wrappers:config.wrappers,hideExpression:config.hide??!1,parsers:config.parsers,props:{maxLength:config.maxLength,max:config.max,minLength:config.minLength,min:config.min,label:config.label??(0,string.ZH)(`${config.key}`),type:innerInputType,required:config.required??!0,disabled:!!config.disabled,placeholder:config.placeholder??void 0},validators:{validation:validators}}}buildSinglePasswordConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"input",className:config.className,fieldGroupClassName:config.fieldGroupClassName,templateOptions:{label:config.label??"Password",type:"password",required:!0,placeholder:"Your password",disabled:config.disabled},validators:{validation:validators}}}buildConfirmedPasswordConfig(config){const validators=config.validators??[];validators.push("required");return{validators:{validation:[{name:"fieldMatch",options:{errorPath:"passwordConfirm"}}]},fieldGroup:[{key:"password",type:"input",className:config.className,templateOptions:{label:config.label??"Password",type:"password",required:!0,placeholder:"Password, at least 7 characters",disabled:config.disabled},validators:{validation:validators}},{key:"passwordConfirm",type:"input",className:config.className,templateOptions:{label:config.label?"Confirm "+config.label:"Password Confirmation",type:"password",required:!0,placeholder:"Please re-enter your password",disabled:config.disabled}}]}}buildCheckboxConfig(config){return{key:config.key,type:"checkbox",className:config.className,wrappers:config.wrappers,defaultValue:config.defaultValue,hideExpression:config.hide,props:{label:config.label??(0,string.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled}}}buildDatepickerConfig(config){const validators=this.getValidators(config);return validators.push("date"),{key:config.key,type:"datepicker",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,string.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildFileFieldConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"file",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{buttonType:config.fileButtonType??"SECONDARY",fileFieldKind:config.fileFieldKind??"IMAGE",label:config.label??(0,string.ZH)(`${config.key}`),required:config.required??!0,disabled:!!config.disabled},validators:{validation:validators}}}buildEditorConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"text-editor",className:config.className,wrappers:config.wrappers,hideExpression:config.hide,props:{label:config.label??(0,string.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled},validators:{validation:validators}}}buildAutocompleteConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"autocomplete",className:config.className,wrappers:[...config.wrappers??[],"form-field"],props:{label:config.label??(0,string.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled,additionalProperties:{optionLabelProp:config.optionLabelProp,optionValueProp:config.optionValueProp,optionKeyProp:config.optionKeyProp,loadOptions:config.loadOptions,initialValue$:config.initialValue$}},validators:{validation:validators}}}buildTypeaheadConfig(config){const validators=this.getValidators(config);return{key:config.key,type:"typeahead",className:config.className,wrappers:[...config.wrappers??[],"form-field"],props:{label:config.label??(0,string.ZH)(`${config.key}`),required:config.required??!0,disabled:config.disabled,placeholder:"Type to receive suggestions",additionalProperties:{getOptions:config.getOptions,optionLabelProp:config.optionLabelProp,optionValueProp:config.optionValueProp,initialValue:config.initialValue}},validators:{validation:validators}}}toUpdateForm(fields){return fields.filter((field=>!("file"===field.type)))}getValidators(config){const validators=config.validators??[];return config.required&&validators.push("required"),validators}addEmptyOption(list,config){return Array.isArray(list)?(0,of.of)([this.createEmptyOption(config),...list]):list.pipe((0,map.T)((values=>[this.createEmptyOption(config),...values])))}createEmptyOption(config){const emptyOption={};emptyOption[config.labelProp]=formly_select_disable_field_component.D.EMPTY_OPTION_LABEL;return emptyOption[config.valueProp??config.key]=formly_select_disable_field_component.D.EMPTY_OPTION_VALUE,emptyOption}sortOptions(list$,config){const{sortProp,sortDirection}=config;return sortProp?list$.pipe((0,map.T)((list=>((list,prop,sortDirection="asc")=>{const newList=[...list];return newList.sort(((a,b)=>{const sortValue=a[prop]>b[prop]?1:-1;return"desc"===sortDirection?-1*sortValue:sortValue})),newList})(list,sortProp,sortDirection??"asc")))):list$}};FormlyService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],FormlyService)},"./src/app/_services/utils/campaign.mock.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_B:()=>dummyCampaigns,jr:()=>dummyCampaign,mE:()=>dummyStatistics});const dummyCampaigns=[{pk:1,name:"Aldrune",subtitle:"A campaign made by Samuel Day and recorded by Philipp Dörner<br>through the eyes of Relentless",background_image:"/media/campaign_backgrounds/bg.jpg",is_deactivated:!1,has_audio_recording_permission:!0,icon:"/media/campaign_icons/favicon-128x128.png",default_map:1,default_map_details:{icon:"map",image:"pic05_sMT2d6M.jpg",name:"Aldrune",id:1},duration:{start_date:"2020-04-07T00:00:00.000000Z",last_date:"2023-04-11T00:00:00.000000Z"}},{pk:2,name:"Jōzai Corp",subtitle:"Welcome to Jōzai Corp, please enjoy your employment.",background_image:"/media/campaign_backgrounds/shanghai_city_snlaYDd.jpg",is_deactivated:!1,has_audio_recording_permission:!1,icon:"/media/campaign_icons/icon.png",default_map:void 0,default_map_details:void 0,duration:{start_date:"2022-01-15T00:00:00.000000Z",last_date:"2022-02-19T00:00:00.000000Z"}}],dummyStatistics={character_count:265,item_count:142,location_count:229,creature_count:42,diaryentry_count:101,encounter_count:954,organization_count:46,quest_count:69,quote_count:203,session_audio_count:69,timestamp_count:1121,map_count:7,marker_count:136,spell_count:22,session_count:90,rule_count:17},dummyCampaign={name:"Aldrune",subtitle:"A campaign for testing",pk:1,background_image:"/assets/default_images/audio_pic_default.webp",icon:"https://www.aldrune.com/media/campaign_icons/favicon-128x128.png",default_map:123,default_map_details:{id:123,name:"Default Map",icon:"plus",image:"blub.jpg"},is_deactivated:!1,has_audio_recording_permission:!0,members:[{username:"isofruit",password:"password1",pk:1,api_permissions:["permission1","permission2"],groups:[1,2],group_details:[{name:"group1",pk:1},{name:"group2",pk:2}],is_staff:!0,is_superuser:!1,email:"user1@example.com",is_active:!0},{username:"user2",password:"password2",pk:2,api_permissions:["permission3","permission4"],groups:[1,3],group_details:[{name:"group1",pk:1},{name:"group3",pk:3}],is_staff:!1,is_superuser:!1,email:"user2@example.com",is_active:!0}],admins:[{username:"admin",password:"adminpassword",pk:3,api_permissions:["permission1","permission2","permission3","permission4"],groups:[1,2,3],group_details:[{name:"group1",pk:1},{name:"group2",pk:2},{name:"group3",pk:3}],is_staff:!0,is_superuser:!0,email:"admin@example.com",is_active:!0},{username:"user3",password:"password3",pk:4,api_permissions:["permission1"],groups:[1],group_details:[{name:"group1",pk:1}],is_staff:!1,is_superuser:!1,email:"user3@example.com",is_active:!0}],guests:[{username:"user4",password:"password4",pk:5,api_permissions:["permission2","permission3"],groups:[2,3],group_details:[{name:"group2",pk:2},{name:"group3",pk:3}],is_staff:!1,is_superuser:!1,email:"user4@example.com",is_active:!0},{username:"user5",password:"password5",pk:6,api_permissions:["permission4"],groups:[3],group_details:[{name:"group3",pk:3}],is_staff:!1,is_superuser:!1,email:"user5@example.com",is_active:!0}],member_group_name:"Members",admin_group_name:"Admins",guest_group_name:"Guests",emptySearchResponses:[{id:1,text:"Empty response 1",campaign:1},{id:2,text:"Empty response 2",campaign:1}]}},"./src/app/design/atoms/card/card.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>CardComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var card_componentngResource=__webpack_require__("./src/app/design/atoms/card/card.component.scss?ngResource"),card_componentngResource_default=__webpack_require__.n(card_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let CardComponent=class CardComponent{};CardComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-card",template:'<div class="card">\n  <ng-content></ng-content>\n</div>',changeDetection:core.ChangeDetectionStrategy.OnPush,imports:[],styles:[card_componentngResource_default()]})],CardComponent)},"./src/app/design/organisms/page-container/page-container.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>PageContainerComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var page_container_componentngResource=__webpack_require__("./src/app/design/organisms/page-container/page-container.component.scss?ngResource"),page_container_componentngResource_default=__webpack_require__.n(page_container_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),animations=__webpack_require__("./node_modules/@angular/animations/fesm2022/animations.mjs");const fadeIn=(0,animations.hZ)("fadeIn",[(0,animations.kY)(":enter",[(0,animations.iF)({opacity:0}),(0,animations.i0)("250ms ease-in",(0,animations.iF)({opacity:1}))]),(0,animations.kY)(":leave",[(0,animations.iF)({opacity:1}),(0,animations.i0)("250ms ease-out",(0,animations.iF)({opacity:0}))])]);(0,animations.hZ)("fadeOut",[(0,animations.kY)(":leave",[(0,animations.iF)({opacity:1}),(0,animations.i0)("250ms ease-out",(0,animations.iF)({opacity:0}))])]);let PageContainerComponent=class PageContainerComponent{};PageContainerComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-page-container",template:'<div class="page" [@fadeIn]>\n  <article class="page__foreground">\n    <ng-content></ng-content>\n  </article>\n</div>\n',imports:[],animations:[fadeIn],styles:[page_container_componentngResource_default()]})],PageContainerComponent)},"./src/app/design/organisms/user-row/user-row.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>UserRowComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var user_row_componentngResource=__webpack_require__("./src/app/design/organisms/user-row/user-row.component.scss?ngResource"),user_row_componentngResource_default=__webpack_require__.n(user_row_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),icon_component=__webpack_require__("./src/app/design/atoms/icon/icon.component.ts"),molecules=__webpack_require__("./src/app/design/molecules/index.ts");let UserRowComponent=class UserRowComponent{constructor(){this.user=core.input.required(),this.groups=(0,core.input)(),this.canCreate=(0,core.input)(!1),this.canDelete=(0,core.input)(!1),this.addGroup=new core.EventEmitter,this.removeGroup=new core.EventEmitter,this.deleteUser=new core.EventEmitter,this.userGroupEntries=(0,core.computed)((()=>this.user().group_details?.map((group=>({badgeValue:group.pk,text:group.name})))??[]))}static{this.propDecorators={user:[{type:core.Input,args:[{isSignal:!0,alias:"user",required:!0,transform:void 0}]}],groups:[{type:core.Input,args:[{isSignal:!0,alias:"groups",required:!1,transform:void 0}]}],canCreate:[{type:core.Input,args:[{isSignal:!0,alias:"canCreate",required:!1,transform:void 0}]}],canDelete:[{type:core.Input,args:[{isSignal:!0,alias:"canDelete",required:!1,transform:void 0}]}],addGroup:[{type:core.Output}],removeGroup:[{type:core.Output}],deleteUser:[{type:core.Output}]}}};UserRowComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-user-row",template:'<div class="container user-card">\n  <h3 class="row user-card__row user-card__row--heading">\n    <div class="col-12">\n      <app-icon [icon]="\'user\'"></app-icon>\n      {{ user().username | titlecase }}\n      @if (!user().is_active) {\n        <span title="Deleted/Deactivated"> (†) </span>\n      }\n    </div>\n  </h3>\n\n  <div class="row user-card__row">\n    <app-badge-list\n      class="col-12"\n      [canCreate]="canCreate()"\n      [canDelete]="canDelete()"\n      [entries]="userGroupEntries()"\n      [createOptions]="{\n        kind: \'SELECT\',\n        config: {\n          valueProp: \'id\',\n          labelProp: \'name\',\n          options: groups() ?? [],\n        },\n      }"\n      [label]="\'Permission-Groups\'"\n      (entryCreate)="addGroup.emit($event)"\n      (entryDelete)="removeGroup.emit($event)"\n    ></app-badge-list>\n  </div>\n\n  <div class="row user-card__row">\n    <div class="col-4">\n      <app-icon [icon]="\'envelope\'"></app-icon>\n      Email:\n    </div>\n    <div class="col-8">{{ user().email ?? "Not Provided" }}</div>\n  </div>\n\n  @if (user().is_active) {\n    <app-confirmation-toggle-button\n      class="col-12 user-card__row user-card__row--delete"\n      [confirmationQuestion]="\'Delete user ?\'"\n      [icon]="\'trash\'"\n      [cancelButtonType]="\'DARK\'"\n      (confirm)="deleteUser.emit(user())"\n    ></app-confirmation-toggle-button>\n  }\n</div>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,imports:[icon_component.R,molecules.pn,common.TitleCasePipe,molecules.Ts],styles:[user_row_componentngResource_default()]})],UserRowComponent)},"./node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{XI:()=>action});var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/internal/preview-api"),external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_=__webpack_require__("storybook/internal/preview-errors"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),ADDON_ID="storybook/actions",EVENT_ID=`${ADDON_ID}/action-event`,config={depth:10,clearOnStoryChange:!0,limit:50},findProto=(obj,callback)=>{let proto=Object.getPrototypeOf(obj);return!proto||callback(proto)?proto:findProto(proto,callback)},serializeArg=a=>{if("object"==typeof(e=a)&&e&&findProto(e,(proto=>/^Synthetic(?:Base)?Event$/.test(proto.constructor.name)))&&"function"==typeof e.persist){let e=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));e.persist();let viewDescriptor=Object.getOwnPropertyDescriptor(e,"view"),view=viewDescriptor?.value;return"object"==typeof view&&"Window"===view?.constructor.name&&Object.defineProperty(e,"view",{...viewDescriptor,value:Object.create(view.constructor.prototype)}),e}var e;return a},generateId=()=>"object"==typeof crypto&&"function"==typeof crypto.getRandomValues?(0,v4.A)():Date.now().toString(36)+Math.random().toString(36).substring(2);function action(name,options={}){let actionOptions={...config,...options},handler=function(...args){if(options.implicit){let storyRenderer=("__STORYBOOK_PREVIEW__"in external_STORYBOOK_MODULE_GLOBAL_.global?external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find((render=>"playing"===render.phase||"rendering"===render.phase));if(storyRenderer){let deprecated=!window?.FEATURES?.disallowImplicitActionsInRenderV8,error=new external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_.ImplicitActionsDuringRendering({phase:storyRenderer.phase,name,deprecated});if(!deprecated)throw error;console.warn(error)}}let channel=external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel(),id=generateId(),serializedArgs=args.map(serializeArg),normalizedArgs=args.length>1?serializedArgs:serializedArgs[0],actionDisplayToEmit={id,count:0,data:{name,args:normalizedArgs},options:{...actionOptions,maxDepth:5+(actionOptions.depth||3),allowFunction:actionOptions.allowFunction||!1}};channel.emit(EVENT_ID,actionDisplayToEmit)};return handler.isAction=!0,handler.implicit=options.implicit,handler}},"./src/app/design/templates/site-admin/site-admin.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>site_admin_stories});var common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),testing=__webpack_require__("./node_modules/@angular/router/fesm2022/testing.mjs"),ng_bootstrap=__webpack_require__("./node_modules/@ng-bootstrap/ng-bootstrap/fesm2022/ng-bootstrap.mjs"),dist=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),angular_dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),group_service_mock=__webpack_require__("./src/app/_services/article/group.service.mock.ts"),user_mock_service=__webpack_require__("./src/app/_services/article/user.mock.service.ts"),campaign_mock_service=__webpack_require__("./src/app/_services/utils/campaign.mock.service.ts"),animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),formly_constants=__webpack_require__("./src/app/_modules/formly_constants.ts"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var site_admin_componentngResource=__webpack_require__("./src/app/design/templates/site-admin/site-admin.component.scss?ngResource"),site_admin_componentngResource_default=__webpack_require__.n(site_admin_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),formly_service_service=__webpack_require__("./src/app/_services/formly/formly-service.service.ts"),routing_service=__webpack_require__("./src/app/_services/routing.service.ts"),button_component=__webpack_require__("./src/app/design/atoms/button/button.component.ts"),card_component=__webpack_require__("./src/app/design/atoms/card/card.component.ts"),icon_component=__webpack_require__("./src/app/design/atoms/icon/icon.component.ts"),separator_component=__webpack_require__("./src/app/design/atoms/separator/separator.component.ts"),spinner_component=__webpack_require__("./src/app/design/atoms/spinner/spinner.component.ts"),collapsible_panel_component=__webpack_require__("./src/app/design/molecules/collapsible-panel/collapsible-panel.component.ts"),form_component=__webpack_require__("./src/app/design/molecules/form/form.component.ts"),page_container_component=__webpack_require__("./src/app/design/organisms/page-container/page-container.component.ts"),user_row_component=__webpack_require__("./src/app/design/organisms/user-row/user-row.component.ts");let SiteAdminComponent=class SiteAdminComponent{constructor(routingService,formlyService){this.routingService=routingService,this.formlyService=formlyService,this.createCampaign=new core.EventEmitter,this.createUser=new core.EventEmitter,this.addUserGroup=new core.EventEmitter,this.removeUserGroup=new core.EventEmitter,this.downloadDatabase=new core.EventEmitter,this.deleteUser=new core.EventEmitter,this.userState="DISPLAY",this.userFields=[this.formlyService.buildInputConfig({key:"username",inputKind:"NAME",required:!0}),this.formlyService.buildConfirmedPasswordConfig({}),this.formlyService.buildInputConfig({key:"email",inputKind:"NAME",required:!1})],this.campaignState="DISPLAY",this.campaignFields=[this.formlyService.buildInputConfig({key:"name",inputKind:"NAME",required:!0,maxLength:40,placeholder:"Your campaign's name..."}),this.formlyService.buildInputConfig({key:"subtitle",inputKind:"STRING",required:!1,maxLength:400,placeholder:"The subtitle to show on the home page"}),this.formlyService.buildFileFieldConfig({key:"background_image",required:!0,fileButtonType:"DARK"}),this.formlyService.buildFileFieldConfig({key:"icon",required:!0,fileButtonType:"DARK"})]}ngOnInit(){this.setCampaignOverviewUrl()}ngOnChanges(){this.setUserCards()}setUserState(newState){this.userState=newState,"CREATE"===this.userState&&(this.userModel={})}createNewUser(newUser){this.createUser.emit(newUser)}setCampaignState(newState){this.campaignState=newState,"CREATE"===this.campaignState&&(this.campaignModel={})}createNewCampaign(newCampaign){this.createCampaign.emit(newCampaign)}setUserCards(){this.userCards=this.users?.map((user=>({isOpen:!1,user})))?.sort(((entry1,entry2)=>entry1.user.username.toLowerCase()>entry2.user.username.toLowerCase()?1:-1))??[]}setCampaignOverviewUrl(){this.campaignOverviewUrl=this.routingService.getRoutePath("campaign-overview")}static{this.ctorParameters=()=>[{type:routing_service.O},{type:formly_service_service.$}]}static{this.propDecorators={users:[{type:core.Input}],campaigns:[{type:core.Input}],allGroups:[{type:core.Input}],statistics:[{type:core.Input}],serverUrl:[{type:core.Input}],createCampaign:[{type:core.Output}],createUser:[{type:core.Output}],addUserGroup:[{type:core.Output}],removeUserGroup:[{type:core.Output}],downloadDatabase:[{type:core.Output}],deleteUser:[{type:core.Output}]}}};SiteAdminComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-site-admin",template:'<app-page-container>\n  <article class="site-admin">\n    <a class="site-admin__return-button" [routerLink]="campaignOverviewUrl">\n      <button\n        btn\n        [kind]="\'SECONDARY\'"\n        [icon]="\'globe-americas\'"\n        [text]="\'Back to campaign overview\'"\n      ></button>\n    </a>\n\n    \x3c!-- Users Section --\x3e\n    <div class="site-admin__user-section user-section">\n      \x3c!-- Section Heading --\x3e\n      <div class="d-flex justify-content-between">\n        <h3 class="mb-0">\n          <app-icon [icon]="\'user\'"></app-icon>\n          Users\n        </h3>\n\n        \x3c!-- Heading Buttons --\x3e\n        <div class="align-self-end position-relative top1">\n          \x3c!-- Add Users --\x3e\n          <button\n            btn\n            [kind]="\'DARK\'"\n            [icon]="userState === \'CREATE\' ? \'times\' : \'user-plus\'"\n            [text]="\n              userState === \'CREATE\' ? \'Cancel User Creation\' : \'Add User\'\n            "\n            (click)="\n              userState === \'CREATE\'\n                ? setUserState(\'DISPLAY\')\n                : setUserState(\'CREATE\')\n            "\n          ></button>\n        </div>\n      </div>\n\n      <app-separator class="site-admin__separator"></app-separator>\n\n      \x3c!-- New Table Entry --\x3e\n      @if (userState === "CREATE") {\n        <app-card class="my-2">\n          <h4>Adding new User</h4>\n          \x3c!-- Form --\x3e\n          <app-form\n            [model]="userModel"\n            [fields]="userFields"\n            [cancelButtonType]="\'DARK\'"\n            (formlySubmit)="createNewUser($event)"\n            (formlyCancel)="setUserState(\'DISPLAY\')"\n          ></app-form>\n        </app-card>\n      }\n\n      \x3c!-- Table --\x3e\n      @if (userState === "DISPLAY") {\n        @for (card of userCards; track card.user.pk) {\n          <app-collapsible-panel\n            [isOpen]="card.isOpen"\n            class="user-section__user"\n          >\n            <ng-container heading>\n              {{ card.user.username | titlecase }}\n            </ng-container>\n\n            <app-user-row\n              body\n              [user]="card.user"\n              [groups]="allGroups"\n              [canCreate]="true"\n              [canDelete]="true"\n              (addGroup)="\n                addUserGroup.emit({ groupId: $event.id, user: card.user })\n              "\n              (removeGroup)="\n                removeUserGroup.emit({ groupId: $event, user: card.user })\n              "\n              (deleteUser)="deleteUser.emit($event)"\n            ></app-user-row>\n          </app-collapsible-panel>\n        }\n        <div class="mt-3">(†): Deactivated/Deleted Account</div>\n      }\n    </div>\n\n    \x3c!-- Database Section --\x3e\n    <div class="mb-3">\n      \x3c!-- Section Heading --\x3e\n      <div class="d-flex justify-content-between">\n        <h3 class="mb-0">\n          <app-icon [icon]="\'database\'"></app-icon>\n          Database\n        </h3>\n\n        \x3c!-- Heading Buttons --\x3e\n        <div class="align-self-end position-relative top1">\n          \x3c!-- Download Database --\x3e\n          <button\n            btn\n            [kind]="\'PRIMARY\'"\n            [icon]="\'database\'"\n            [text]="\'Download Database\'"\n            (click)="downloadDatabase.emit()"\n          ></button>\n\n          \x3c!-- Clear Tokens --\x3e\n          \x3c!-- <div class="btn btn-danger border-white">\n          <span class="fa fa-trash"></span>\n          Clear > 7 day old Tokens\n        </div> --\x3e\n        </div>\n      </div>\n\n      <app-separator class="site-admin__separator"></app-separator>\n\n      \x3c!-- Section Body --\x3e\n      \x3c!-- Statistics --\x3e\n      <div class="mb-5">\n        @for (statistic of statistics | keyvalue; track statistic.key) {\n          <div class="row">\n            <div class="col-6 col-md-3">{{ statistic.key }}</div>\n            <div class="col-6 col-md-3">{{ statistic.value }}</div>\n          </div>\n        }\n      </div>\n    </div>\n\n    \x3c!-- Campaign Section --\x3e\n    <div class="site-admin__campaign-section campaign-section">\n      \x3c!-- Section Heading --\x3e\n      <div class="campaign-section__heading heading">\n        <h3 class="heading__text">\n          <app-icon [icon]="\'dragon\'"></app-icon>\n          Campaigns\n          @if (campaignState === "WAIT_WHILE_CREATING") {\n            <app-spinner\n              class="heading__text heading__text--loading"\n            ></app-spinner>\n          }\n        </h3>\n\n        \x3c!-- Heading Buttons --\x3e\n        <div class="heading__button">\n          \x3c!-- Add Campaign --\x3e\n          <button\n            btn\n            [kind]="\'PRIMARY\'"\n            [icon]="campaignState === \'CREATE\' ? \'times\' : \'plus\'"\n            [text]="\n              campaignState === \'CREATE\'\n                ? \'Cancel Campaign Creation\'\n                : \'Add Campaign\'\n            "\n            (click)="\n              campaignState === \'CREATE\'\n                ? setCampaignState(\'DISPLAY\')\n                : setCampaignState(\'CREATE\')\n            "\n          ></button>\n        </div>\n      </div>\n\n      <app-separator class="site-admin__separator"></app-separator>\n\n      \x3c!-- Section Body --\x3e\n      @if (campaignState === "DISPLAY") {\n        <div class="campaign-section__body body">\n          @for (campaign of campaigns; track campaign.pk) {\n            <div class="row mb-4">\n              <div class="col-sm-3">\n                <img\n                  [src]="serverUrl + \'/\' + campaign.icon"\n                  [alt]="\'Icon of campaign \' + campaign.name"\n                  class="body__icon"\n                />\n                <strong> {{ campaign.name }} </strong>\n              </div>\n              <div class="col-sm-3">\n                {{ campaign.admins?.length ?? 0 }} Admins\n              </div>\n              <div class="col-sm-3">\n                {{ campaign.members?.length ?? 0 }} Members\n              </div>\n              <div class="col-sm-3">\n                {{ campaign.guests?.length ?? 0 }} Guests\n              </div>\n            </div>\n          }\n        </div>\n      }\n\n      \x3c!-- New Campaign Entry --\x3e\n      @if (campaignState === "CREATE") {\n        <app-card class="my-2">\n          <h4>Adding new Campaign</h4>\n          \x3c!-- Form --\x3e\n          <app-form\n            [model]="campaignModel"\n            [fields]="campaignFields"\n            [cancelButtonType]="\'DARK\'"\n            (formlySubmit)="createNewCampaign($event)"\n            (formlyCancel)="setCampaignState(\'DISPLAY\')"\n          ></app-form>\n        </app-card>\n      }\n    </div>\n\n    <a class="site-admin__return-button" [routerLink]="campaignOverviewUrl">\n      <button\n        btn\n        [kind]="\'SECONDARY\'"\n        [icon]="\'globe-americas\'"\n        [text]="\'Back to campaign overview\'"\n      ></button>\n    </a>\n  </article>\n</app-page-container>\n',imports:[page_container_component.i,router.Wk,button_component.Q,icon_component.R,separator_component.F,card_component.i,form_component.s,collapsible_panel_component.e,user_row_component.D,spinner_component.t,common.TitleCasePipe,common.KeyValuePipe],styles:[site_admin_componentngResource_default()]})],SiteAdminComponent);const site_admin_stories={title:"DesignSystem/Templates/SiteAdminComponent",component:SiteAdminComponent,decorators:[(0,angular_dist.moduleMetadata)({imports:[common.CommonModule,ng_bootstrap.UN,testing.c,formly_constants.d_,animations.BrowserAnimationsModule],declarations:[]})],args:{users:user_mock_service.d,campaigns:campaign_mock_service._B,allGroups:group_service_mock.F,statistics:campaign_mock_service.mE,serverUrl:"https://www.aldrune.com"}},Default=(args=>({props:{...args,createCampaign:(0,dist.XI)("createCampaign"),createUser:(0,dist.XI)("createUser"),addUserGroup:(0,dist.XI)("addUserGroup"),removeUserGroup:(0,dist.XI)("removeUserGroup"),downloadDatabase:(0,dist.XI)("downloadDatabase"),deleteUser:(0,dist.XI)("deleteUser")}})).bind({});Default.args={};const __namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => ({\n  props: {\n    ...args,\n    createCampaign: action('createCampaign'),\n    createUser: action('createUser'),\n    addUserGroup: action('addUserGroup'),\n    removeUserGroup: action('removeUserGroup'),\n    downloadDatabase: action('downloadDatabase'),\n    deleteUser: action('deleteUser')\n  }\n})",...Default.parameters?.docs?.source}}}},"./src/app/design/atoms/card/card.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".accordion {\n  --bs-accordion-active-bg: var(--bs-gray-900) !important;\n}\n\nbutton.btn.btn-link:hover {\n  text-decoration: none !important;\n}\n\nbutton.btn.btn-link:focus {\n  text-decoration: none !important;\n  box-shadow: none !important;\n}\n\n.card button.btn.btn-link {\n  width: 100%;\n  text-align: left;\n}\n\n.form-control {\n  height: 2.75rem;\n  font-size: 1.2rem;\n}\n\ninput.form-control {\n  background-color: transparent !important;\n  color: white !important;\n  border: solid white 1px !important;\n}\n\ninput.form-control:focus {\n  box-shadow: 3px blue;\n  color: white;\n}\n\nselect.form-select {\n  color: white !important;\n  background-color: #4c4c4c !important;\n}\n\nselect:focus {\n  background-color: #4c4c4c;\n  box-shadow: 3px blue;\n  color: white;\n}\n\noption {\n  background-color: #1b1f22;\n  color: white;\n  font-size: 18px;\n}\n\n.custom-control.custom-checkbox {\n  transform: scale(1.2);\n  transform-origin: 0;\n}\n\n.visually-hidden {\n  display: none;\n}\n\n.vh-50 {\n  height: 50vh;\n}\n\n.tooltip-inner {\n  --bs-tooltip-bg: var(--bs-info-bg-subtle);\n  --bs-tooltip-color: var(--bs-emphasis-color);\n}\n\n:host {\n  --card-bg-color: #393e41 !important;\n  --card-flex-direction: column;\n  --card-padding: var(--spacer-4);\n  border-radius: var(--bs-border-radius);\n}\n\n.card {\n  background-color: var(--card-bg-color);\n  padding: var(--card-padding);\n  flex-direction: var(--card-flex-direction);\n  width: 100%;\n  height: 100%;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/organisms/page-container/page-container.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".page {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n.page__background {\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: -2;\n  width: 100%;\n  height: 100mvh;\n}\n.page__foreground {\n  max-width: 60rem;\n  width: 100%;\n  background-color: var(--wiki-bg-transparent);\n  padding: var(--spacer-3) var(--spacer-3) var(--spacer-5) var(--spacer-3);\n  margin-bottom: var(--spacer-4);\n  color: white;\n}\n@media (min-width: 768px) {\n  .page__foreground {\n    border-radius: var(--bs-border-radius);\n  }\n}\n@media (min-width: 992px) {\n  .page__foreground {\n    padding: var(--spacer-4);\n  }\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/organisms/user-row/user-row.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".user-card__row {\n  margin-top: var(--spacer-3);\n  margin-bottom: var(--spacer-3);\n}\n.user-card__row--delete {\n  margin-top: var(--spacer-4);\n  display: flex;\n  justify-content: flex-end;\n}\n.user-card__row--heading {\n  margin-top: var(--spacer-0);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/app/design/templates/site-admin/site-admin.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".site-admin__user-section {\n  margin-top: var(--spacer-3);\n  margin-bottom: var(--spacer-3);\n}\n.site-admin__campaign-section {\n  margin-bottom: var(--spacer-3);\n}\n.site-admin__separator {\n  --separator-margin-top: var(--spacer-0);\n}\n\n.user-section__user {\n  display: inline-block;\n  width: 100%;\n  margin-top: var(--spacer-1);\n  margin-bottom: var(--spacer-1);\n}\n\n.campaign-section__heading {\n  display: flex;\n  justify-content: space-between;\n}\n.campaign-section__body {\n  margin-bottom: var(--spacer-5);\n}\n\n.body__icon {\n  margin-right: var(--spacer-3);\n  max-height: 2rem;\n}\n\n.heading__text {\n  margin-bottom: var(--spacer-0);\n}\n.heading__text--loading {\n  margin-left: var(--spacer-3);\n}\n.heading__button {\n  align-self: flex-end;\n  position: relative;\n  top: 1px;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);
<form 
  [formGroup]="form" 
  [enctype]="enctype" 
>
  <formly-form 
    [form]="form" 
    [fields]="usedFields" 
    [model]="model"
  ></formly-form>
  
  <ng-container *ngIf="!disabled && enableSubmitButtons">
    <div class="mt-5">
      <!-- Cancel Button -->
      <app-button 
        class="me-3" 
        [type]="cancelButtonType"
        [icon]="'times'"
        [text]="'Cancel'"
        (click)="onCancel()"
      ></app-button>
        
        <!-- Submit Button -->
        <ng-container 
          *ngIf="form.valid; 
            then activeSubmitButton; 
            else inactiveSubmitButton"
        ></ng-container>
    </div>
  </ng-container>

</form>

<ng-template #activeSubmitButton>
  <app-button 
    [type]="submitButtonType" 
    [text]="'Submit'"
    [icon]="submitIcon"
    (click)="onSubmit()"
  ></app-button>
</ng-template>

<ng-template #inactiveSubmitButton>
  <app-button 
    placement="top" 
    [type]="'DARK'" 
    [ngbTooltip]="'The form is not yet correctly filled out!'"
    [tooltipClass]="'my-tooltip'"
    [icon]="'lock'"
    [text]="'Submit'"
  ></app-button>
</ng-template>
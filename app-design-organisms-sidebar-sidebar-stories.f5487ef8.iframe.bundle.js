(self.webpackChunknimstoryfont_gui=self.webpackChunknimstoryfont_gui||[]).push([[7118],{"./src/app/design/organisms/sidebar/sidebar.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _angular_router_testing__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/router/fesm2020/testing.mjs"),_storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),src_app_design_molecules__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/app/design/molecules/index.ts");const __WEBPACK_DEFAULT_EXPORT__={title:"DesignSystem/Organisms/SidebarComponent",component:__webpack_require__("./src/app/design/organisms/sidebar/sidebar.component.ts").k,decorators:[(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.moduleMetadata)({imports:[src_app_design_molecules__WEBPACK_IMPORTED_MODULE_1__._V,_angular_router_testing__WEBPACK_IMPORTED_MODULE_3__.Z_],declarations:[]})],args:{campaign:{name:"Aldrune",subtitle:"A campaign for testing",pk:1,background_image:"https://example.com/background.jpg",icon:"https://www.aldrune.com/media/campaign_icons/favicon-128x128.png",default_map:123,default_map_details:{pk:123,name:"Default Map"},is_deactivated:!1,has_audio_recording_permission:!0,members:[],admins:[],guests:[],member_group_name:"Members",admin_group_name:"Admins",guest_group_name:"Guests",emptySearchResponses:[{id:1,text:"Empty response 1",campaign:1},{id:2,text:"Empty response 2",campaign:1}]},user:{accessToken:{token:"abc123",exp:1651345060,type:"access"},refreshToken:{token:"def456",exp:1651345090,type:"refresh"},userId:123,userName:"John Doe",isAdmin:!0,isSuperUser:!1,campaignMemberships:{"Campaign A":"member","Campaign B":"admin"}}}},Default=(args=>({props:{...args}})).bind({});Default.args={}},"./src/app/_services/routing.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>RoutingService});var _class,tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tslib/tslib.es6.js"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2020/core.mjs"),_angular_router__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/router/fesm2020/router.mjs");let RoutingService=((_class=class RoutingService{constructor(router){this.router=router,this.NONE_STRING="None",this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}routeToPath(routeName,params={}){const routePath=this.getRoutePath(routeName,params),cleanedObjectUrl=this.replaceSpecialUnicodeCharacters(routePath);this.router.navigateByUrl(cleanedObjectUrl)}getRoutePath(routeName,params={}){return"Dummy/url"}routeToErrorPage(error){if("number"!=typeof error&&!error.hasOwnProperty("status"))throw"Incorrect error input. The input does not contain an error status or an object with the error status. Can not route to error page without error status.";"number"!=typeof error&&error.hasOwnProperty("status")&&(error=error.status);const errorStatusParam=`${error}`;this.routeToPath("error",{errorStatus:errorStatusParam})}routeNameMatches(route,routeName){return route.snapshot.data.name===routeName}replaceSpecialUnicodeCharacters(routePath){return routePath.replace("(","%28").replace(")","%29").replace("?","?").replace("â€ ","%E2%80%A0")}getVariableRouteByName(routeName){const routesWithRouteName=this.getRoutesWithName(routeName);switch(routesWithRouteName.length){case 1:return routesWithRouteName[0];case 0:throw`There is no route with the name ${routeName}. Please contact the Developer to use either a different route name or create a route for this name.`;default:throw`There is more than 1 route with the name ${routeName}. Please contact the Developer to ensure all routes have unique names.`}}getVariableRoutePathByName(routeName){return this.getVariableRouteByName(routeName).path}hasPathVariables(routePath){return routePath.includes("/:")}hasRoutePath(routeName){return this.getRoutesWithName(routeName).length>0}getRoutesWithName(routeName){return this.router.config.filter((pathObject=>{const routeData=pathObject.data;return null!=routeData&&routeData.name===routeName}))}getPathVariableNames(routePath){const pathVariables=routePath.split("/").filter((segment=>segment.startsWith(":")));return pathVariables.map((segment=>segment.slice(1)))}}).ctorParameters=()=>[{type:_angular_router__WEBPACK_IMPORTED_MODULE_0__.F0}],_class);RoutingService=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.Injectable)({providedIn:"root"})],RoutingService)},"./src/app/design/organisms/_model/sidebar.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>SIDEBAR_ENTRIES});const SIDEBAR_ENTRIES=[{title:"Creatures",iconClass:"dragon",route:"creature-overview",color:"red",article_types:["creature"],showInSidebar:!0},{title:"Characters",iconClass:"male",route:"character-overview",color:"blue",article_types:["character"],showInSidebar:!0},{title:"DiaryEntries",iconClass:"book-open",route:"diaryentry-overview",color:"darkgreen",article_types:["diaryentry"],showInSidebar:!0},{title:"Items",iconClass:"magic",route:"item-overview",color:"yellow",article_types:["item"],showInSidebar:!0},{title:"Locations",iconClass:"compass",route:"location-overview",color:"brown",article_types:["location"],showInSidebar:!0},{title:"Maps",iconClass:"map",route:"default-map",color:"beige",article_types:["map"],showInSidebar:!0},{title:"Organizations",iconClass:"sitemap",route:"organization-overview",color:"purple",article_types:["organization"],showInSidebar:!0},{title:"Quests",iconClass:"question-circle",route:"quest-overview",color:"white",article_types:["quest"],showInSidebar:!0},{title:"Recordings",iconClass:"file-audio-o",route:"sessionaudio-overview",color:"green",article_types:["sessionaudio","recording"],showInSidebar:!0},{title:"Rules",iconClass:"book",route:"rules",color:"orange",article_types:["rule","rules"],showInSidebar:!0},{title:"Spells",iconClass:"hand-sparkles",route:"spells",color:"violet",article_types:["spell","spells"],showInSidebar:!0},{title:"Sessions",iconClass:"calendar-alt",route:"sessions",color:"green",article_types:["session","sessions"],showInSidebar:!0}]},"./src/app/design/organisms/sidebar/sidebar.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{k:()=>SidebarComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js");var _class,sidebar_componentngResource=__webpack_require__("./src/app/design/organisms/sidebar/sidebar.component.scss?ngResource"),sidebar_componentngResource_default=__webpack_require__.n(sidebar_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2020/core.mjs"),routing_service=__webpack_require__("./src/app/_services/routing.service.ts"),sidebar=__webpack_require__("./src/app/design/organisms/_model/sidebar.ts");let SidebarComponent=((_class=class SidebarComponent{constructor(routingService){this.routingService=routingService,this.logout=new core.EventEmitter,this.sidebarEntries=sidebar.R,this.isAdmin=!1,this.campaignOverviewUrl=this.routingService.getRoutePath("campaign-overview")}ngOnInit(){this.homeUrl=this.routingService.getRoutePath("home",{campaign:this.campaign.name}),this.campaignAdminUrl=this.routingService.getRoutePath("campaign-admin",{campaign:this.campaign.name}),this.profileUrl=this.routingService.getRoutePath("direct-campaign-profile",{username:this.user.userName,campaign:this.campaign.name});const isCampaignAdmin="admin"===this.user.campaignMemberships[this.campaign.name],isSiteAdmin=this.user.isAdmin||this.user.isSuperUser;this.isAdmin=isCampaignAdmin||isSiteAdmin}}).ctorParameters=()=>[{type:routing_service.Z}],_class.propDecorators={campaign:[{type:core.Input}],user:[{type:core.Input}],logout:[{type:core.Output}]},_class);SidebarComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"app-sidebar",template:'<ng-container *ngIf="campaign">\n  <nav class="sidebar">\n    \x3c!-- Brand --\x3e\n    <div class="sidebar__brand brand">\n        <div class="brand__back" title="campaign-overview">\n            <a [routerLink]="campaignOverviewUrl" class="brand__back-link">\n              <app-icon class="brand__back-icon" [icon]="\'chevron-left\'"></app-icon>  \n            </a> \n        </div>\n\n        <div \n          class="brand__home" \n          [title]="campaign.name + \'-Home\'" \n          [class.disabled-entry]="campaign == null"\n        >\n          <a class="brand__home-link" [routerLink]="homeUrl">\n            <h3 class="brand__home-link-text"> \n              <img class="brand__icon" [src]="campaign.icon" alt="..." />\n              <div class="brand__home-link-text-text">{{campaign.name }}</div>\n            </h3>\n          </a>\n        </div>\n    </div>\n  \n    \x3c!-- Admin Section --\x3e\n    <ul class="sidebar__entries">\n      <ng-container *ngIf="isAdmin">\n          <li class="sidebar__entry entry" [class.disabled-entry]="campaign == null">\n              <a class="entry__link" [routerLink]="campaignAdminUrl" >\n                  <app-icon class="entry__icon" [icon]="\'hammer\'"></app-icon>\n                  <span class="entry__text"> Campaign Admin </span>\n              </a>\n          </li>\n      </ng-container>\n  \n      \x3c!-- Campaign Overview Entries --\x3e\n      <ng-container *ngFor="let entry of sidebarEntries">\n        <li class="sidebar__entry entry" [class.disabled-entry]="campaign == null">\n          <a [routerLink]="entry.route" class="entry__link">\n            <app-icon class="entry__icon" [icon]="entry.iconClass"></app-icon>  \n            <span class="entry__text">{{entry.title}}</span>\n          </a>\n        </li>\n      </ng-container>\n    </ul>\n\n    \x3c!-- Logout --\x3e\n    <ul class="sidebar__footer footer">\n      <li class="sidebar__entry entry">\n        <a class="entry__link" [routerLink]="profileUrl"> \n          <app-icon class="entry__icon" [icon]="\'user-circle\'"></app-icon>\n          <span class="entry__text">Profile</span> \n        </a>\n      </li>\n      <li class="sidebar__entry entry">\n        <a class="entry__link" (click)="this.logout.emit()"> \n          <app-icon class="entry__icon" [icon]="\'sign-out\'"></app-icon>  \n          <span class="entry__text">Logout</span> \n        </a>\n      </li>\n    </ul>\n  </nav>\n</ng-container>\n\n\n\n<ng-template #nonCampaignBrand>\n  <ul class="brand-line d-flex">\n      <li class="flex-1">\n          <a class="ps-0" [routerLink]="campaignOverviewUrl">\n              <h3 class="d-flex align-items-center justify-content-center" id="brand"> \n                  <span class="fas fa-chevron-left"></span>\n                  <span class="ms-2 on-hover-show"> To campaigns</span>\n              </h3>\n          </a>\n      </li>\n  </ul>\n</ng-template>',styles:[sidebar_componentngResource_default()]})],SidebarComponent)},"./src/app/design/organisms/sidebar/sidebar.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"a {\n  text-decoration: none;\n}\n\n:host {\n  --entry-hover-color: var(--bs-link-hover-color);\n  --entry-hover-bg-color: var(--bs-gray-700);\n  --brand-height: 3rem;\n}\n\n.sidebar {\n  background-color: var(--bs-gray-dark);\n  overflow-y: auto;\n  overflow-x: hidden;\n  display: flex;\n  flex-direction: column;\n  height: inherit;\n  width: inherit;\n  max-width: inherit;\n}\n.sidebar__brand {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n}\n.sidebar__entries {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n  flex: 1;\n}\n.sidebar__entry :hover {\n  color: var(--entry-hover-color);\n  background-color: var(--entry-hover-bg-color);\n}\n.sidebar__footer {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n  border-top: 4px inset;\n}\n\n.entry__link {\n  display: flex;\n  align-items: center;\n  padding-left: var(--spacer-3);\n  list-style-type: none;\n  height: 3rem;\n  font-weight: bold;\n  font-size: large;\n  cursor: pointer;\n}\n.entry__icon {\n  width: var(--spacer-5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-bottom: var(--spacer-2);\n}\n\n.brand {\n  display: flex;\n  height: var(--brand-height);\n  font-size: 1.5rem;\n}\n.brand__back :hover {\n  color: var(--entry-hover-color);\n  background-color: var(--entry-hover-bg-color);\n  height: var(--brand-height);\n}\n.brand__back-link {\n  font-size: 32px;\n  height: 100%;\n  font-weight: bold;\n  display: flex;\n  padding-right: var(--spacer-3);\n  padding-left: var(--spacer-3);\n  border-right: solid 2px var(--bs-white);\n}\n.brand__back-icon {\n  display: flex;\n  align-items: center;\n}\n.brand__home {\n  height: var(--brand-height);\n  flex: 1;\n}\n.brand__home :hover {\n  color: var(--entry-hover-color) !important;\n  background-color: var(--entry-hover-bg-color);\n}\n.brand__home-link {\n  padding-left: var(--spacer-2);\n  color: inherit;\n  font-size: 24px;\n  display: flex;\n  align-items: center;\n  height: 100%;\n}\n.brand__home-link-text {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: inherit;\n  margin: var(--spacer-0) var(--spacer-4) var(--spacer-0) var(--spacer-0);\n}\n.brand__home-link-text-text {\n  margin-left: var(--spacer-2);\n}\n.brand__icon {\n  height: 32px;\n  width: 32px;\n}\n\n.footer {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: var(--spacer-3);\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);